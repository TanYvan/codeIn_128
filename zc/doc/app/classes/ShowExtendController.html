<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ShowExtendController</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ShowExtendController</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/controllers/show_extend_controller_rb.html">
                app/controllers/show_extend_controller.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="ApplicationController.html">
                ApplicationController
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
显示报酬发放信息的控制器 添加人 苏获 添加时间 20090527
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M001752">address</a>&nbsp;&nbsp;
      <a href="#M001755">address_h</a>&nbsp;&nbsp;
      <a href="#M001736">cancel</a>&nbsp;&nbsp;
      <a href="#M001759">cancel_2</a>&nbsp;&nbsp;
      <a href="#M001738">extend_edit</a>&nbsp;&nbsp;
      <a href="#M001739">extend_update</a>&nbsp;&nbsp;
      <a href="#M001750">gxh</a>&nbsp;&nbsp;
      <a href="#M001754">gxh_h</a>&nbsp;&nbsp;
      <a href="#M001751">gxh_self</a>&nbsp;&nbsp;
      <a href="#M001753">invoice</a>&nbsp;&nbsp;
      <a href="#M001756">invoice_h</a>&nbsp;&nbsp;
      <a href="#M001737">list_extend</a>&nbsp;&nbsp;
      <a href="#M001758">list_extend_2</a>&nbsp;&nbsp;
      <a href="#M001740">list_extend_a</a>&nbsp;&nbsp;
      <a href="#M001741">list_extend_b</a>&nbsp;&nbsp;
      <a href="#M001742">list_extend_c</a>&nbsp;&nbsp;
      <a href="#M001735">list_extend_code</a>&nbsp;&nbsp;
      <a href="#M001757">list_extend_code_2</a>&nbsp;&nbsp;
      <a href="#M001743">list_extend_d</a>&nbsp;&nbsp;
      <a href="#M001744">list_extend_e</a>&nbsp;&nbsp;
      <a href="#M001745">list_extend_f</a>&nbsp;&nbsp;
      <a href="#M001746">list_extend_g</a>&nbsp;&nbsp;
      <a href="#M001747">list_extend_h</a>&nbsp;&nbsp;
      <a href="#M001748">list_extend_k</a>&nbsp;&nbsp;
      <a href="#M001749">list_extend_tax</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M001752" class="method-detail">
        <a name="M001752"></a>

        <div class="method-heading">
          <a href="#M001752" class="method-signature">
          <span class="method-name">address</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
导出地址
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001752-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001752-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 222</span>
222:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">address</span>
223:     <span class="ruby-ivar">@person</span> = <span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;used='Y' and t_extend_code=?&quot;</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]],<span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct t_extend_code,p_typ,p,p_name &quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id&quot;</span>)
224:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001755" class="method-detail">
        <a name="M001755"></a>

        <div class="method-heading">
          <a href="#M001755" class="method-signature">
          <span class="method-name">address_h</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
导出地址
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001755-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001755-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 241</span>
241:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">address_h</span>
242:     <span class="ruby-ivar">@person</span> = <span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;used='Y' and typ&lt;&gt;'5' and t_extend_code=?&quot;</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]],<span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct t_extend_code,p_typ,p,p_name &quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id&quot;</span>)
243:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001736" class="method-detail">
        <a name="M001736"></a>

        <div class="method-heading">
          <a href="#M001736" class="method-signature">
          <span class="method-name">cancel</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
撤销本批次发放的所有报酬
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001736-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001736-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 38</span>
38:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cancel</span>
39:     <span class="ruby-ivar">@extend_codes</span> = <span class="ruby-constant">TbTExtendCode</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
40:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@extend_codes</span>.<span class="ruby-identifier">t_extend_code</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SysArg</span>.<span class="ruby-identifier">find_by_code</span>(<span class="ruby-value str">'0006'</span>).<span class="ruby-identifier">val</span>
41:       <span class="ruby-ivar">@tef</span>=<span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value str">&quot;t_extend_code = ''&quot;</span>, [<span class="ruby-value str">&quot;t_extend_code=? and used = 'Y' &quot;</span>,<span class="ruby-ivar">@extend_codes</span>.<span class="ruby-identifier">t_extend_code</span>])
42:       <span class="ruby-ivar">@extend_codes</span>.<span class="ruby-identifier">used</span>=<span class="ruby-value str">'N'</span>
43:       <span class="ruby-ivar">@extend_codes</span>.<span class="ruby-identifier">u</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:user_code</span>]
44:       <span class="ruby-ivar">@extend_codes</span>.<span class="ruby-identifier">t</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>()
45:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@extend_codes</span>.<span class="ruby-identifier">save</span>
46:         <span class="ruby-constant">SysArg</span>.<span class="ruby-identifier">reduce_0006</span>
47:         <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>]=<span class="ruby-node">&quot;#{@extend_codes.t_extend_code}删除成功&quot;</span>
48:       <span class="ruby-keyword kw">else</span>
49:         <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>]=<span class="ruby-node">&quot;#{@extend_codes.t_extend_code}删除失败&quot;</span>
50:       <span class="ruby-keyword kw">end</span>
51:       <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;list_extend_code&quot;</span>
52:     <span class="ruby-keyword kw">end</span>
53:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001759" class="method-detail">
        <a name="M001759"></a>

        <div class="method-heading">
          <a href="#M001759" class="method-signature">
          <span class="method-name">cancel_2</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
撤销本批次发放的所有报酬
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001759-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001759-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 299</span>
299:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cancel_2</span>
300:     <span class="ruby-ivar">@extend_codes</span> = <span class="ruby-constant">TbSelfTExtendCode</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
301:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@extend_codes</span>.<span class="ruby-identifier">t_extend_code</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SysArg</span>.<span class="ruby-identifier">find_by_code</span>(<span class="ruby-value str">'0006_1'</span>).<span class="ruby-identifier">val</span>
302:       <span class="ruby-ivar">@tef</span>=<span class="ruby-constant">TbSelfExtend</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value str">&quot;t_extend_code = ''&quot;</span>, [<span class="ruby-value str">&quot;t_extend_code=? and used = 'Y' &quot;</span>,<span class="ruby-ivar">@extend_codes</span>.<span class="ruby-identifier">t_extend_code</span>])
303:       <span class="ruby-ivar">@extend_codes</span>.<span class="ruby-identifier">used</span>=<span class="ruby-value str">'N'</span>
304:       <span class="ruby-ivar">@extend_codes</span>.<span class="ruby-identifier">u</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:user_code</span>]
305:       <span class="ruby-ivar">@extend_codes</span>.<span class="ruby-identifier">t</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>()
306:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@extend_codes</span>.<span class="ruby-identifier">save</span>
307:         <span class="ruby-constant">SysArg</span>.<span class="ruby-identifier">reduce_0006_1</span>
308:         <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>]=<span class="ruby-node">&quot;#{@extend_codes.t_extend_code}删除成功&quot;</span>
309:       <span class="ruby-keyword kw">else</span>
310:         <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>]=<span class="ruby-node">&quot;#{@extend_codes.t_extend_code}删除失败&quot;</span>
311:       <span class="ruby-keyword kw">end</span>
312:       <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;list_extend_code_2&quot;</span>
313:     <span class="ruby-keyword kw">end</span>
314:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001738" class="method-detail">
        <a name="M001738"></a>

        <div class="method-heading">
          <a href="#M001738" class="method-signature">
          <span class="method-name">extend_edit</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001738-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001738-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 66</span>
66:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extend_edit</span>
67:      <span class="ruby-ivar">@tb_extend</span>=<span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
68:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001739" class="method-detail">
        <a name="M001739"></a>

        <div class="method-heading">
          <a href="#M001739" class="method-signature">
          <span class="method-name">extend_update</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001739-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001739-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 69</span>
69:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extend_update</span>
70:      <span class="ruby-ivar">@tb_extend</span>=<span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
71:      <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@tb_extend</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:tb_extend</span>])
72:         <span class="ruby-ivar">@tb_extend</span>.<span class="ruby-identifier">t_extend_u</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:user_code</span>]
73:         <span class="ruby-ivar">@tb_extend</span>.<span class="ruby-identifier">t_extend_t</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>()
74:         <span class="ruby-ivar">@tb_extend</span>.<span class="ruby-identifier">save</span>
75:         <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>]=<span class="ruby-value str">&quot;修改成功&quot;</span>
76:         <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;extend_edit&quot;</span>,<span class="ruby-identifier">:id=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>]
77:      <span class="ruby-keyword kw">else</span>
78:         <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;extend_edit&quot;</span>,<span class="ruby-identifier">:id=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>]
79:      <span class="ruby-keyword kw">end</span>
80:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001750" class="method-detail">
        <a name="M001750"></a>

        <div class="method-heading">
          <a href="#M001750" class="method-signature">
          <span class="method-name">gxh</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
导出本次发放的全部感谢函
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001750-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001750-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 203</span>
203:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">gxh</span>
204:     <span class="ruby-ivar">@person</span> = <span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;used='Y' and t_extend_code=?&quot;</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]],<span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct t_extend_code,p_typ,p,p_name,bank_account,bankname &quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id&quot;</span>)
205:     <span class="ruby-ivar">@extend_code</span>=<span class="ruby-constant">TbTExtendCode</span>.<span class="ruby-identifier">find_by_t_extend_code</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>])
206:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001754" class="method-detail">
        <a name="M001754"></a>

        <div class="method-heading">
          <a href="#M001754" class="method-signature">
          <span class="method-name">gxh_h</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
导出感谢函
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001754-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001754-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 235</span>
235:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">gxh_h</span>
236:     <span class="ruby-ivar">@person</span> = <span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;used='Y' and typ&lt;&gt;'5' and t_extend_code=?&quot;</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]],<span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct t_extend_code,p_typ,p,p_name,bank_account,bankname &quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id&quot;</span>)
237:     <span class="ruby-ivar">@extend_code</span>=<span class="ruby-constant">TbTExtendCode</span>.<span class="ruby-identifier">find_by_t_extend_code</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>])
238:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001751" class="method-detail">
        <a name="M001751"></a>

        <div class="method-heading">
          <a href="#M001751" class="method-signature">
          <span class="method-name">gxh_self</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
导出本次发放的某一个人的感谢函
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001751-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001751-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 209</span>
209:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">gxh_self</span>
210:     <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>] = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]
211:     <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:bankname</span>] = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:bankname</span>]
212:     <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:bank_account</span>] = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:bank_account</span>]
213:     <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:p</span>] = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:p</span>]
214:     <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:p_name</span>] = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:p_name</span>]
215:     <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:email</span>] = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:email</span>]
216:     <span class="ruby-ivar">@person</span> = <span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;used='Y' and t_extend_code=? and bankname=? and bank_account=? and p=? and p_name=? and email=?&quot;</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:bankname</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:bank_account</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:p</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:p_name</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:email</span>]],<span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct t_extend_code,p_typ,p,p_name,bank_account,bankname &quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id&quot;</span>)
217:     <span class="ruby-ivar">@extend_code</span>=<span class="ruby-constant">TbTExtendCode</span>.<span class="ruby-identifier">find_by_t_extend_code</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>])
218:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;gxh&quot;</span>
219:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001753" class="method-detail">
        <a name="M001753"></a>

        <div class="method-heading">
          <a href="#M001753" class="method-signature">
          <span class="method-name">invoice</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
生成代开发票清单
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001753-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001753-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 227</span>
227:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">invoice</span>
228:     <span class="ruby-ivar">@extend_code</span>=<span class="ruby-constant">TbTExtendCode</span>.<span class="ruby-identifier">find_by_t_extend_code</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>])
229:     <span class="ruby-ivar">@extend</span> = <span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;used='Y' and t_extend_code=? and tax_rmb&lt;&gt;0&quot;</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]],<span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot; should_rmb, t_extend_code,p_typ,p,p_name,id_card,tax_base_rmb &quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id&quot;</span>)
230:     <span class="ruby-identifier">send_data</span>(<span class="ruby-identifier">render</span>,<span class="ruby-identifier">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;application/msword&quot;</span>,<span class="ruby-identifier">:filename=</span><span class="ruby-operator">&gt;</span> <span class="ruby-constant">Iconv</span>.<span class="ruby-identifier">iconv</span>(<span class="ruby-value str">'gbk'</span>,<span class="ruby-value str">'utf-8'</span>,<span class="ruby-value str">&quot;代开发票清单.doc&quot;</span>).<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">:disposition</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'attachment'</span>)
231:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001756" class="method-detail">
        <a name="M001756"></a>

        <div class="method-heading">
          <a href="#M001756" class="method-signature">
          <span class="method-name">invoice_h</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
生成代开发票清单
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001756-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001756-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 246</span>
246:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">invoice_h</span>
247:     <span class="ruby-ivar">@extend_code</span>=<span class="ruby-constant">TbTExtendCode</span>.<span class="ruby-identifier">find_by_t_extend_code</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>])
248:     <span class="ruby-ivar">@extend</span> = <span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;used='Y' and typ&lt;&gt;'5' and t_extend_code=?  and tax_rmb&lt;&gt;0&quot;</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]],<span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot; should_rmb, t_extend_code,p_typ,p,p_name,id_card,tax_base_rmb &quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id&quot;</span>)
249:     <span class="ruby-identifier">send_data</span>(<span class="ruby-identifier">render</span>,<span class="ruby-identifier">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;application/msword&quot;</span>,<span class="ruby-identifier">:filename=</span><span class="ruby-operator">&gt;</span> <span class="ruby-constant">Iconv</span>.<span class="ruby-identifier">iconv</span>(<span class="ruby-value str">'gbk'</span>,<span class="ruby-value str">'utf-8'</span>,<span class="ruby-value str">&quot;代开发票清单.doc&quot;</span>).<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">:disposition</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'attachment'</span>)
250:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001737" class="method-detail">
        <a name="M001737"></a>

        <div class="method-heading">
          <a href="#M001737" class="method-signature">
          <span class="method-name">list_extend</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
某个报酬发放编码下的报酬发放列表
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001737-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001737-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 56</span>
56:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend</span>
57:     <span class="ruby-comment cmt">#@bank_typ={&quot;0001&quot;=&gt;&quot;本地&quot;,&quot;0002&quot;=&gt;&quot;外地&quot;}</span>
58:     <span class="ruby-ivar">@bank_typ</span> = {}
59:     <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8201'&quot;</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bbb</span><span class="ruby-operator">|</span>  <span class="ruby-ivar">@bank_typ</span>.<span class="ruby-identifier">merge!</span>({<span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_val</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_text</span>})}
60:     <span class="ruby-ivar">@typ2</span>={<span class="ruby-value str">&quot;1&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;报酬&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;奖励&quot;</span>,<span class="ruby-value str">&quot;3&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;扣减&quot;</span>,<span class="ruby-value str">&quot;4&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;办案其它报酬&quot;</span>,<span class="ruby-value str">&quot;5&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;出差补助合计&quot;</span>}
61:     <span class="ruby-ivar">@p_typ2</span>={<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;仲裁员&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;助理&quot;</span>,<span class="ruby-value str">&quot;0003&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;校核人员&quot;</span>,<span class="ruby-value str">&quot;0004&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;员工&quot;</span>}
62:     <span class="ruby-identifier">t_extend_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]
63:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;used='Y' and t_extend_code=?&quot;</span>
64:     <span class="ruby-ivar">@extend_pages</span>,<span class="ruby-ivar">@tb_extends</span> =<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_extends</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span>[<span class="ruby-identifier">c</span>,<span class="ruby-identifier">t_extend_code</span>],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id&quot;</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">10000000</span>)<span class="ruby-comment cmt">#case_code,p_typ,p_name,typ</span>
65:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001758" class="method-detail">
        <a name="M001758"></a>

        <div class="method-heading">
          <a href="#M001758" class="method-signature">
          <span class="method-name">list_extend_2</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
某个报酬发放编码下的报酬发放列表
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001758-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001758-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 286</span>
286:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend_2</span>
287:     <span class="ruby-comment cmt">#@bank_typ={&quot;0001&quot;=&gt;&quot;本地&quot;,&quot;0002&quot;=&gt;&quot;外地&quot;}</span>
288:     <span class="ruby-ivar">@bank_typ</span> = {}
289:     <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8201'&quot;</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bbb</span><span class="ruby-operator">|</span>  <span class="ruby-ivar">@bank_typ</span>.<span class="ruby-identifier">merge!</span>({<span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_val</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_text</span>})}
290:     <span class="ruby-ivar">@typ2</span>={<span class="ruby-value str">&quot;1&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;报酬&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;奖励&quot;</span>,<span class="ruby-value str">&quot;3&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;扣减&quot;</span>,<span class="ruby-value str">&quot;4&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;办案其它报酬&quot;</span>,<span class="ruby-value str">&quot;5&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;出差补助合计&quot;</span>}
291:     <span class="ruby-ivar">@p_typ2</span>={<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;仲裁员&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;助理&quot;</span>,<span class="ruby-value str">&quot;0003&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;校核人员&quot;</span>,<span class="ruby-value str">&quot;0004&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;员工&quot;</span>}
292:     <span class="ruby-identifier">t_extend_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]
293:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;used='Y' and t_extend_code=?&quot;</span>
294:     <span class="ruby-ivar">@extend_pages</span>,<span class="ruby-ivar">@tb_extends</span> =<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_self_extends</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span>[<span class="ruby-identifier">c</span>,<span class="ruby-identifier">t_extend_code</span>],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id&quot;</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">10000000</span>)<span class="ruby-comment cmt">#case_code,p_typ,p_name,typ</span>
295:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001740" class="method-detail">
        <a name="M001740"></a>

        <div class="method-heading">
          <a href="#M001740" class="method-signature">
          <span class="method-name">list_extend_a</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001740-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001740-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 81</span>
81:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend_a</span>
82:     <span class="ruby-comment cmt">#@bank_typ={&quot;0001&quot;=&gt;&quot;本地&quot;,&quot;0002&quot;=&gt;&quot;外地&quot;}</span>
83:     <span class="ruby-ivar">@bank_typ</span> = {}
84:     <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8201'&quot;</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bbb</span><span class="ruby-operator">|</span>  <span class="ruby-ivar">@bank_typ</span>.<span class="ruby-identifier">merge!</span>({<span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_val</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_text</span>})}
85:     <span class="ruby-ivar">@typ2</span>={<span class="ruby-value str">&quot;1&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;报酬&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;奖励&quot;</span>,<span class="ruby-value str">&quot;3&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;扣减&quot;</span>,<span class="ruby-value str">&quot;4&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;办案其它报酬&quot;</span>,<span class="ruby-value str">&quot;5&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;出差补助合计&quot;</span>}
86:     <span class="ruby-ivar">@p_typ2</span>={<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;仲裁员&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;助理&quot;</span>,<span class="ruby-value str">&quot;0003&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;校核人员&quot;</span>,<span class="ruby-value str">&quot;0004&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;员工&quot;</span>}
87:     <span class="ruby-identifier">t_extend_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]
88:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;bank_typ='0001' and used='Y' and t_extend_code=?&quot;</span>
89:     <span class="ruby-ivar">@extend_pages</span>,<span class="ruby-ivar">@tb_extends</span> =<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_extends</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span>[<span class="ruby-identifier">c</span>,<span class="ruby-identifier">t_extend_code</span>],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id&quot;</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">10000000</span>)<span class="ruby-comment cmt">#case_code,p_typ,p_name,typ</span>
90:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001741" class="method-detail">
        <a name="M001741"></a>

        <div class="method-heading">
          <a href="#M001741" class="method-signature">
          <span class="method-name">list_extend_b</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001741-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001741-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 92</span>
 92:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend_b</span>
 93:     <span class="ruby-comment cmt">#@bank_typ={&quot;0001&quot;=&gt;&quot;本地&quot;,&quot;0002&quot;=&gt;&quot;外地&quot;}</span>
 94:     <span class="ruby-ivar">@bank_typ</span> = {}
 95:     <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8201'&quot;</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bbb</span><span class="ruby-operator">|</span>  <span class="ruby-ivar">@bank_typ</span>.<span class="ruby-identifier">merge!</span>({<span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_val</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_text</span>})}
 96:     <span class="ruby-ivar">@typ2</span>={<span class="ruby-value str">&quot;1&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;报酬&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;奖励&quot;</span>,<span class="ruby-value str">&quot;3&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;扣减&quot;</span>,<span class="ruby-value str">&quot;4&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;办案其它报酬&quot;</span>,<span class="ruby-value str">&quot;5&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;出差补助合计&quot;</span>}
 97:     <span class="ruby-ivar">@p_typ2</span>={<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;仲裁员&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;助理&quot;</span>,<span class="ruby-value str">&quot;0003&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;校核人员&quot;</span>,<span class="ruby-value str">&quot;0004&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;员工&quot;</span>}
 98:     <span class="ruby-identifier">t_extend_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]
 99:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;bank_typ&lt;&gt;'0001' and used='Y' and t_extend_code=?&quot;</span>
100:     <span class="ruby-ivar">@extend_pages</span>,<span class="ruby-ivar">@tb_extends</span> =<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_extends</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span>[<span class="ruby-identifier">c</span>,<span class="ruby-identifier">t_extend_code</span>],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id&quot;</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">10000000</span>)<span class="ruby-comment cmt">#case_code,p_typ,p_name,typ</span>
101:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001742" class="method-detail">
        <a name="M001742"></a>

        <div class="method-heading">
          <a href="#M001742" class="method-signature">
          <span class="method-name">list_extend_c</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
导出银行 excel 表格
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001742-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001742-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 104</span>
104:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend_c</span>
105:     <span class="ruby-identifier">t_extend_code</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]
106:     <span class="ruby-ivar">@bank_type</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:bank_type</span>]
107:     <span class="ruby-ivar">@rmb</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:rmb</span>]
108:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@bank_type</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;0001&quot;</span>
109:       <span class="ruby-identifier">c</span> = <span class="ruby-value str">&quot; bank_typ='0001' and used='Y' and t_extend_code=? &quot;</span>
110:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot; and extend_rmb &gt; #{@rmb}&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@rmb</span>.<span class="ruby-identifier">blank?</span>
111:     <span class="ruby-keyword kw">else</span>
112:       <span class="ruby-identifier">c</span> = <span class="ruby-value str">&quot;bank_typ&lt;&gt;'0001' and used='Y' and t_extend_code=?&quot;</span>
113:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot; and extend_rmb &gt; #{@rmb}&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@rmb</span>.<span class="ruby-identifier">blank?</span>
114:     <span class="ruby-keyword kw">end</span>
115: 
116:     <span class="ruby-ivar">@tb_extends</span> =<span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">c</span>,<span class="ruby-identifier">t_extend_code</span>], <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;id&quot;</span>)<span class="ruby-comment cmt">#case_code,p_typ,p_name,typ</span>
117:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001735" class="method-detail">
        <a name="M001735"></a>

        <div class="method-heading">
          <a href="#M001735" class="method-signature">
          <span class="method-name">list_extend_code</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
显示所有的报酬发放的列表 外单位仲裁员
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001735-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001735-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 6</span>
 6:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend_code</span>
 7:     <span class="ruby-ivar">@last_code</span> = <span class="ruby-constant">SysArg</span>.<span class="ruby-identifier">find_by_code</span>(<span class="ruby-value str">'0006'</span>).<span class="ruby-identifier">val</span>
 8:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_extend_code&quot;</span>
 9:     <span class="ruby-ivar">@hant_search_1</span>=[[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'t_extend_code'</span>,<span class="ruby-value str">'发放编号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'remark'</span>,<span class="ruby-value str">'备注'</span>,<span class="ruby-value str">'text'</span>,[]]]
10:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
11:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
12:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;id desc&quot;</span>
13:     <span class="ruby-keyword kw">end</span>
14:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
15:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
16:       <span class="ruby-ivar">@page_lines</span>= <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
17:     <span class="ruby-keyword kw">end</span>
18:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
19:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
20:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
21:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
22:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
23:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
24:     <span class="ruby-keyword kw">end</span>
25:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
26:     <span class="ruby-keyword kw">else</span>
27:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
28:     <span class="ruby-keyword kw">end</span>
29:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
30:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;used='Y' &quot;</span>
31:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
32:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
33:     <span class="ruby-keyword kw">end</span>
34:     <span class="ruby-ivar">@extend_code_pages</span>,<span class="ruby-ivar">@extend_codes</span> =<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_t_extend_codes</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
35:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001757" class="method-detail">
        <a name="M001757"></a>

        <div class="method-heading">
          <a href="#M001757" class="method-signature">
          <span class="method-name">list_extend_code_2</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
显示所有的报酬发放的列表 本单位仲裁员及员工
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001757-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001757-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 253</span>
253:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend_code_2</span>
254:     <span class="ruby-ivar">@last_code</span> = <span class="ruby-constant">SysArg</span>.<span class="ruby-identifier">find_by_code</span>(<span class="ruby-value str">'0006_1'</span>).<span class="ruby-identifier">val</span>
255:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_extend_code_2&quot;</span>
256:     <span class="ruby-ivar">@hant_search_1</span>=[[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'t_extend_code'</span>,<span class="ruby-value str">'发放编号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'remark'</span>,<span class="ruby-value str">'备注'</span>,<span class="ruby-value str">'text'</span>,[]]]
257:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
258:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
259:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;id desc&quot;</span>
260:     <span class="ruby-keyword kw">end</span>
261:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
262:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
263:       <span class="ruby-ivar">@page_lines</span>= <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
264:     <span class="ruby-keyword kw">end</span>
265:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
266:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
267:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
268:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
269:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
270:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
271:     <span class="ruby-keyword kw">end</span>
272:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
273:     <span class="ruby-keyword kw">else</span>
274:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
275:     <span class="ruby-keyword kw">end</span>
276:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
277:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;used='Y' &quot;</span>
278:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
279:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
280:     <span class="ruby-keyword kw">end</span>
281:     <span class="ruby-ivar">@extend_code_pages</span>,<span class="ruby-ivar">@extend_codes</span> =<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_self_t_extend_codes</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
282:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001743" class="method-detail">
        <a name="M001743"></a>

        <div class="method-heading">
          <a href="#M001743" class="method-signature">
          <span class="method-name">list_extend_d</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001743-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001743-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 119</span>
119:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend_d</span>
120:     <span class="ruby-comment cmt">#@bank_typ={&quot;0001&quot;=&gt;&quot;本地&quot;,&quot;0002&quot;=&gt;&quot;外地&quot;}</span>
121:     <span class="ruby-ivar">@bank_typ</span> = {}
122:     <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8201'&quot;</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bbb</span><span class="ruby-operator">|</span>  <span class="ruby-ivar">@bank_typ</span>.<span class="ruby-identifier">merge!</span>({<span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_val</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_text</span>})}
123:     <span class="ruby-ivar">@typ2</span>={<span class="ruby-value str">&quot;1&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;报酬&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;奖励&quot;</span>,<span class="ruby-value str">&quot;3&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;扣减&quot;</span>,<span class="ruby-value str">&quot;4&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;办案其它报酬&quot;</span>,<span class="ruby-value str">&quot;5&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;出差补助合计&quot;</span>}
124:     <span class="ruby-ivar">@p_typ2</span>={<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;仲裁员&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;助理&quot;</span>,<span class="ruby-value str">&quot;0003&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;校核人员&quot;</span>,<span class="ruby-value str">&quot;0004&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;员工&quot;</span>}
125:     <span class="ruby-identifier">t_extend_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]
126:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;bank_typ='0002' and used='Y' and t_extend_code=?&quot;</span>
127:     <span class="ruby-ivar">@tb_extends</span> =<span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find_by_sql</span>([<span class="ruby-value str">&quot;select bankname,bank_account,p_name,extend_rmb from tb_extends where  bank_typ='0002' and used='Y' and t_extend_code=? order by  id&quot;</span>,<span class="ruby-identifier">t_extend_code</span>])<span class="ruby-comment cmt">#bankname,bank_account,p_name,p</span>
128:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001744" class="method-detail">
        <a name="M001744"></a>

        <div class="method-heading">
          <a href="#M001744" class="method-signature">
          <span class="method-name">list_extend_e</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001744-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001744-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 130</span>
130:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend_e</span>
131:     <span class="ruby-comment cmt">#@bank_typ={&quot;0001&quot;=&gt;&quot;本地&quot;,&quot;0002&quot;=&gt;&quot;外地&quot;}</span>
132:     <span class="ruby-ivar">@bank_typ</span> = {}
133:     <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8201'&quot;</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bbb</span><span class="ruby-operator">|</span>  <span class="ruby-ivar">@bank_typ</span>.<span class="ruby-identifier">merge!</span>({<span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_val</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_text</span>})}
134:     <span class="ruby-ivar">@typ2</span>={<span class="ruby-value str">&quot;1&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;报酬&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;奖励&quot;</span>,<span class="ruby-value str">&quot;3&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;扣减&quot;</span>,<span class="ruby-value str">&quot;4&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;办案其它报酬&quot;</span>,<span class="ruby-value str">&quot;5&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;出差补助合计&quot;</span>}
135:     <span class="ruby-ivar">@p_typ2</span>={<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;仲裁员&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;助理&quot;</span>,<span class="ruby-value str">&quot;0003&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;校核人员&quot;</span>,<span class="ruby-value str">&quot;0004&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;员工&quot;</span>}
136:     <span class="ruby-identifier">t_extend_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]
137:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;used='Y' and t_extend_code=?&quot;</span>
138:     <span class="ruby-ivar">@extend_code</span>=<span class="ruby-constant">TbTExtendCode</span>.<span class="ruby-identifier">find_by_t_extend_code</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>])
139:     <span class="ruby-ivar">@tb_extends</span> =<span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find_by_sql</span>([<span class="ruby-value str">&quot;select distinct t_extend_code,bankname,bank_account,p,p_name,email from tb_extends where  used='Y' and t_extend_code=? order by  id&quot;</span>,<span class="ruby-identifier">t_extend_code</span>])<span class="ruby-comment cmt">#p_name,p,bankname,bank_account</span>
140:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001745" class="method-detail">
        <a name="M001745"></a>

        <div class="method-heading">
          <a href="#M001745" class="method-signature">
          <span class="method-name">list_extend_f</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001745-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001745-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 142</span>
142:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend_f</span>
143:     <span class="ruby-comment cmt">#@bank_typ={&quot;0001&quot;=&gt;&quot;本地&quot;,&quot;0002&quot;=&gt;&quot;外地&quot;}</span>
144:     <span class="ruby-ivar">@bank_typ</span> = {}
145:     <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8201'&quot;</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bbb</span><span class="ruby-operator">|</span>  <span class="ruby-ivar">@bank_typ</span>.<span class="ruby-identifier">merge!</span>({<span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_val</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_text</span>})}
146:     <span class="ruby-ivar">@typ2</span>={<span class="ruby-value str">&quot;1&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;报酬&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;奖励&quot;</span>,<span class="ruby-value str">&quot;3&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;扣减&quot;</span>,<span class="ruby-value str">&quot;4&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;办案其它报酬&quot;</span>,<span class="ruby-value str">&quot;5&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;出差补助合计&quot;</span>}
147:     <span class="ruby-ivar">@p_typ2</span>={<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;仲裁员&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;助理&quot;</span>,<span class="ruby-value str">&quot;0003&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;校核人员&quot;</span>,<span class="ruby-value str">&quot;0004&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;员工&quot;</span>}
148:     <span class="ruby-identifier">t_extend_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]
149:     <span class="ruby-comment cmt">#c=&quot;used='Y' and t_extend_code=?&quot;</span>
150:     <span class="ruby-ivar">@extend_code</span>=<span class="ruby-constant">TbTExtendCode</span>.<span class="ruby-identifier">find_by_t_extend_code</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>])
151:     <span class="ruby-ivar">@tb_extends</span> =<span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find_by_sql</span>([<span class="ruby-value str">&quot;select distinct bankname,bank_account,p,p_name,email from tb_extends where  used='Y' and (bank_typ='0003' or bank_typ='0004') and t_extend_code=? order by  id&quot;</span>,<span class="ruby-identifier">t_extend_code</span>])<span class="ruby-comment cmt">#p_name,p,bankname,bank_account</span>
152:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001746" class="method-detail">
        <a name="M001746"></a>

        <div class="method-heading">
          <a href="#M001746" class="method-signature">
          <span class="method-name">list_extend_g</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001746-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001746-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 154</span>
154:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend_g</span>
155:     <span class="ruby-comment cmt">#@bank_typ={&quot;0001&quot;=&gt;&quot;本地&quot;,&quot;0002&quot;=&gt;&quot;外地&quot;}</span>
156:     <span class="ruby-ivar">@bank_typ</span> = {}
157:     <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8201'&quot;</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bbb</span><span class="ruby-operator">|</span>  <span class="ruby-ivar">@bank_typ</span>.<span class="ruby-identifier">merge!</span>({<span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_val</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_text</span>})}
158:     <span class="ruby-ivar">@typ2</span>={<span class="ruby-value str">&quot;1&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;报酬&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;奖励&quot;</span>,<span class="ruby-value str">&quot;3&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;扣减&quot;</span>,<span class="ruby-value str">&quot;4&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;办案其它报酬&quot;</span>,<span class="ruby-value str">&quot;5&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;出差补助合计&quot;</span>}
159:     <span class="ruby-ivar">@p_typ2</span>={<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;仲裁员&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;助理&quot;</span>,<span class="ruby-value str">&quot;0003&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;校核人员&quot;</span>,<span class="ruby-value str">&quot;0004&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;员工&quot;</span>}
160:     <span class="ruby-identifier">t_extend_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]
161:     <span class="ruby-comment cmt">#c=&quot;used='Y' and t_extend_code=?&quot;</span>
162:     <span class="ruby-ivar">@extend_code</span>=<span class="ruby-constant">TbTExtendCode</span>.<span class="ruby-identifier">find_by_t_extend_code</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>])
163:     <span class="ruby-ivar">@tb_extends</span> =<span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find_by_sql</span>([<span class="ruby-value str">&quot;select distinct t_extend_code,bankname,bank_account,p,p_name,email from tb_extends where  used='Y' and bank_typ='0005' and t_extend_code=?  order by  id&quot;</span>,<span class="ruby-identifier">t_extend_code</span>])<span class="ruby-comment cmt">#p_name,p,bankname,bank_account</span>
164:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001747" class="method-detail">
        <a name="M001747"></a>

        <div class="method-heading">
          <a href="#M001747" class="method-signature">
          <span class="method-name">list_extend_h</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001747-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001747-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 166</span>
166:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend_h</span>
167:     <span class="ruby-comment cmt">#@bank_typ={&quot;0001&quot;=&gt;&quot;本地&quot;,&quot;0002&quot;=&gt;&quot;外地&quot;}</span>
168:     <span class="ruby-ivar">@bank_typ</span> = {}
169:     <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8201'&quot;</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bbb</span><span class="ruby-operator">|</span>  <span class="ruby-ivar">@bank_typ</span>.<span class="ruby-identifier">merge!</span>({<span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_val</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_text</span>})}
170:     <span class="ruby-ivar">@typ2</span>={<span class="ruby-value str">&quot;1&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;报酬&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;奖励&quot;</span>,<span class="ruby-value str">&quot;3&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;扣减&quot;</span>,<span class="ruby-value str">&quot;4&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;办案其它报酬&quot;</span>,<span class="ruby-value str">&quot;5&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;出差补助合计&quot;</span>}
171:     <span class="ruby-ivar">@p_typ2</span>={<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;仲裁员&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;助理&quot;</span>,<span class="ruby-value str">&quot;0003&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;校核人员&quot;</span>,<span class="ruby-value str">&quot;0004&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;员工&quot;</span>}
172:     <span class="ruby-identifier">t_extend_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]
173:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;used='Y' and t_extend_code=?&quot;</span>
174:     <span class="ruby-ivar">@extend_code</span>=<span class="ruby-constant">TbTExtendCode</span>.<span class="ruby-identifier">find_by_t_extend_code</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>])
175:     <span class="ruby-ivar">@tb_extends</span> =<span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find_by_sql</span>([<span class="ruby-value str">&quot;select distinct t_extend_code,bankname,bank_account,p,p_name,email  from tb_extends where typ&lt;&gt;'5' and  used='Y' and t_extend_code=? order by  id&quot;</span>,<span class="ruby-identifier">t_extend_code</span>])<span class="ruby-comment cmt">#p_name,p,bankname,bank_account</span>
176:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001748" class="method-detail">
        <a name="M001748"></a>

        <div class="method-heading">
          <a href="#M001748" class="method-signature">
          <span class="method-name">list_extend_k</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001748-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001748-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 178</span>
178:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend_k</span>
179:     <span class="ruby-comment cmt">#@bank_typ={&quot;0001&quot;=&gt;&quot;本地&quot;,&quot;0002&quot;=&gt;&quot;外地&quot;}</span>
180:     <span class="ruby-ivar">@bank_typ</span> = {}
181:     <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8201'&quot;</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bbb</span><span class="ruby-operator">|</span>  <span class="ruby-ivar">@bank_typ</span>.<span class="ruby-identifier">merge!</span>({<span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_val</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">bbb</span>.<span class="ruby-identifier">data_text</span>})}
182:     <span class="ruby-ivar">@typ2</span>={<span class="ruby-value str">&quot;1&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;报酬&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;奖励&quot;</span>,<span class="ruby-value str">&quot;3&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;扣减&quot;</span>,<span class="ruby-value str">&quot;4&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;办案其它报酬&quot;</span>,<span class="ruby-value str">&quot;5&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;出差补助合计&quot;</span>}
183:     <span class="ruby-ivar">@p_typ2</span>={<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;仲裁员&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;助理&quot;</span>,<span class="ruby-value str">&quot;0003&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;校核人员&quot;</span>,<span class="ruby-value str">&quot;0004&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;员工&quot;</span>}
184:     <span class="ruby-identifier">t_extend_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]
185:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;used='Y' and t_extend_code=?&quot;</span>
186:     <span class="ruby-ivar">@extend_code</span>=<span class="ruby-constant">TbTExtendCode</span>.<span class="ruby-identifier">find_by_t_extend_code</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>])
187:     <span class="ruby-ivar">@p_extends</span> =<span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find_by_sql</span>([<span class="ruby-value str">&quot;select distinct t_extend_code,p,p_name from tb_extends where typ&lt;&gt;'5' and  used='Y' and t_extend_code=? order by  id,recevice_code&quot;</span>,<span class="ruby-identifier">t_extend_code</span>])<span class="ruby-comment cmt">#p_name,p,bankname,bank_account</span>
188:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M001749" class="method-detail">
        <a name="M001749"></a>

        <div class="method-heading">
          <a href="#M001749" class="method-signature">
          <span class="method-name">list_extend_tax</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M001749-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M001749-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/show_extend_controller.rb, line 190</span>
190:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_extend_tax</span>
191:     <span class="ruby-ivar">@bank_typ</span>={<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;本地&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;外地&quot;</span>}
192:     <span class="ruby-ivar">@typ2</span>={<span class="ruby-value str">&quot;1&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;报酬&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;奖励&quot;</span>,<span class="ruby-value str">&quot;3&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;扣减&quot;</span>,<span class="ruby-value str">&quot;4&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;办案其它报酬&quot;</span>,<span class="ruby-value str">&quot;5&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;出差补助合计&quot;</span>}
193:     <span class="ruby-ivar">@p_typ2</span>={<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;仲裁员&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;助理&quot;</span>,<span class="ruby-value str">&quot;0003&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;校核人员&quot;</span>,<span class="ruby-value str">&quot;0004&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;员工&quot;</span>}
194:     <span class="ruby-identifier">t_extend_code</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:t_extend_code</span>]
195:     <span class="ruby-identifier">c</span> = <span class="ruby-value str">&quot;used='Y' and t_extend_code=?&quot;</span>
196:     <span class="ruby-ivar">@tb_extends</span> = <span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span>[<span class="ruby-identifier">c</span>,<span class="ruby-identifier">t_extend_code</span>],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id&quot;</span>)<span class="ruby-comment cmt">#case_code,p_typ,p_name,typ</span>
197:     <span class="ruby-identifier">tim</span> = <span class="ruby-ivar">@tb_extends</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">t_extend_t</span>
198:     <span class="ruby-identifier">extend_t</span> = <span class="ruby-identifier">tim</span>.<span class="ruby-identifier">year</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;年&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">tim</span>.<span class="ruby-identifier">month</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;月&quot;</span>
199:     <span class="ruby-ivar">@tablename</span> = <span class="ruby-node">&quot;#{extend_t}（发放批次:#{t_extend_code}）扣税总表&quot;</span>
200:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>