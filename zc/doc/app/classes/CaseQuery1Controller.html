<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: CaseQuery1Controller</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">CaseQuery1Controller</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/controllers/case_query1_controller_rb.html">
                app/controllers/case_query1_controller.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="ApplicationController.html">
                ApplicationController
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M002389">case_now_clerk</a>&nbsp;&nbsp;
      <a href="#M002399">case_now_clerk2</a>&nbsp;&nbsp;
      <a href="#M002400">case_now_clerk2_total</a>&nbsp;&nbsp;
      <a href="#M002410">case_now_total</a>&nbsp;&nbsp;
      <a href="#M002390">every_case_clerk</a>&nbsp;&nbsp;
      <a href="#M002413">expert_meeting_list</a>&nbsp;&nbsp;
      <a href="#M002412">expert_meeting_query</a>&nbsp;&nbsp;
      <a href="#M002391">list_1</a>&nbsp;&nbsp;
      <a href="#M002397">list_10</a>&nbsp;&nbsp;
      <a href="#M002409">list_101</a>&nbsp;&nbsp;
      <a href="#M002398">list_12</a>&nbsp;&nbsp;
      <a href="#M002392">list_2</a>&nbsp;&nbsp;
      <a href="#M002393">list_3</a>&nbsp;&nbsp;
      <a href="#M002402">list_31</a>&nbsp;&nbsp;
      <a href="#M002403">list_32</a>&nbsp;&nbsp;
      <a href="#M002404">list_33</a>&nbsp;&nbsp;
      <a href="#M002405">list_34</a>&nbsp;&nbsp;
      <a href="#M002406">list_35</a>&nbsp;&nbsp;
      <a href="#M002407">list_38</a>&nbsp;&nbsp;
      <a href="#M002408">list_38_remote</a>&nbsp;&nbsp;
      <a href="#M002394">list_4</a>&nbsp;&nbsp;
      <a href="#M002395">list_5</a>&nbsp;&nbsp;
      <a href="#M002414">list_50</a>&nbsp;&nbsp;
      <a href="#M002396">list_8</a>&nbsp;&nbsp;
      <a href="#M002401">list_every</a>&nbsp;&nbsp;
      <a href="#M002411">list_everyone</a>&nbsp;&nbsp;
      <a href="#M002415">marke_2</a>&nbsp;&nbsp;
      <a href="#M002416">remun_list</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M002389" class="method-detail">
        <a name="M002389"></a>

        <div class="method-heading">
          <a href="#M002389" class="method-signature">
          <span class="method-name">case_now_clerk</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
助理在办案件信息列表
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002389-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002389-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 5</span>
 5:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">case_now_clerk</span>
 6:     <span class="ruby-identifier">arr_date</span> = <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;-&quot;</span>)
 7:     <span class="ruby-ivar">@arr_date1</span> = <span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">n_to_c</span>(<span class="ruby-identifier">arr_date</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">to_i</span>)
 8:     <span class="ruby-ivar">@agent_typ</span>={<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;申请方&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;被申请方&quot;</span>}
 9:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>}
10:     <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;tb_cases_general_code&quot;</span>
11:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-value">1000</span>
12:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_clerk='#{session[:user_code]}' and tb_cases_state&gt;=4 and tb_cases_state&lt;100 and tb_cases_state&lt;&gt;2 and tb_cases_state&lt;&gt;3 and tb_cases_end_code = '' &quot;</span>
13:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code,tb_cases_end_code,tb_cases_clerk,tb_cases_agent  from v_case_query1_list1s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
14:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002399" class="method-detail">
        <a name="M002399"></a>

        <div class="method-heading">
          <a href="#M002399" class="method-signature">
          <span class="method-name">case_now_clerk2</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
处长使用 处长所使用的查询
################################################################
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002399-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002399-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 423</span>
423:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">case_now_clerk2</span>
424:     <span class="ruby-ivar">@agent_typ</span>={<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;申请方&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;被申请方&quot;</span>}
425:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>}
426:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;case_now_clerk2&quot;</span>
427:     <span class="ruby-ivar">@hant_search_1</span>=[
428:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'总案号'</span>,<span class="ruby-value str">'text'</span>,[]],
429:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],
430:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_clerk'</span>,<span class="ruby-value str">'办案助理'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">UserDuty</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select users.code as code,users.name as name from users,user_duties where users.states='Y' and users.used='Y' and  users.code=user_duties.user_code and user_duties.duty_code='0003' order by users.ord&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">code</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">name</span>]}.<span class="ruby-identifier">insert</span>(<span class="ruby-value">0</span>,[<span class="ruby-value str">&quot;&quot;</span>,<span class="ruby-value str">&quot;全部&quot;</span>])],
431:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_aribitprotprog_num'</span>,<span class="ruby-value str">'仲裁程序'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0003' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
432:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'tb_cases_state'</span>,<span class="ruby-value str">'案件状态'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">4</span>,<span class="ruby-value str">&quot;立案&quot;</span>],[<span class="ruby-value">5</span>,<span class="ruby-value str">&quot;组庭&quot;</span>],[<span class="ruby-value">6</span>,<span class="ruby-value str">&quot;开庭&quot;</span>]]],
433:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_terms_drafting_party'</span>,<span class="ruby-value str">'仲裁条款起草方'</span>,<span class="ruby-value str">'text'</span>,[]],
434:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'tb_parties_partytype'</span>,<span class="ruby-value str">'当事人类型'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">&quot;申请人&quot;</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">&quot;被申请人&quot;</span>]]],
435:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'当事人名称'</span>,<span class="ruby-value str">'text'</span>,[]],
436:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_casetype_num'</span>,<span class="ruby-value str">'案件类型大分类'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0002' and state='Y' and used='Y' and data_parent=''&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
437:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_casetype_num2'</span>,<span class="ruby-value str">'案件类型小分类'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0002' and state='Y' and used='Y' and data_parent&lt;&gt;''&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
438:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_cases_arbitprot,\\\'\\\')'</span>,<span class="ruby-value str">'仲裁协议内容'</span>,<span class="ruby-value str">'text'</span>,[]],
439:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(tb_cases_amount,0)'</span>,<span class="ruby-value str">'争议金额'</span>,<span class="ruby-value str">'text'</span>,[]],
440:     ]
441:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'tb_cases_clerk'</span>,<span class="ruby-value str">'tb_cases_terms_drafting_party'</span>,
442:       <span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_cases_arbitprot,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_cases_amount,0)'</span>]
443:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
444:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
445:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
446:     <span class="ruby-keyword kw">end</span>
447:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
448:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
449:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
450:     <span class="ruby-keyword kw">end</span>
451:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
452:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
453:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
454:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
455:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
456:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
457:     <span class="ruby-keyword kw">end</span>
458:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
459:     <span class="ruby-keyword kw">else</span>
460:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
461:     <span class="ruby-keyword kw">end</span>
462: 
463:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;tb_cases_state&gt;=4 and tb_cases_state&lt;100  and tb_cases_caseendbook_id_first is null&quot;</span>
464:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
465:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
466:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
467:     <span class="ruby-keyword kw">end</span>
468:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk from v_case_query1_list1s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
469:     <span class="ruby-ivar">@total_m</span>=<span class="ruby-constant">VCaseQuery1List1</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:tb_cases_amount</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c</span>)
470:     <span class="ruby-ivar">@case_l</span>=<span class="ruby-constant">VCaseQuery1List1</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases_recevice_code from v_case_query1_list1s where #{c}&quot;</span>)
471:     <span class="ruby-ivar">@case_ll</span>=<span class="ruby-ivar">@case_l</span>.<span class="ruby-identifier">length</span>
472:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002400" class="method-detail">
        <a name="M002400"></a>

        <div class="method-heading">
          <a href="#M002400" class="method-signature">
          <span class="method-name">case_now_clerk2_total</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;
↓↓↓助理在办案件统计↓↓↓
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;
统计表
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002400-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002400-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 476</span>
476:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">case_now_clerk2_total</span>
477:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
478:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
479:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;users.name asc&quot;</span>
480:     <span class="ruby-keyword kw">end</span>
481:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
482:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@order</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
483:       <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select tb_cases.clerk as clerk_code,users.name as clerk_name, count(tb_cases.clerk) as n from tb_cases,users where tb_cases.clerk=users.code and  tb_cases.used='Y' and tb_cases.state&gt;=4 and tb_cases.state&lt;100 and end_code='' group by tb_cases.clerk order by #{@order}&quot;</span>)
484:       <span class="ruby-ivar">@case2</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select users.name as clerk_name, (select count(1) from tb_cases  where tb_cases.clerk=users.code  and  tb_cases.used='Y' and tb_cases.state&gt;=4 and tb_cases.state&lt;100 and tb_cases.end_code='' and tb_cases.aribitprog_num in ('0001','0003','0005','0007') and  tb_cases.clerk=users.code) as n1 ,  (select count(1) from tb_cases  where tb_cases.clerk=users.code  and  tb_cases.used='Y' and tb_cases.state&gt;=4 and tb_cases.state&lt;100 and tb_cases.end_code='' and tb_cases.aribitprog_num in ('0002','0004','0006','0008') and  tb_cases.clerk=users.code) as n2 from users where users.code in (select distinct tb_cases.clerk from tb_cases,users where tb_cases.clerk=users.code and  tb_cases.used='Y' and tb_cases.state&gt;=4 and tb_cases.state&lt;100 and tb_cases.end_code='')  order by #{@order}&quot;</span>)
485:       <span class="ruby-comment cmt">#user_duties.duty_code='0003' and users.code = user_duties.user_code</span>
486:     <span class="ruby-keyword kw">end</span>
487:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002410" class="method-detail">
        <a name="M002410"></a>

        <div class="method-heading">
          <a href="#M002410" class="method-signature">
          <span class="method-name">case_now_total</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
咨询、立案阶段的统计
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002410-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002410-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 893</span>
893:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">case_now_total</span>
894:     <span class="ruby-ivar">@date1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date1</span>]
895:     <span class="ruby-ivar">@date2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date2</span>]
896:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@date1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
897:       <span class="ruby-ivar">@date1</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
898:     <span class="ruby-keyword kw">end</span>
899:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@date2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
900:       <span class="ruby-ivar">@date2</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
901:     <span class="ruby-keyword kw">end</span>
902:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
903:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
904:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;users.name asc&quot;</span>
905:     <span class="ruby-keyword kw">end</span>
906:     <span class="ruby-identifier">c</span> = <span class="ruby-node">&quot;(tb_cases.state != -2) and tb_cases.clerk_2=users.code and  tb_cases.used='Y' and users.used='Y' and  tb_cases.receivedate&gt;='#{@date1}' and tb_cases.receivedate&lt;='#{@date2}'&quot;</span>
907:     <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select users.code as users_code,users.name as clerk_name,count(users.code) as num from tb_cases,users where #{c} group by users.code order by #{@order}&quot;</span>)
908:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002390" class="method-detail">
        <a name="M002390"></a>

        <div class="method-heading">
          <a href="#M002390" class="method-signature">
          <span class="method-name">every_case_clerk</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002390-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002390-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 16</span>
16:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">every_case_clerk</span>
17:     <span class="ruby-identifier">arr_date</span> = <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;-&quot;</span>)
18:     <span class="ruby-ivar">@arr_date1</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">n_to_c</span>(<span class="ruby-identifier">arr_date</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">to_i</span>)
19:     <span class="ruby-ivar">@agent_typ</span>={<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;申请方&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;被申请方&quot;</span>}
20:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>}
21:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
22:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
23:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;tb_cases_general_code&quot;</span>
24:     <span class="ruby-keyword kw">end</span>
25:     <span class="ruby-ivar">@page_lines</span> = <span class="ruby-value">1000</span>
26:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_clerk='#{params[:user_code]}' and tb_cases_state&gt;=4 and tb_cases_state&lt;100 and tb_cases_caseendbook_id_first is null&quot;</span>
27:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code,tb_cases_end_code,tb_cases_clerk,tb_cases_agent  from v_case_query1_list1s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
28:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002413" class="method-detail">
        <a name="M002413"></a>

        <div class="method-heading">
          <a href="#M002413" class="method-signature">
          <span class="method-name">expert_meeting_list</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002413-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002413-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 976</span>
976:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expert_meeting_list</span>
977:     <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_recevice_code</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:recevice_code</span>])
978:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;recevice_code=? and used='Y' and id=?&quot;</span>
979:     <span class="ruby-ivar">@expert_meetings</span> =<span class="ruby-constant">ExpertMeeting</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span>[<span class="ruby-identifier">c</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:recevice_code</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:e_id</span>]])
980:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002412" class="method-detail">
        <a name="M002412"></a>

        <div class="method-heading">
          <a href="#M002412" class="method-signature">
          <span class="method-name">expert_meeting_query</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002412-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002412-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 927</span>
927:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expert_meeting_query</span>
928:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
929:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;expert_meeting_query&quot;</span>
930:     <span class="ruby-ivar">@hant_search_1</span>=[
931:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'c.case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],
932:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'c.end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],
933:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'c.nowdate'</span>,<span class="ruby-value str">'立案日期'</span>,<span class="ruby-value str">'text'</span>,[]],
934:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'c.aribitprotprog_num'</span>,<span class="ruby-value str">'仲裁协议类型'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0003' and  state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
935:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'c.state'</span>,<span class="ruby-value str">'案件状态'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">&quot;咨询&quot;</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">&quot;历史&quot;</span>],[<span class="ruby-value">3</span>,<span class="ruby-value str">&quot;不受理&quot;</span>],[<span class="ruby-value">4</span>,<span class="ruby-value str">&quot;立案&quot;</span>],[<span class="ruby-value">5</span>,<span class="ruby-value str">&quot;组庭&quot;</span>],[<span class="ruby-value">6</span>,<span class="ruby-value str">&quot;开庭&quot;</span>],[<span class="ruby-value">-1</span>,<span class="ruby-value str">&quot;重审&quot;</span>],[<span class="ruby-value">100</span>,<span class="ruby-value str">&quot;终审&quot;</span>],[<span class="ruby-value">150</span>,<span class="ruby-value str">&quot;归档申请&quot;</span>],[<span class="ruby-value">200</span>,<span class="ruby-value str">&quot;已归档&quot;</span>]]],
936:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'c.drafting_party'</span>,<span class="ruby-value str">'仲裁条款起草方'</span>,<span class="ruby-value str">'text'</span>,[]],
937:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'c.casetype_num'</span>,<span class="ruby-value str">'案件争议金额大分类'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0002' and state='Y' and used='Y' and data_parent=''&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
938:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'c.casetype_num2'</span>,<span class="ruby-value str">'案件争议金额小分类'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0002' and state='Y' and used='Y' and data_parent&lt;&gt;''&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
939:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(c.arbitprot,\\\'\\\')'</span>,<span class="ruby-value str">'仲裁协议内容'</span>,<span class="ruby-value str">'text'</span>,[]],
940:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(c.amount,0)'</span>,<span class="ruby-value str">'总争议金额'</span>,<span class="ruby-value str">'text'</span>,[]],
941:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(c.amount_1,0)'</span>,<span class="ruby-value str">'本请求争议金额'</span>,<span class="ruby-value str">'text'</span>,[]],
942:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(c.amount_2,0)'</span>,<span class="ruby-value str">'反请求争议金额'</span>,<span class="ruby-value str">'text'</span>,[]]
943:     ]
944:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'c.case_code'</span>]
945:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
946:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
947:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(c.case_code,7) desc&quot;</span>
948:     <span class="ruby-keyword kw">end</span>
949:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
950:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
951:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
952:     <span class="ruby-keyword kw">end</span>
953:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
954:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
955:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
956:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
957:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
958:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
959:     <span class="ruby-keyword kw">end</span>
960:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
961:     <span class="ruby-keyword kw">else</span>
962:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span> 
963:     <span class="ruby-keyword kw">end</span>
964:     
965:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;1=1 &quot;</span>
966:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
967:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
968:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
969:     <span class="ruby-keyword kw">end</span>
970:     <span class="ruby-identifier">s</span>=<span class="ruby-value str">&quot;&quot;</span>
971:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,[<span class="ruby-node">&quot;select c.state,c.recevice_code,c.general_code,c.case_code, c.end_code,c.clerk,c.amount,c.amount_1,c.amount_2,count(e.id) as n from tb_cases as c inner join expert_meetings
972:  as e on c.used='Y' and e.used='Y' and c.recevice_code=e.recevice_code   where #{c} group by c.recevice_code order by ?&quot;</span>,<span class="ruby-ivar">@order</span>],<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
973:     <span class="ruby-ivar">@case_n</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select count(distinct c.recevice_code) as n from tb_cases as c inner join expert_meetings 
974:  as e on c.used='Y' and e.used='Y' and c.recevice_code=e.recevice_code   where #{c}&quot;</span>)
975:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002391" class="method-detail">
        <a name="M002391"></a>

        <div class="method-heading">
          <a href="#M002391" class="method-signature">
          <span class="method-name">list_1</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
基本情况查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002391-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002391-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 30</span>
30:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_1</span>
31:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
32:     <span class="ruby-ivar">@remun</span>={<span class="ruby-value str">&quot;Y&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;处长确认&quot;</span>,<span class="ruby-value str">&quot;N&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;未发放&quot;</span>}
33:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_1&quot;</span>
34:     <span class="ruby-ivar">@hant_search_1</span>=[
35:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],
36:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],
37:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'tb_cases_nowdate'</span>,<span class="ruby-value str">'立案日期'</span>,<span class="ruby-value str">'text'</span>,[]],
38:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_aribitprotprog_num'</span>,<span class="ruby-value str">'仲裁协议类型'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0003' and  state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
39:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'tb_cases_state'</span>,<span class="ruby-value str">'案件状态'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">&quot;咨询&quot;</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">&quot;历史&quot;</span>],[<span class="ruby-value">3</span>,<span class="ruby-value str">&quot;不受理&quot;</span>],[<span class="ruby-value">4</span>,<span class="ruby-value str">&quot;立案&quot;</span>],[<span class="ruby-value">5</span>,<span class="ruby-value str">&quot;组庭&quot;</span>],[<span class="ruby-value">6</span>,<span class="ruby-value str">&quot;开庭&quot;</span>],[<span class="ruby-value">-1</span>,<span class="ruby-value str">&quot;重审&quot;</span>],[<span class="ruby-value">100</span>,<span class="ruby-value str">&quot;终审&quot;</span>],[<span class="ruby-value">150</span>,<span class="ruby-value str">&quot;归档申请&quot;</span>],[<span class="ruby-value">200</span>,<span class="ruby-value str">&quot;已归档&quot;</span>]]],
40:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_terms_drafting_party'</span>,<span class="ruby-value str">'仲裁条款起草方'</span>,<span class="ruby-value str">'text'</span>,[]],
41:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'tb_parties_partytype'</span>,<span class="ruby-value str">'当事人类型'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">&quot;申请人&quot;</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">&quot;被申请人&quot;</span>]]],
42:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'当事人名称'</span>,<span class="ruby-value str">'text'</span>,[]],
43:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_casetype_num'</span>,<span class="ruby-value str">'案件争议金额大分类'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0002' and state='Y' and used='Y' and data_parent=''&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
44:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_casetype_num2'</span>,<span class="ruby-value str">'案件争议金额小分类'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0002' and state='Y' and used='Y' and data_parent&lt;&gt;''&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
45:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_cases_arbitprot,\\\'\\\')'</span>,<span class="ruby-value str">'仲裁协议内容'</span>,<span class="ruby-value str">'text'</span>,[]],
46:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(tb_cases_amount,0)'</span>,<span class="ruby-value str">'总争议金额'</span>,<span class="ruby-value str">'text'</span>,[]],
47:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(tb_cases_amount_1,0)'</span>,<span class="ruby-value str">'本请求争议金额'</span>,<span class="ruby-value str">'text'</span>,[]],
48:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(tb_cases_amount_2,0)'</span>,<span class="ruby-value str">'反请求争议金额'</span>,<span class="ruby-value str">'text'</span>,[]],
49:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(tb_contractsigns_contractdate,\\\'\\\')'</span>,<span class="ruby-value str">'协议签订日期'</span>,<span class="ruby-value str">'text'</span>,[]],
50:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'typed1'</span>,<span class="ruby-value str">'证据保全'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">'0000'</span>,<span class="ruby-value str">'无'</span>],[<span class="ruby-value str">'0001'</span>,<span class="ruby-value str">'有'</span>]]],
51:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'typed2'</span>,<span class="ruby-value str">'财产保全'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">'0000'</span>,<span class="ruby-value str">'无'</span>],[<span class="ruby-value str">'0002'</span>,<span class="ruby-value str">'有'</span>]]],
52:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_remun_state'</span>,<span class="ruby-value str">'报酬发放情况'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">'Y'</span>,<span class="ruby-value str">'处长确认'</span>],[<span class="ruby-value str">'N'</span>,<span class="ruby-value str">'未发放'</span>]]]
53:     ]
54:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_case_code'</span>,
55:       <span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'tb_cases_terms_drafting_party'</span>,<span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_cases_arbitprot,\\\'\\\')'</span>,
56:       <span class="ruby-value str">'tb_cases_nowdate'</span>,<span class="ruby-value str">'IFNULL(tb_cases_amount,0)'</span>,<span class="ruby-value str">'IFNULL(tb_contractsigns_contractdate,\\\'\\\')'</span>,<span class="ruby-value str">'typed1'</span>,<span class="ruby-value str">'typed2'</span>,<span class="ruby-value str">'tb_cases_remun_state'</span>]
57:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
58:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
59:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
60:     <span class="ruby-keyword kw">end</span>
61:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
62:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
63:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
64:     <span class="ruby-keyword kw">end</span>
65:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
66:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
67:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
68:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
69:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
70:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
71:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
72:     <span class="ruby-keyword kw">end</span>
73:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
74:     <span class="ruby-keyword kw">else</span>
75:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span> 
76:     <span class="ruby-keyword kw">end</span>
77:     
78:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_clerk='#{session[:user_code]}'&quot;</span>
79:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
80:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
81:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
82:     <span class="ruby-keyword kw">end</span>
83:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk,tb_cases_amount,tb_cases_amount_1,tb_cases_amount_2   from v_case_query1_list1s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
84:     <span class="ruby-ivar">@c_l</span>=<span class="ruby-constant">VCaseQuery1List1</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases_recevice_code from v_case_query1_list1s where #{c}&quot;</span>)
85:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002397" class="method-detail">
        <a name="M002397"></a>

        <div class="method-heading">
          <a href="#M002397" class="method-signature">
          <span class="method-name">list_10</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
将到期案件查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002397-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002397-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 329</span>
329:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_10</span>
330:     <span class="ruby-ivar">@day_all</span>=[[<span class="ruby-value str">'15天以内'</span>,<span class="ruby-value str">'01'</span>],[<span class="ruby-value str">'30天以内'</span>,<span class="ruby-value str">'02'</span>],[<span class="ruby-value str">'45天以内'</span>,<span class="ruby-value str">'03'</span>],[<span class="ruby-value str">'60天以内'</span>,<span class="ruby-value str">'04'</span>],[<span class="ruby-value str">&quot;90天以内&quot;</span>,<span class="ruby-value str">'05'</span>]]
331:     <span class="ruby-ivar">@clerk_all</span>=<span class="ruby-constant">UserDuty</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select users.code as code,users.name as name from users,user_duties where users.states='Y' and users.used='Y' and  users.code=user_duties.user_code and user_duties.duty_code='0003' order by users.ord&quot;</span>)
332:     <span class="ruby-ivar">@str1</span>={<span class="ruby-value str">&quot;01&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;15天以内&quot;</span>,<span class="ruby-value str">&quot;02&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;30天以内&quot;</span>,<span class="ruby-value str">&quot;03&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;45天以内&quot;</span>,<span class="ruby-value str">&quot;04&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;60天以内&quot;</span>,<span class="ruby-value str">&quot;05&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;90天以内&quot;</span>}
333:     <span class="ruby-ivar">@day1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:day1</span>]
334:     <span class="ruby-ivar">@clerk</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:clerk</span>]
335:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
336:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@day1</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@clerk</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span> 
337:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@day1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
338:         <span class="ruby-ivar">@day1</span>=<span class="ruby-value str">'01'</span>
339:       <span class="ruby-keyword kw">end</span>
340:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@clerk</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@clerk</span><span class="ruby-operator">==</span><span class="ruby-value str">''</span>
341:         <span class="ruby-identifier">s</span>=<span class="ruby-value str">''</span>
342:       <span class="ruby-keyword kw">else</span>
343:         <span class="ruby-identifier">s</span>=<span class="ruby-node">&quot; and clerk='#{@clerk}'&quot;</span>
344:       <span class="ruby-keyword kw">end</span>
345:       <span class="ruby-identifier">b</span>=<span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>
346:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@day1</span><span class="ruby-operator">==</span><span class="ruby-value str">'01'</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@day1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
347:         <span class="ruby-identifier">a</span>=<span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span><span class="ruby-operator">+</span><span class="ruby-value">15</span>
348:         <span class="ruby-ivar">@case1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;finally_limit_dat&lt;='#{a}' and used='Y' and state&gt;=4 and caseendbook_id_first is null #{s}&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
349:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@day1</span><span class="ruby-operator">==</span><span class="ruby-value str">'02'</span>
350:         <span class="ruby-identifier">a</span>=<span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span><span class="ruby-operator">+</span><span class="ruby-value">30</span>
351:         <span class="ruby-ivar">@case1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;finally_limit_dat&lt;='#{a}' and used='Y' and state&gt;=4 and caseendbook_id_first is null #{s}&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
352:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@day1</span><span class="ruby-operator">==</span><span class="ruby-value str">'03'</span>
353:         <span class="ruby-identifier">a</span>=<span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span><span class="ruby-operator">+</span><span class="ruby-value">45</span>
354:         <span class="ruby-ivar">@case1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;finally_limit_dat&lt;='#{a}' and used='Y' and state&gt;=4 and caseendbook_id_first is null #{s}&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
355:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@day1</span><span class="ruby-operator">==</span><span class="ruby-value str">'04'</span>
356:         <span class="ruby-identifier">a</span>=<span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span><span class="ruby-operator">+</span><span class="ruby-value">60</span>
357:         <span class="ruby-ivar">@case1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;finally_limit_dat&lt;='#{a}' and used='Y' and state&gt;=4 and caseendbook_id_first is null #{s}&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
358:       <span class="ruby-keyword kw">else</span>  <span class="ruby-comment cmt"># @day1=='05'</span>
359:         <span class="ruby-identifier">a</span>=<span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span><span class="ruby-operator">+</span><span class="ruby-value">90</span>
360:         <span class="ruby-ivar">@case1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;finally_limit_dat&lt;='#{a}' and used='Y' and state&gt;=4 and caseendbook_id_first is null #{s}&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
361:       <span class="ruby-keyword kw">end</span>
362:     <span class="ruby-keyword kw">end</span>
363:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002409" class="method-detail">
        <a name="M002409"></a>

        <div class="method-heading">
          <a href="#M002409" class="method-signature">
          <span class="method-name">list_101</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
前台基本情况查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002409-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002409-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 850</span>
850:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_101</span>
851:     <span class="ruby-ivar">@dat1</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">months_ago</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">at_beginning_of_month</span>.<span class="ruby-identifier">to_date</span>
852:     <span class="ruby-ivar">@dat2</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_end_of_month</span>.<span class="ruby-identifier">to_date</span>
853:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档接收&quot;</span>,<span class="ruby-value">220</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档&quot;</span>}
854:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_101&quot;</span>
855:     <span class="ruby-ivar">@hant_search_1</span>=[
856:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'当事人名称'</span>,<span class="ruby-value str">'text'</span>,[]],
857:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(tb_cases_nowdate,\\\'\\\')'</span>,<span class="ruby-value str">'立案时间 开始'</span>,<span class="ruby-value str">'text'</span>,[],<span class="ruby-ivar">@dat1</span>],
858:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(tb_cases_nowdate ,\\\'\\\')'</span>,<span class="ruby-value str">'立案时间 结束'</span>,<span class="ruby-value str">'text'</span>,[],<span class="ruby-ivar">@dat2</span>],
859:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'受案号'</span>,<span class="ruby-value str">'text'</span>,[]],
860:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]]
861:     ]
862:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>]
863:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
864:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
865:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) asc&quot;</span>
866:     <span class="ruby-keyword kw">end</span>
867:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
868:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
869:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-value">9000000</span>
870:     <span class="ruby-keyword kw">end</span>
871:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
872:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
873:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
874:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
875:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
876:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
877:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
878:     <span class="ruby-keyword kw">end</span>
879:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
880:       <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_state&lt;&gt;2 and tb_cases_state&lt;&gt;3  and tb_cases_nowdate&gt;'#{@dat1}' and  tb_cases_nowdate&lt;'#{@dat2}'&quot;</span>
881:     <span class="ruby-keyword kw">else</span>
882:       <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;tb_cases_state&lt;&gt;2 and tb_cases_state&lt;&gt;3 &quot;</span>
883:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
884:     <span class="ruby-keyword kw">end</span>    
885:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
886:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
887:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>    
888:     <span class="ruby-keyword kw">end</span>
889:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code,tb_cases_nowdate,tb_cases_clerk,tb_cases_clerk_2,tb_cases_end_code from v_case_query1_list1s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
890:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002398" class="method-detail">
        <a name="M002398"></a>

        <div class="method-heading">
          <a href="#M002398" class="method-signature">
          <span class="method-name">list_12</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
咨询案件查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002398-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002398-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 366</span>
366:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_12</span>
367:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_12&quot;</span>
368:     <span class="ruby-ivar">@hant_search_1</span>=[[<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'happdate'</span>,<span class="ruby-value str">'咨询日期'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'keyword'</span>,<span class="ruby-value str">'系争合同争议性质'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'purpuse'</span>,<span class="ruby-value str">'涉案标的'</span>,<span class="ruby-value str">'text'</span>,[]],
369:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'app1'</span>,<span class="ruby-value str">'申请人信息及联系方式'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'res1'</span>,<span class="ruby-value str">'被申请人信息及联系方式'</span>,<span class="ruby-value str">'text'</span>,[]],
370:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'agent'</span>,<span class="ruby-value str">'机构名称'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0004' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
371:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'dat1'</span>,<span class="ruby-value str">'仲裁条款或协议订立的时间'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'term_source'</span>,<span class="ruby-value str">'仲裁条款或协议订立来源'</span>,<span class="ruby-value str">'text'</span>,[]],
372:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'note'</span>,<span class="ruby-value str">'备注'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'content'</span>,<span class="ruby-value str">'处理结果小结'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'content2'</span>,<span class="ruby-value str">'后续跟进情况补充'</span>,<span class="ruby-value str">'text'</span>,[]],
373:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'clerk_id'</span>,<span class="ruby-value str">'助理姓名'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">UserDuty</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select users.code as code,users.name as name from users,user_duties where users.states='Y' and users.used='Y' and  users.code=user_duties.user_code and user_duties.duty_code='0003' order by users.ord&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">code</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">name</span>]}.<span class="ruby-identifier">insert</span>(<span class="ruby-value">0</span>,[<span class="ruby-value str">&quot;&quot;</span>,<span class="ruby-value str">&quot;全部&quot;</span>])]
374:     ]
375:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
376:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
377:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;recevice_code desc&quot;</span>
378:     <span class="ruby-keyword kw">end</span>
379:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
380:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
381:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
382:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
383:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
384:     <span class="ruby-keyword kw">end</span>
385:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
386:     <span class="ruby-keyword kw">else</span>
387:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
388:     <span class="ruby-keyword kw">end</span>
389:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;used='Y' &quot;</span>
390:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
391:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
392:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
393:     <span class="ruby-keyword kw">end</span>
394:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
395:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
396:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;happdate desc&quot;</span>
397:     <span class="ruby-keyword kw">end</span>
398:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
399:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
400:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
401:     <span class="ruby-keyword kw">end</span>
402:     <span class="ruby-ivar">@casepro_pages</span>,<span class="ruby-ivar">@casepro</span>=<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_casepros</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
403:     <span class="ruby-ivar">@n_l</span>=<span class="ruby-constant">TbCasepro</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c</span>)
404:     <span class="ruby-comment cmt">#    @date1=params[:date1]</span>
405:     <span class="ruby-comment cmt">#    @date2=params[:date2]</span>
406:     <span class="ruby-comment cmt">#    if @date1==nil or @date2==nil</span>
407:     <span class="ruby-comment cmt">#      @date1 = Time.now.months_ago(2).at_beginning_of_month.to_date</span>
408:     <span class="ruby-comment cmt">#      @date2 = Time.now.at_end_of_month.to_date</span>
409:     <span class="ruby-comment cmt">#    end</span>
410:     <span class="ruby-comment cmt">#    if @date1==nil or @date2==nil or @date1==&quot;&quot; or @date2==&quot;&quot;</span>
411:     <span class="ruby-comment cmt">#      flash[:notice]=&quot;请选择正确的时间！&quot;</span>
412:     <span class="ruby-comment cmt">#      render :action=&gt;&quot;list_12&quot;</span>
413:     <span class="ruby-comment cmt">#    elsif @date1&gt;@date2</span>
414:     <span class="ruby-comment cmt">#      flash[:notice]=&quot;时间有误，请重新选择！&quot;</span>
415:     <span class="ruby-comment cmt">#      render :action=&gt;&quot;list_12&quot;</span>
416:     <span class="ruby-comment cmt">#    else</span>
417:     <span class="ruby-comment cmt">#      c=&quot;used='Y' and happdate&gt;='#{@date1}' and happdate&lt;='#{@date2}'&quot;</span>
418:     <span class="ruby-comment cmt">#      @casepro_pages,@casepro=paginate(:tb_casepros,:conditions=&gt;c,:order=&gt;@order,:per_page=&gt;@page_lines.to_i)</span>
419:     <span class="ruby-comment cmt">#      @n_l=TbCasepro.find(:all,:conditions=&gt;c)</span>
420:     <span class="ruby-comment cmt">#    end</span>
421:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002392" class="method-detail">
        <a name="M002392"></a>

        <div class="method-heading">
          <a href="#M002392" class="method-signature">
          <span class="method-name">list_2</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
仲裁参与人查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002392-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002392-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 88</span>
 88:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_2</span>
 89:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
 90:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_2&quot;</span>
 91:     <span class="ruby-ivar">@hant_search_1</span>=[
 92:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'总案号'</span>,<span class="ruby-value str">'text'</span>,[]],
 93:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],
 94:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(arbitman_name,\\\'\\\')'</span>,<span class="ruby-value str">'仲裁员姓名'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(party1_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'申请人'</span>,<span class="ruby-value str">'text'</span>,[]],
 95:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(agent1_name,\\\'\\\')'</span>,<span class="ruby-value str">'申请人代理人'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(witne1_name,\\\'\\\')'</span>,<span class="ruby-value str">'申请人证人'</span>,<span class="ruby-value str">'text'</span>,[]],
 96:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(party2_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'被申请人'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(agent2_name,\\\'\\\')'</span>,<span class="ruby-value str">'被申请人代理人'</span>,<span class="ruby-value str">'text'</span>,[]],
 97:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(witne2_name,\\\'\\\')'</span>,<span class="ruby-value str">'被申请人证人'</span>,<span class="ruby-value str">'text'</span>,[]],
 98:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_type1'</span>,<span class="ruby-value str">'主体类型'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8140' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
 99:     ]
100:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,
101:       <span class="ruby-value str">'IFNULL(arbitman_name,\\\'\\\')'</span>, <span class="ruby-value str">'IFNULL(party1_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(agent1_name,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(witne1_name,\\\'\\\')'</span>,
102:       <span class="ruby-value str">'IFNULL(party2_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(agent2_name,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(witne2_name,\\\'\\\')'</span>
103:     ]
104:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
105:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
106:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
107:     <span class="ruby-keyword kw">end</span>
108:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
109:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
110:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
111:     <span class="ruby-keyword kw">end</span>
112:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
113:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
114:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
115:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
116:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
117:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
118:     <span class="ruby-keyword kw">end</span>
119:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
120:     <span class="ruby-keyword kw">else</span>
121:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span> 
122:     <span class="ruby-keyword kw">end</span>
123:     
124:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_state&gt;=4 and tb_cases_clerk='#{session[:user_code]}'&quot;</span>
125:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
126:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
127:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
128:     <span class="ruby-keyword kw">end</span>   
129:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List2</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk from v_case_query1_list2s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
130:     <span class="ruby-ivar">@c_l</span>=<span class="ruby-constant">VCaseQuery1List2</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases_recevice_code from v_case_query1_list2s where #{c}&quot;</span>)
131:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002393" class="method-detail">
        <a name="M002393"></a>

        <div class="method-heading">
          <a href="#M002393" class="method-signature">
          <span class="method-name">list_3</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
按仲裁程序查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002393-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002393-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 134</span>
134:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_3</span>
135:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
136:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_3&quot;</span>
137:     <span class="ruby-ivar">@hant_search_1</span>=[
138:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'总案号'</span>,<span class="ruby-value str">'text'</span>,[]],
139:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],
140:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_cases_aribitprog_num,\\\'\\\')'</span>,<span class="ruby-value str">'仲裁程序'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0001' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
141:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(amount2_used,\\\'\\\')'</span>,<span class="ruby-value str">'反请求'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有&quot;</span>]]],
142:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_saves_yard_area,\\\'\\\')'</span>,<span class="ruby-value str">'保全法院地区'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8104' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
143:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_saves_save_yard,\\\'\\\')'</span>,<span class="ruby-value str">'法院名称'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(caseorg_used,\\\'\\\')'</span>,<span class="ruby-value str">'组庭'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有&quot;</span>]]],
144:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(evite_used,\\\'\\\')'</span>,<span class="ruby-value str">'仲裁员回避'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有&quot;</span>]]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(sitting_used,\\\'\\\')'</span>,<span class="ruby-value str">'开庭'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有&quot;</span>]]],
145:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_cases_special,\\\'\\\')'</span>,<span class="ruby-value str">'案件备注'</span>,<span class="ruby-value str">'text'</span>,[]],
146:     ]
147:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,
148:       <span class="ruby-value str">'IFNULL(tb_saves_save_yard,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_cases_special,\\\'\\\')'</span>]
149:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
150:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
151:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
152:     <span class="ruby-keyword kw">end</span>
153:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
154:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
155:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
156:     <span class="ruby-keyword kw">end</span>
157:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
158:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
159:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
160:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
161:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
162:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
163:     <span class="ruby-keyword kw">end</span>
164:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
165:     <span class="ruby-keyword kw">else</span>
166:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span> 
167:     <span class="ruby-keyword kw">end</span>
168:     
169:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_state&gt;=4 and tb_cases_clerk='#{session[:user_code]}'&quot;</span>
170:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
171:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
172:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
173:     <span class="ruby-keyword kw">end</span>    
174:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List3</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk from v_case_query1_list3s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
175:     <span class="ruby-ivar">@c_l</span>=<span class="ruby-constant">VCaseQuery1List3</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases_recevice_code from v_case_query1_list3s where #{c}&quot;</span>)
176:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002402" class="method-detail">
        <a name="M002402"></a>

        <div class="method-heading">
          <a href="#M002402" class="method-signature">
          <span class="method-name">list_31</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
基本情况查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002402-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002402-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 505</span>
505:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_31</span>
506:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
507:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_31&quot;</span>
508:     <span class="ruby-ivar">@hant_search_1</span>=[
509:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_recevice_code'</span>,<span class="ruby-value str">'咨询流水号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'总案号'</span>,<span class="ruby-value str">'text'</span>,[]],
510:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],
511:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'tb_cases_nowdate'</span>,<span class="ruby-value str">'立案日期'</span>,<span class="ruby-value str">'text'</span>,[]],
512:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_aribitprotprog_num'</span>,<span class="ruby-value str">'仲裁程序'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0003' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
513:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'tb_cases_state'</span>,<span class="ruby-value str">'案件状态'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">&quot;咨询&quot;</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">&quot;历史&quot;</span>],[<span class="ruby-value">3</span>,<span class="ruby-value str">&quot;不受理&quot;</span>],[<span class="ruby-value">4</span>,<span class="ruby-value str">&quot;立案&quot;</span>],[<span class="ruby-value">5</span>,<span class="ruby-value str">&quot;组庭&quot;</span>],[<span class="ruby-value">6</span>,<span class="ruby-value str">&quot;开庭&quot;</span>],[<span class="ruby-value">-1</span>,<span class="ruby-value str">&quot;重审&quot;</span>],[<span class="ruby-value">100</span>,<span class="ruby-value str">&quot;终审&quot;</span>],[<span class="ruby-value">150</span>,<span class="ruby-value str">&quot;归档申请&quot;</span>],[<span class="ruby-value">200</span>,<span class="ruby-value str">&quot;已归档&quot;</span>]]],
514:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_terms_drafting_party'</span>,<span class="ruby-value str">'仲裁条款起草方'</span>,<span class="ruby-value str">'text'</span>,[]],
515:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_clerk'</span>,<span class="ruby-value str">'办案助理'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">UserDuty</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select users.code as code,users.name as name from users,user_duties where  users.states='Y' and users.used='Y' and  users.code=user_duties.user_code and user_duties.duty_code='0003' order by users.ord&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">code</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">name</span>]}.<span class="ruby-identifier">insert</span>(<span class="ruby-value">0</span>,[<span class="ruby-value str">&quot;&quot;</span>,<span class="ruby-value str">&quot;全部&quot;</span>])],
516:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'tb_parties_partytype'</span>,<span class="ruby-value str">'当事人类型'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">&quot;申请人&quot;</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">&quot;被申请人&quot;</span>]]],
517:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'当事人名称'</span>,<span class="ruby-value str">'text'</span>,[]],
518:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_casetype_num'</span>,<span class="ruby-value str">'案件争议金额大分类'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0002' and state='Y' and used='Y' and data_parent=''&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
519:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_casetype_num2'</span>,<span class="ruby-value str">'案件争议金额小分类'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0002' and state='Y' and used='Y' and data_parent&lt;&gt;''&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
520:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_cases_arbitprot,\\\'\\\')'</span>,<span class="ruby-value str">'仲裁协议内容'</span>,<span class="ruby-value str">'text'</span>,[]],
521:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(tb_cases_amount,0)'</span>,<span class="ruby-value str">'总争议金额'</span>,<span class="ruby-value str">'text'</span>,[]],
522:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(tb_cases_amount_1,0)'</span>,<span class="ruby-value str">'本请求争议金额'</span>,<span class="ruby-value str">'text'</span>,[]],
523:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(tb_cases_amount_2,0)'</span>,<span class="ruby-value str">'反请求争议金额'</span>,<span class="ruby-value str">'text'</span>,[]],
524:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(tb_contractsigns_contractdate,\\\'\\\')'</span>,<span class="ruby-value str">'协议签订日期'</span>,<span class="ruby-value str">'text'</span>,[]],
525:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(tb_casedelays_requestdate,\\\'\\\')'</span>,<span class="ruby-value str">'延期提出日期'</span>,<span class="ruby-value str">'text'</span>,[]],
526:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_clerk_2'</span>,<span class="ruby-value str">'咨询助理'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">UserDuty</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select users.code as code,users.name as name from users,user_duties where  users.states='Y' and users.used='Y' and users.code=user_duties.user_code and user_duties.duty_code='0003' order by users.ord&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">code</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">name</span>]}.<span class="ruby-identifier">insert</span>(<span class="ruby-value">0</span>,[<span class="ruby-value str">&quot;&quot;</span>,<span class="ruby-value str">&quot;全部&quot;</span>])],
527:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'typed1'</span>,<span class="ruby-value str">'证据保全'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">'0000'</span>,<span class="ruby-value str">'无'</span>],[<span class="ruby-value str">'0001'</span>,<span class="ruby-value str">'有'</span>]]],
528:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'typed2'</span>,<span class="ruby-value str">'财产保全'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">'0000'</span>,<span class="ruby-value str">'无'</span>],[<span class="ruby-value str">'0002'</span>,<span class="ruby-value str">'有'</span>]]],
529:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(sitting_times,0)'</span>,<span class="ruby-value str">'开庭次数'</span>,<span class="ruby-value str">'text'</span>,[]]
530:     ]
531:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_recevice_code'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,
532:       <span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'tb_cases_terms_drafting_party'</span>,<span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_cases_arbitprot,\\\'\\\')'</span>,
533:       <span class="ruby-value str">'tb_cases_nowdate'</span>,<span class="ruby-value str">'IFNULL(tb_cases_amount,0)'</span>,<span class="ruby-value str">'IFNULL(tb_contractsigns_contractdate,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_casedelays_requestdate,\\\'\\\')'</span>,<span class="ruby-value str">'typed1'</span>,<span class="ruby-value str">'typed2'</span>,<span class="ruby-value str">'IFNULL(sitting_times,0)'</span>]
534:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
535:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
536:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
537:     <span class="ruby-keyword kw">end</span>
538:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
539:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
540:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
541:     <span class="ruby-keyword kw">end</span>
542:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
543:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
544:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
545:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
546:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
547:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
548:     <span class="ruby-keyword kw">end</span>
549:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
550:     <span class="ruby-keyword kw">else</span>
551:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
552:     <span class="ruby-keyword kw">end</span>
553:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;tb_cases_state&gt;=-1 and tb_cases_state&lt;&gt;2 and tb_cases_state&lt;&gt;3&quot;</span>
554:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
555:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
556:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
557:     <span class="ruby-keyword kw">end</span>
558:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk,tb_cases_amount,tb_cases_amount_1,tb_cases_amount_2 from v_case_query1_list1s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
559:     <span class="ruby-ivar">@c_l</span>=<span class="ruby-constant">VCaseQuery1List1</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases_recevice_code from v_case_query1_list1s where #{c}&quot;</span>)
560:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002403" class="method-detail">
        <a name="M002403"></a>

        <div class="method-heading">
          <a href="#M002403" class="method-signature">
          <span class="method-name">list_32</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
仲裁参与人查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002403-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002403-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 563</span>
563:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_32</span>
564:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
565:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_32&quot;</span>
566:     <span class="ruby-ivar">@hant_search_1</span>=[
567:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'总案号'</span>,<span class="ruby-value str">'text'</span>,[]],
568:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],
569:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_clerk'</span>,<span class="ruby-value str">'办案助理'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">UserDuty</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select users.code as code,users.name as name from users,user_duties where  users.states='Y' and users.used='Y' and users.code=user_duties.user_code and user_duties.duty_code='0003' order by users.ord&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">code</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">name</span>]}.<span class="ruby-identifier">insert</span>(<span class="ruby-value">0</span>,[<span class="ruby-value str">&quot;&quot;</span>,<span class="ruby-value str">&quot;全部&quot;</span>])],
570:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(aname,\\\'\\\')'</span>,<span class="ruby-value str">'仲裁员姓名'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(party_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'当事人'</span>,<span class="ruby-value str">'text'</span>,[]],
571:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(party1_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'申请人'</span>,<span class="ruby-value str">'text'</span>,[]],
572:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(agent1_name,\\\'\\\')'</span>,<span class="ruby-value str">'申请人代理人'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(witne1_name,\\\'\\\')'</span>,<span class="ruby-value str">'申请人证人'</span>,<span class="ruby-value str">'text'</span>,[]],
573:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(party2_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'被申请人'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(agent2_name,\\\'\\\')'</span>,<span class="ruby-value str">'被申请人代理人'</span>,<span class="ruby-value str">'text'</span>,[]],
574:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(witne2_name,\\\'\\\')'</span>,<span class="ruby-value str">'被申请人证人'</span>,<span class="ruby-value str">'text'</span>,[]],
575:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_type1'</span>,<span class="ruby-value str">'主体类型'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8140' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
576:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_recevice_code'</span>,<span class="ruby-value str">'咨询流水号'</span>,<span class="ruby-value str">'text'</span>,[]],
577:     ]
578:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'tb_cases_clerk'</span>,
579:       <span class="ruby-value str">'IFNULL(aname,\\\'\\\')'</span>, <span class="ruby-value str">'IFNULL(party_partyname,\\\'\\\')'</span>,
580:       <span class="ruby-value str">'IFNULL(aname,\\\'\\\')'</span>, <span class="ruby-value str">'IFNULL(party1_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(agent1_name,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(witne1_name,\\\'\\\')'</span>,
581:       <span class="ruby-value str">'IFNULL(party2_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(agent2_name,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(witne2_name,\\\'\\\')'</span>
582:     ]
583:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
584:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
585:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
586:     <span class="ruby-keyword kw">end</span>
587:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
588:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
589:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
590:     <span class="ruby-keyword kw">end</span>
591:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
592:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
593:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
594:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
595:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
596:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
597:     <span class="ruby-keyword kw">end</span>
598:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
599:     <span class="ruby-keyword kw">else</span>
600:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
601:     <span class="ruby-keyword kw">end</span>
602:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;tb_cases_state&gt;=4&quot;</span>
603:     <span class="ruby-comment cmt">#c=&quot;tb_cases_state&gt;=-1 and tb_cases_state&lt;&gt;2 and tb_cases_state&lt;&gt;3&quot;</span>
604:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
605:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
606:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
607:     <span class="ruby-keyword kw">end</span>
608:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List2</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk from v_case_query1_list2s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
609:     <span class="ruby-ivar">@c_l</span>=<span class="ruby-constant">VCaseQuery1List2</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases_recevice_code from v_case_query1_list2s where #{c}&quot;</span>)
610:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002404" class="method-detail">
        <a name="M002404"></a>

        <div class="method-heading">
          <a href="#M002404" class="method-signature">
          <span class="method-name">list_33</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
按仲裁程序查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002404-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002404-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 613</span>
613:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_33</span>
614:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
615:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_33&quot;</span>
616:     <span class="ruby-ivar">@hant_search_1</span>=[
617:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'总案号'</span>,<span class="ruby-value str">'text'</span>,[]],
618:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],
619:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_clerk'</span>,<span class="ruby-value str">'办案助理'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">UserDuty</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select users.code as code,users.name as name from users,user_duties where  users.states='Y' and users.used='Y' and users.code=user_duties.user_code and user_duties.duty_code='0003' order by users.ord&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">code</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">name</span>]}.<span class="ruby-identifier">insert</span>(<span class="ruby-value">0</span>,[<span class="ruby-value str">&quot;&quot;</span>,<span class="ruby-value str">&quot;全部&quot;</span>])],
620:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_cases_aribitprog_num,\\\'\\\')'</span>,<span class="ruby-value str">'仲裁程序'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0001' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
621:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(amount2_used,\\\'\\\')'</span>,<span class="ruby-value str">'反请求'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有&quot;</span>]]],
622:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_saves_yard_area,\\\'\\\')'</span>,<span class="ruby-value str">'保全法院地区'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8104' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
623:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_saves_save_yard,\\\'\\\')'</span>,<span class="ruby-value str">'法院名称'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(caseorg_used,\\\'\\\')'</span>,<span class="ruby-value str">'组庭'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有&quot;</span>]]],
624:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(evite_used,\\\'\\\')'</span>,<span class="ruby-value str">'仲裁员回避'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有&quot;</span>]]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(sitting_used,\\\'\\\')'</span>,<span class="ruby-value str">'开庭'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有&quot;</span>]]],
625:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_cases_special,\\\'\\\')'</span>,<span class="ruby-value str">'案件备注'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_recevice_code'</span>,<span class="ruby-value str">'咨询流水号'</span>,<span class="ruby-value str">'text'</span>,[]],
626:     ]
627:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'tb_cases_clerk'</span>,
628:       <span class="ruby-value str">'IFNULL(tb_cases_aribitprog_num,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_cases_special,\\\'\\\')'</span>]
629:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
630:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
631:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
632:     <span class="ruby-keyword kw">end</span>
633:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
634:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
635:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
636:     <span class="ruby-keyword kw">end</span>
637:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
638:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
639:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
640:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
641:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
642:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
643:     <span class="ruby-keyword kw">end</span>
644:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
645:     <span class="ruby-keyword kw">else</span>
646:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
647:     <span class="ruby-keyword kw">end</span>
648: 
649:     <span class="ruby-comment cmt">#c=&quot;tb_cases_state&gt;=-1 and tb_cases_state&lt;&gt;2 and tb_cases_state&lt;&gt;3&quot;</span>
650:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;tb_cases_state&gt;=4&quot;</span>
651:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
652:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
653:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
654:     <span class="ruby-keyword kw">end</span>
655:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List3</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk from v_case_query1_list3s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
656:     <span class="ruby-ivar">@c_l</span>=<span class="ruby-constant">VCaseQuery1List3</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases_recevice_code from v_case_query1_list3s where #{c}&quot;</span>)
657:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002405" class="method-detail">
        <a name="M002405"></a>

        <div class="method-heading">
          <a href="#M002405" class="method-signature">
          <span class="method-name">list_34</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
按时间查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002405-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002405-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 660</span>
660:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_34</span>
661:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
662:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_34&quot;</span>
663:     <span class="ruby-ivar">@hant_search_1</span>=[
664:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'总案号'</span>,<span class="ruby-value str">'text'</span>,[]],
665:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],
666:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_clerk'</span>,<span class="ruby-value str">'办案助理'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">UserDuty</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select users.code as code,users.name as name from users,user_duties where users.states='Y' and users.used='Y' and users.code=user_duties.user_code and user_duties.duty_code='0003' order by users.ord&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">code</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">name</span>]}.<span class="ruby-identifier">insert</span>(<span class="ruby-value">0</span>,[<span class="ruby-value str">&quot;&quot;</span>,<span class="ruby-value str">&quot;全部&quot;</span>])],
667:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(tb_cases_receivedate,\\\'\\\')'</span>,<span class="ruby-value str">'咨询日期'</span>,<span class="ruby-value str">'text'</span>,[]],
668:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(tb_cases_nowdate,\\\'\\\')'</span>,<span class="ruby-value str">'立案日期'</span>,<span class="ruby-value str">'text'</span>,[]],
669:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(caseorg_orgdate,\\\'\\\')'</span>,<span class="ruby-value str">'组庭日期'</span>,<span class="ruby-value str">'text'</span>,[]],
670:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(sitting_sittingdate,\\\'\\\')'</span>,<span class="ruby-value str">'开庭日期'</span>,<span class="ruby-value str">'text'</span>,[]],
671:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(tb_caseendbooks_decideDate,\\\'\\\')'</span>,<span class="ruby-value str">'结案日期'</span>,<span class="ruby-value str">'text'</span>,[]],
672:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(tb_cases_now_end,\\\'\\\')'</span>,<span class="ruby-value str">'立案至结案天数'</span>,<span class="ruby-value str">'text'</span>,[]],
673:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_recevice_code'</span>,<span class="ruby-value str">'咨询流水号'</span>,<span class="ruby-value str">'text'</span>,[]],
674:     ]
675:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'tb_cases_clerk'</span>,<span class="ruby-value str">'IFNULL(tb_cases_receivedate,\\\'\\\')'</span>,
676:       <span class="ruby-value str">'IFNULL(tb_cases_nowdate,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(caseorg_orgdate,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(sitting_sittingdate,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_caseendbooks_decideDate,\\\'\\\')'</span>,
677:       <span class="ruby-value str">'IFNULL(tb_cases_now_end,\\\'\\\')'</span>
678:     ]
679:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
680:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
681:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
682:     <span class="ruby-keyword kw">end</span>
683:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
684:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
685:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
686:     <span class="ruby-keyword kw">end</span>
687:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
688:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
689:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
690:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
691:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
692:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
693:     <span class="ruby-keyword kw">end</span>
694:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
695:     <span class="ruby-keyword kw">else</span>
696:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
697:     <span class="ruby-keyword kw">end</span>
698: 
699:     <span class="ruby-comment cmt">#c=&quot;tb_cases_state&gt;=-1 and tb_cases_state&lt;&gt;2 and tb_cases_state&lt;&gt;3&quot;</span>
700:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;tb_cases_state&gt;=4&quot;</span>
701:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
702:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
703:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
704:     <span class="ruby-keyword kw">end</span>
705:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List4</span>,<span class="ruby-node">&quot;select distinct tb_cases_recevice_code,tb_cases_state,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk,tb_caseendbooks_decideDate,tb_cases_now_end from v_case_query1_list4s  where #{c} group by tb_cases_recevice_code order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
706:     <span class="ruby-ivar">@c_l</span>=<span class="ruby-constant">VCaseQuery1List4</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases_recevice_code from v_case_query1_list4s where #{c} group by tb_cases_recevice_code&quot;</span>)
707:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002406" class="method-detail">
        <a name="M002406"></a>

        <div class="method-heading">
          <a href="#M002406" class="method-signature">
          <span class="method-name">list_35</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
结案情况查询视图
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002406-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002406-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 710</span>
710:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_35</span>
711:     <span class="ruby-ivar">@arbitmantype</span>={<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;独&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;首&quot;</span>,<span class="ruby-value str">&quot;0003&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;申&quot;</span>,<span class="ruby-value str">&quot;0004&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;被&quot;</span>}
712:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
713:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_35&quot;</span>
714:     <span class="ruby-ivar">@hant_search_1</span>=[[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],
715:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_recevice_code'</span>,<span class="ruby-value str">'咨询流水号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'总案号'</span>,<span class="ruby-value str">'text'</span>,[]],
716:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],
717:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'tb_cases_nowdate'</span>,<span class="ruby-value str">'立案时间'</span>,<span class="ruby-value str">'text'</span>,[]],
718:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'tb_caseendbooks_decideDate'</span>,<span class="ruby-value str">'结案时间'</span>,<span class="ruby-value str">'text'</span>,[]],
719:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_repairarbits_used,\\\'\\\')'</span>,<span class="ruby-value str">'有无补充'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有补充&quot;</span>]]],
720:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_addarbits_used,\\\'\\\')'</span>,<span class="ruby-value str">'有无裁决书更正'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有&quot;</span>]]],
721:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_caseendbooks_endStyle,\\\'\\\')'</span>,<span class="ruby-value str">'结案方式'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8117' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
722:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_cases_runstyle,\\\'\\\')'</span>,<span class="ruby-value str">'执行情况'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='9014' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
723:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_cases_isback,\\\'\\\')'</span>,<span class="ruby-value str">'是否申请撤销'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;1&quot;</span>,<span class="ruby-value str">&quot;是&quot;</span>]]],
724:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_cases_isunrun,\\\'\\\')'</span>,<span class="ruby-value str">'是否申请不予执行'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;1&quot;</span>,<span class="ruby-value str">&quot;是&quot;</span>]]],
725:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(tb_cases_state,\\\'\\\')'</span>,<span class="ruby-value str">'重新仲裁'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">-1</span>,<span class="ruby-value str">&quot;是&quot;</span>]]],
726:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_casedelays_used,\\\'\\\')'</span>,<span class="ruby-value str">'有无延长审限'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有&quot;</span>]]],
727:     ]
728:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'tb_cases_recevice_code'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'tb_cases_nowdate'</span>,<span class="ruby-value str">'tb_caseendbooks_decideDate'</span>]
729:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
730:     <span class="ruby-comment cmt">#按结案号数字部分降序排列 right(left(tb_caseendbooks_arbitBookNum,10),7)。由于历史数据原因，改为按案号数字部分排列</span>
731:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
732:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
733:     <span class="ruby-keyword kw">end</span>
734:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
735:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
736:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
737:     <span class="ruby-keyword kw">end</span>
738:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
739:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
740:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
741:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
742:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
743:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
744:     <span class="ruby-keyword kw">end</span>
745:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
746:     <span class="ruby-keyword kw">else</span>
747:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
748:     <span class="ruby-keyword kw">end</span>
749: 
750:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;tb_cases_state&gt;=4 &quot;</span>
751:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
752:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
753:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
754:     <span class="ruby-keyword kw">end</span>
755: 
756:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List5</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_caseendbooks_decideDate,tb_caseendbooks_arbitBookNum,tb_caseendbooks_endStyle,tb_cases_clerk from v_case_query1_list5s  where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
757:     <span class="ruby-ivar">@c_l</span>=<span class="ruby-constant">VCaseQuery1List5</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases_recevice_code from v_case_query1_list5s where #{c}&quot;</span>)
758:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002407" class="method-detail">
        <a name="M002407"></a>

        <div class="method-heading">
          <a href="#M002407" class="method-signature">
          <span class="method-name">list_38</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
申请人、代理人信息查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002407-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002407-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 761</span>
761:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_38</span>
762:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
763:     <span class="ruby-ivar">@sss</span>={<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;申请人&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;被申请人&quot;</span>}
764:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_38&quot;</span>
765:     <span class="ruby-ivar">@hant_search_1</span>=[
766:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_partytype,\\\'\\\')'</span>,<span class="ruby-value str">'申(被)请人类型'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">&quot;申请人&quot;</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">&quot;被申请人&quot;</span>]]],
767:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_commissary,\\\'\\\')'</span>,<span class="ruby-value str">'法定代表人'</span>,<span class="ruby-value str">'text'</span>,[]],
768:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'申(被)请人名称'</span>,<span class="ruby-value str">'text'</span>,[]],
769:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_addr,\\\'\\\')'</span>,<span class="ruby-value str">'申(被)请人地址'</span>,<span class="ruby-value str">'text'</span>,[]],
770:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_postcode,\\\'\\\')'</span>,<span class="ruby-value str">'申(被)请人邮政编码'</span>,<span class="ruby-value str">'text'</span>,[]],
771:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_tel,\\\'\\\')'</span>,<span class="ruby-value str">'申(被)请人电话'</span>,<span class="ruby-value str">'text'</span>,[]],
772:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_email,\\\'\\\')'</span>,<span class="ruby-value str">'申(被)Email'</span>,<span class="ruby-value str">'text'</span>,[]],
773:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_name,\\\'\\\')'</span>,<span class="ruby-value str">'代理人名称'</span>,<span class="ruby-value str">'text'</span>,[]],
774:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_company,\\\'\\\')'</span>,<span class="ruby-value str">'所在单位'</span>,<span class="ruby-value str">'text'</span>,[]],
775:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_addr,\\\'\\\')'</span>,<span class="ruby-value str">'代理人地址'</span>,<span class="ruby-value str">'text'</span>,[]],
776:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_postcode,\\\'\\\')'</span>,<span class="ruby-value str">'代理人邮政编码'</span>,<span class="ruby-value str">'text'</span>,[]],
777:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_tel,\\\'\\\')'</span>,<span class="ruby-value str">'代理人电话'</span>,<span class="ruby-value str">'text'</span>,[]],
778:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_email,\\\'\\\')'</span>,<span class="ruby-value str">'代理人Email'</span>,<span class="ruby-value str">'text'</span>,[]],
779:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_mobiletel,\\\'\\\')'</span>,<span class="ruby-value str">'代理人手机'</span>,<span class="ruby-value str">'text'</span>,[]],
780:     ]
781:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'IFNULL(tb_parties_commissary,\\\'\\\')'</span>,
782:       <span class="ruby-value str">'IFNULL(tb_parties_commissary,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_parties_addr,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_parties_postcode,\\\'\\\')'</span>,
783:       <span class="ruby-value str">'IFNULL(tb_parties_postcode,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_parties_tel,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_parties_email,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_agents_name,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_agents_company,\\\'\\\')'</span>,
784:       <span class="ruby-value str">'IFNULL(tb_agents_addr,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_agents_postcode,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_agents_tel,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_agents_email,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_agents_mobiletel,\\\'\\\')'</span>
785:     ]
786:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
787:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
788:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
789:     <span class="ruby-keyword kw">end</span>
790:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
791:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
792:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
793:     <span class="ruby-keyword kw">end</span>
794:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
795:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
796:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
797:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
798:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
799:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
800:     <span class="ruby-keyword kw">end</span>
801:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
802:     <span class="ruby-keyword kw">else</span>
803:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
804:     <span class="ruby-keyword kw">end</span>
805: 
806:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;tb_cases_state&gt;=-1 and tb_cases_state&lt;&gt;2 and tb_cases_state&lt;&gt;3 and tb_cases_state&lt;&gt;100&quot;</span>
807:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
808:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
809:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
810:     <span class="ruby-keyword kw">end</span>
811:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:v_case_query1_list8s</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
812:     <span class="ruby-ivar">@c_l</span> = <span class="ruby-constant">VCaseQuery1List8</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select * from v_case_query1_list8s where #{c}&quot;</span>)
813:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002408" class="method-detail">
        <a name="M002408"></a>

        <div class="method-heading">
          <a href="#M002408" class="method-signature">
          <span class="method-name">list_38_remote</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
申请人、代理人信息查询,excel调用导出
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002408-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002408-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 816</span>
816:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_38_remote</span>
817:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
818:     <span class="ruby-ivar">@sss</span>={<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;申请人&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;被申请人&quot;</span>}
819:     
820:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
821:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
822:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
823:     <span class="ruby-keyword kw">end</span>
824:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
825:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
826:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
827:     <span class="ruby-keyword kw">end</span>
828:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
829:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
830:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
831:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
832:     <span class="ruby-keyword kw">end</span>
833:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
834:     <span class="ruby-keyword kw">else</span>
835:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
836:     <span class="ruby-keyword kw">end</span>
837:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:from</span>].<span class="ruby-identifier">blank?</span>
838:       <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_state&gt;=4 and tb_cases_clerk='#{session[:user_code]}'&quot;</span>
839:     <span class="ruby-keyword kw">else</span>
840:       <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;tb_cases_state&gt;=-1 and tb_cases_state&lt;&gt;2 and tb_cases_state&lt;&gt;3 and tb_cases_state&lt;&gt;100&quot;</span>
841:     <span class="ruby-keyword kw">end</span>
842:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
843:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
844:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
845:     <span class="ruby-keyword kw">end</span>
846:     <span class="ruby-ivar">@c_l</span> = <span class="ruby-constant">VCaseQuery1List8</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select * from v_case_query1_list8s where #{c}&quot;</span>)
847:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002394" class="method-detail">
        <a name="M002394"></a>

        <div class="method-heading">
          <a href="#M002394" class="method-signature">
          <span class="method-name">list_4</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
按时间查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002394-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002394-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 179</span>
179:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_4</span>
180:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
181:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_4&quot;</span>
182:     <span class="ruby-ivar">@hant_search_1</span>=[
183:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'总案号'</span>,<span class="ruby-value str">'text'</span>,[]],
184:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],
185:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(tb_cases_receivedate,\\\'\\\')'</span>,<span class="ruby-value str">'咨询日期'</span>,<span class="ruby-value str">'text'</span>,[]],
186:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(tb_cases_nowdate,\\\'\\\')'</span>,<span class="ruby-value str">'立案日期'</span>,<span class="ruby-value str">'text'</span>,[]],
187:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(caseorg_orgdate,\\\'\\\')'</span>,<span class="ruby-value str">'组庭日期'</span>,<span class="ruby-value str">'text'</span>,[]],
188:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(sitting_sittingdate,\\\'\\\')'</span>,<span class="ruby-value str">'开庭日期'</span>,<span class="ruby-value str">'text'</span>,[]],
189:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(tb_caseendbooks_decideDate,\\\'\\\')'</span>,<span class="ruby-value str">'结案日期'</span>,<span class="ruby-value str">'text'</span>,[]],
190:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(tb_cases_now_end,\\\'\\\')'</span>,<span class="ruby-value str">'立案至结案天数'</span>,<span class="ruby-value str">'text'</span>,[]],
191:     ]
192:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'IFNULL(tb_cases_receivedate,\\\'\\\')'</span>,
193:       <span class="ruby-value str">'IFNULL(tb_cases_nowdate,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(caseorg_orgdate,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(sitting_sittingdate,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_caseendbooks_decideDate,\\\'\\\')'</span>,
194:       <span class="ruby-value str">'IFNULL(tb_cases_now_end,\\\'\\\')'</span>
195:     ]
196:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
197:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
198:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
199:     <span class="ruby-keyword kw">end</span>
200:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
201:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
202:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
203:     <span class="ruby-keyword kw">end</span>
204:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
205:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
206:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
207:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
208:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
209:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
210:     <span class="ruby-keyword kw">end</span>
211:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
212:     <span class="ruby-keyword kw">else</span>
213:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span> 
214:     <span class="ruby-keyword kw">end</span>
215:     
216:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_clerk='#{session[:user_code]}' and tb_cases_state&gt;=4&quot;</span>
217:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
218:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
219:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
220:     <span class="ruby-keyword kw">end</span>    
221:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List4</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk from v_case_query1_list4s  where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
222:     <span class="ruby-ivar">@c_l</span>=<span class="ruby-constant">VCaseQuery1List4</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases_recevice_code from v_case_query1_list4s where #{c}&quot;</span>)
223:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002395" class="method-detail">
        <a name="M002395"></a>

        <div class="method-heading">
          <a href="#M002395" class="method-signature">
          <span class="method-name">list_5</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
结案情况查询视图
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002395-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002395-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 226</span>
226:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_5</span>
227:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
228:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_5&quot;</span>
229:     <span class="ruby-ivar">@hant_search_1</span>=[[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],
230:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'总案号'</span>,<span class="ruby-value str">'text'</span>,[]],
231:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],
232:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'tb_cases_nowdate'</span>,<span class="ruby-value str">'立案时间'</span>,<span class="ruby-value str">'text'</span>,[]],
233:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'tb_caseendbooks_decideDate'</span>,<span class="ruby-value str">'结案时间'</span>,<span class="ruby-value str">'text'</span>,[]],
234:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_repairarbits_used,\\\'\\\')'</span>,<span class="ruby-value str">'有无补充'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有补充&quot;</span>]]],
235:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_addarbits_used,\\\'\\\')'</span>,<span class="ruby-value str">'有无裁决书更正'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有&quot;</span>]]],
236:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_caseendbooks_endStyle,\\\'\\\')'</span>,<span class="ruby-value str">'结案方式'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8117' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
237:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_cases_runstyle,\\\'\\\')'</span>,<span class="ruby-value str">'执行情况'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='9014' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
238:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_cases_isback,\\\'\\\')'</span>,<span class="ruby-value str">'是否申请撤销'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;1&quot;</span>,<span class="ruby-value str">&quot;是&quot;</span>]]],
239:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_cases_isunrun,\\\'\\\')'</span>,<span class="ruby-value str">'是否申请不予执行'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;1&quot;</span>,<span class="ruby-value str">&quot;是&quot;</span>]]],
240:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(tb_cases_state,\\\'\\\')'</span>,<span class="ruby-value str">'重新仲裁'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">-1</span>,<span class="ruby-value str">&quot;是&quot;</span>]]],
241:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_casedelays_used,\\\'\\\')'</span>,<span class="ruby-value str">'有无延长审限'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;Y&quot;</span>,<span class="ruby-value str">&quot;有&quot;</span>]]],
242:     ]
243:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'tb_cases_nowdate'</span>,<span class="ruby-value str">'tb_caseendbooks_decideDate'</span>]
244:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
245:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
246:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(left(tb_caseendbooks_arbitBookNum,10),7) desc&quot;</span>
247:     <span class="ruby-keyword kw">end</span>
248:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
249:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
250:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
251:     <span class="ruby-keyword kw">end</span>
252:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
253:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
254:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
255:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
256:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
257:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
258:     <span class="ruby-keyword kw">end</span>
259:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
260:     <span class="ruby-keyword kw">else</span>
261:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span> 
262:     <span class="ruby-keyword kw">end</span>
263:     
264:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_state&gt;=4 and tb_cases_clerk='#{session[:user_code]}'&quot;</span>
265:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
266:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
267:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
268:     <span class="ruby-keyword kw">end</span> 
269:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List5</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk,tb_caseendbooks_arbitBookNum,tb_caseendbooks_decideDate,tb_caseendbooks_endStyle from v_case_query1_list5s  where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
270:     <span class="ruby-ivar">@c_l</span>=<span class="ruby-constant">VCaseQuery1List5</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases_recevice_code from v_case_query1_list5s where #{c}&quot;</span>)
271:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002414" class="method-detail">
        <a name="M002414"></a>

        <div class="method-heading">
          <a href="#M002414" class="method-signature">
          <span class="method-name">list_50</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002414-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002414-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 982</span>
 982:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_50</span>
 983:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
 984:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_50&quot;</span>
 985:     <span class="ruby-ivar">@hant_search_1</span>=[
 986:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],
 987:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],
 988:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'tb_cases_nowdate'</span>,<span class="ruby-value str">'立案日期'</span>,<span class="ruby-value str">'text'</span>,[]],
 989:       [<span class="ruby-value str">'number'</span>,<span class="ruby-value str">'IFNULL(tb_cases_amount,0)'</span>,<span class="ruby-value str">'总争议金额'</span>,<span class="ruby-value str">'text'</span>,[]],
 990:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_parties_partytype'</span>,<span class="ruby-value str">'当事人类型'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">&quot;申请人&quot;</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">&quot;被申请人&quot;</span>]]],
 991:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'当事人名称'</span>,<span class="ruby-value str">'text'</span>,[]]
 992:     ]
 993:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_case_code'</span>,
 994:       <span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'tb_cases_nowdate'</span>,<span class="ruby-value str">'IFNULL(tb_cases_amount,0)'</span>,<span class="ruby-value str">'tb_parties_partytype'</span>,
 995:       <span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>]
 996:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
 997:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
 998:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
 999:     <span class="ruby-keyword kw">end</span>
1000:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
1001:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
1002:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
1003:     <span class="ruby-keyword kw">end</span>
1004:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
1005:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
1006:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
1007:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
1008:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
1009:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
1010:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
1011:     <span class="ruby-keyword kw">end</span>
1012:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
1013:     <span class="ruby-keyword kw">else</span>
1014:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span> 
1015:     <span class="ruby-keyword kw">end</span>
1016:     
1017:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot; tb_cases_end_code&lt;&gt;'' and tb_cases_caseendbook_id_first is not null and tb_cases_state &gt;= '100' &quot;</span>
1018:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
1019:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
1020:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
1021:     <span class="ruby-keyword kw">end</span>
1022:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,<span class="ruby-node">&quot;select distinct tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk,tb_cases_amount,tb_cases_amount_1,tb_cases_amount_2   from v_case_query1_list1s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
1023:     <span class="ruby-ivar">@c_l</span>=<span class="ruby-constant">VCaseQuery1List1</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases_recevice_code from v_case_query1_list1s where #{c}&quot;</span>)
1024:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002396" class="method-detail">
        <a name="M002396"></a>

        <div class="method-heading">
          <a href="#M002396" class="method-signature">
          <span class="method-name">list_8</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
申请人、代理人信息查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002396-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002396-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 274</span>
274:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_8</span>
275:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
276:     <span class="ruby-ivar">@sss</span>={<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;申请人&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;被申请人&quot;</span>}
277:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_8&quot;</span>
278:     <span class="ruby-ivar">@hant_search_1</span>=[
279:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_partytype,\\\'\\\')'</span>,<span class="ruby-value str">'申(被)请人类型'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">&quot;申请人&quot;</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">&quot;被申请人&quot;</span>]]],
280:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_commissary,\\\'\\\')'</span>,<span class="ruby-value str">'法定代表人'</span>,<span class="ruby-value str">'text'</span>,[]],
281:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'申(被)请人名称'</span>,<span class="ruby-value str">'text'</span>,[]],
282:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_addr,\\\'\\\')'</span>,<span class="ruby-value str">'申(被)请人地址'</span>,<span class="ruby-value str">'text'</span>,[]],
283:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_postcode,\\\'\\\')'</span>,<span class="ruby-value str">'申(被)请人邮政编码'</span>,<span class="ruby-value str">'text'</span>,[]],
284:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_tel,\\\'\\\')'</span>,<span class="ruby-value str">'申(被)请人电话'</span>,<span class="ruby-value str">'text'</span>,[]],
285:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_parties_email,\\\'\\\')'</span>,<span class="ruby-value str">'申(被)Email'</span>,<span class="ruby-value str">'text'</span>,[]],
286:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_name,\\\'\\\')'</span>,<span class="ruby-value str">'代理人名称'</span>,<span class="ruby-value str">'text'</span>,[]],
287:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_company,\\\'\\\')'</span>,<span class="ruby-value str">'所在单位'</span>,<span class="ruby-value str">'text'</span>,[]],
288:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_addr,\\\'\\\')'</span>,<span class="ruby-value str">'代理人地址'</span>,<span class="ruby-value str">'text'</span>,[]],
289:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_postcode,\\\'\\\')'</span>,<span class="ruby-value str">'代理人邮政编码'</span>,<span class="ruby-value str">'text'</span>,[]],
290:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_tel,\\\'\\\')'</span>,<span class="ruby-value str">'代理人电话'</span>,<span class="ruby-value str">'text'</span>,[]],
291:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_email,\\\'\\\')'</span>,<span class="ruby-value str">'代理人Email'</span>,<span class="ruby-value str">'text'</span>,[]],
292:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_agents_mobiletel,\\\'\\\')'</span>,<span class="ruby-value str">'代理人手机'</span>,<span class="ruby-value str">'text'</span>,[]],
293:     ]
294:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'IFNULL(tb_parties_commissary,\\\'\\\')'</span>,
295:       <span class="ruby-value str">'IFNULL(tb_parties_commissary,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_parties_partyname,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_parties_addr,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_parties_postcode,\\\'\\\')'</span>,
296:       <span class="ruby-value str">'IFNULL(tb_parties_postcode,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_parties_tel,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_parties_email,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_agents_name,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_agents_company,\\\'\\\')'</span>,
297:       <span class="ruby-value str">'IFNULL(tb_agents_addr,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_agents_postcode,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_agents_tel,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_agents_email,\\\'\\\')'</span>,<span class="ruby-value str">'IFNULL(tb_agents_mobiletel,\\\'\\\')'</span>
298:     ]
299:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
300:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
301:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
302:     <span class="ruby-keyword kw">end</span>
303:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
304:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
305:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
306:     <span class="ruby-keyword kw">end</span>
307:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
308:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
309:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
310:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
311:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
312:     <span class="ruby-keyword kw">end</span>
313:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
314:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
315:     <span class="ruby-keyword kw">else</span>
316:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span> 
317:     <span class="ruby-keyword kw">end</span>
318:     
319:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_state&gt;=4 and tb_cases_clerk='#{session[:user_code]}'&quot;</span>
320:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
321:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
322:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
323:     <span class="ruby-keyword kw">end</span>
324:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:v_case_query1_list8s</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
325:     <span class="ruby-ivar">@c_l</span>=<span class="ruby-constant">VCaseQuery1List8</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c</span>)
326:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002401" class="method-detail">
        <a name="M002401"></a>

        <div class="method-heading">
          <a href="#M002401" class="method-signature">
          <span class="method-name">list_every</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
每个助理的案件 详细情况信息
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002401-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002401-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 490</span>
490:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_every</span>
491:     <span class="ruby-identifier">arr_date</span> = <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;-&quot;</span>)
492:     <span class="ruby-ivar">@arr_date1</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">n_to_c</span>(<span class="ruby-identifier">arr_date</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">to_i</span>)
493:     <span class="ruby-ivar">@agent_typ</span>={<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;申请方&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;被申请方&quot;</span>}
494:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>}
495:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;case_now_clerk&quot;</span>
496:     <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;tb_cases_nowdate,tb_cases_general_code asc&quot;</span>
497:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-value">10000</span>
498:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_clerk='#{params[:user_code]}' and tb_cases_state&gt;=4 and tb_cases_state&lt;100  and tb_cases_end_code = '' &quot;</span>
499:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,<span class="ruby-node">&quot;select distinct tb_cases_recevice_code,tb_cases_state,tb_cases_general_code,tb_cases_case_code,tb_cases_end_code,tb_cases_clerk  from v_case_query1_list1s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
500:     <span class="ruby-comment cmt">#    @total_m=TbCase.sum(:amount,:conditions=&gt;[&quot;used='Y' and clerk=? and state&gt;=4 and state&lt;100  and end_code=''&quot;,params[:user_code]])</span>
501:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002411" class="method-detail">
        <a name="M002411"></a>

        <div class="method-heading">
          <a href="#M002411" class="method-signature">
          <span class="method-name">list_everyone</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
每个助理的咨询立案信息情况
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002411-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002411-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 910</span>
910:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_everyone</span>
911:     <span class="ruby-ivar">@date1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date1</span>]
912:     <span class="ruby-ivar">@date2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date2</span>]
913:     <span class="ruby-ivar">@agent_typ</span>={<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;申请方&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;被申请方&quot;</span>}
914:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>}
915:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;case_now_clerk&quot;</span>
916:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
917:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
918:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;nowdate,general_code asc&quot;</span>
919:     <span class="ruby-keyword kw">end</span>
920:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
921:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
922:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-value">20000</span>
923:     <span class="ruby-keyword kw">end</span>
924:     <span class="ruby-identifier">c</span> =<span class="ruby-value str">&quot;(tb_cases.state != -2)  and tb_cases.clerk_2=? and tb_cases.used='Y' and tb_cases.receivedate&gt;=? and tb_cases.receivedate&lt;=?&quot;</span>
925:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_cases</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-identifier">c</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:user_code</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date2</span>]],<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
926:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002415" class="method-detail">
        <a name="M002415"></a>

        <div class="method-heading">
          <a href="#M002415" class="method-signature">
          <span class="method-name">marke_2</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002415-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002415-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 1026</span>
1026:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">marke_2</span>
1027:     <span class="ruby-comment cmt">#    @tbmark=TbDictionary.find(:all,:conditions=&gt;[&quot;typ_code='8160' and used='Y' and state='Y' and data_parent=''&quot;])</span>
1028:     <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_recevice_code</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:recevice_code</span>])
1029:     <span class="ruby-ivar">@case_code</span>=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">case_code</span>
1030:     <span class="ruby-ivar">@user</span>=<span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;code=?&quot;</span>,<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:user_code</span>]]).<span class="ruby-identifier">name</span>
1031:     <span class="ruby-identifier">arr_date</span> = <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;-&quot;</span>)
1032:     <span class="ruby-identifier">arr_date</span>[<span class="ruby-value">1</span>]=<span class="ruby-identifier">arr_date</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">to_i</span>.<span class="ruby-identifier">to_s</span>
1033:     <span class="ruby-identifier">arr_date</span>[<span class="ruby-value">2</span>]=<span class="ruby-identifier">arr_date</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">to_i</span>.<span class="ruby-identifier">to_s</span>
1034:     <span class="ruby-ivar">@send_time</span>=<span class="ruby-identifier">arr_date</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">to_i</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;年&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">arr_date</span>[<span class="ruby-value">1</span>]<span class="ruby-operator">+</span><span class="ruby-value str">&quot;月&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">arr_date</span>[<span class="ruby-value">2</span>]<span class="ruby-operator">+</span><span class="ruby-value str">&quot;日&quot;</span>
1035:     <span class="ruby-ivar">@casearbitman</span>=<span class="ruby-constant">TbCasearbitman</span>.<span class="ruby-identifier">find_by_sql</span>([<span class="ruby-value str">&quot;select tb_arbitmen.code as code,tb_arbitmen.name as name ,tb_dictionaries.data_text as arbitmantype_name from tb_casearbitmen,tb_arbitmen,tb_dictionaries where tb_casearbitmen.used='Y' and tb_dictionaries.typ_code='0014' and tb_casearbitmen.recevice_code=?  and tb_casearbitmen.arbitman=tb_arbitmen.code and tb_casearbitmen.arbitmantype=tb_dictionaries.data_val order by tb_casearbitmen.arbitmantype&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:recevice_code</span>]])
1036:     <span class="ruby-ivar">@tbmark1</span>=<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;typ_code='8160' and used='Y' and state='Y'&quot;</span>])
1037:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002416" class="method-detail">
        <a name="M002416"></a>

        <div class="method-heading">
          <a href="#M002416" class="method-signature">
          <span class="method-name">remun_list</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002416-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002416-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/case_query1_controller.rb, line 1039</span>
1039:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remun_list</span>
1040:     <span class="ruby-ivar">@rc</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:recevice_code</span>]
1041:     <span class="ruby-ivar">@bank_typ</span> = {<span class="ruby-value str">&quot;0001&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;本地&quot;</span>, <span class="ruby-value str">&quot;0002&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;外地&quot;</span>}
1042:     <span class="ruby-ivar">@typ1</span> = {<span class="ruby-value str">&quot;0001&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;仲裁员&quot;</span>, <span class="ruby-value str">&quot;0002&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;助理&quot;</span>, <span class="ruby-value str">&quot;0003&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;校核人员&quot;</span>, <span class="ruby-value str">&quot;0004&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;员工&quot;</span>}
1043:     <span class="ruby-ivar">@typ2</span> = {<span class="ruby-value str">&quot;1&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;报酬&quot;</span>, <span class="ruby-value str">&quot;2&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;奖励&quot;</span>, <span class="ruby-value str">&quot;3&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;扣减&quot;</span>, <span class="ruby-value str">&quot;4&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;办案其它报酬&quot;</span>, <span class="ruby-value str">&quot;5&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;出差补助合计&quot;</span>}
1044:     
1045:     <span class="ruby-ivar">@case</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_recevice_code</span>(<span class="ruby-ivar">@rc</span>)
1046:     <span class="ruby-ivar">@tb_extend</span> = <span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>{<span class="ruby-identifier">:recevice_code</span> =<span class="ruby-operator">&gt;</span><span class="ruby-ivar">@rc</span>, <span class="ruby-identifier">:used=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'Y'</span>})
1047:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>