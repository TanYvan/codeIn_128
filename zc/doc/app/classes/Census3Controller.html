<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Census3Controller</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Census3Controller</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/controllers/census3_controller_rb.html">
                app/controllers/census3_controller.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="ApplicationController.html">
                ApplicationController
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
niell 2009-7-7 按仲裁程序统计 2009-12-30
询问李后去掉统计类型
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000072">again</a>&nbsp;&nbsp;
      <a href="#M000081">c_list</a>&nbsp;&nbsp;
      <a href="#M000031">list3</a>&nbsp;&nbsp;
      <a href="#M000049">list33_8</a>&nbsp;&nbsp;
      <a href="#M000051">list33_81</a>&nbsp;&nbsp;
      <a href="#M000053">list33_8a</a>&nbsp;&nbsp;
      <a href="#M000079">list34_a</a>&nbsp;&nbsp;
      <a href="#M000035">list3_1</a>&nbsp;&nbsp;
      <a href="#M000065">list3_10</a>&nbsp;&nbsp;
      <a href="#M000066">list3_10a</a>&nbsp;&nbsp;
      <a href="#M000067">list3_11</a>&nbsp;&nbsp;
      <a href="#M000068">list3_11a</a>&nbsp;&nbsp;
      <a href="#M000069">list3_11b</a>&nbsp;&nbsp;
      <a href="#M000073">list3_12</a>&nbsp;&nbsp;
      <a href="#M000075">list3_13</a>&nbsp;&nbsp;
      <a href="#M000076">list3_14</a>&nbsp;&nbsp;
      <a href="#M000070">list3_15</a>&nbsp;&nbsp;
      <a href="#M000071">list3_15a</a>&nbsp;&nbsp;
      <a href="#M000082">list3_16</a>&nbsp;&nbsp;
      <a href="#M000036">list3_1_a</a>&nbsp;&nbsp;
      <a href="#M000037">list3_2</a>&nbsp;&nbsp;
      <a href="#M000038">list3_3</a>&nbsp;&nbsp;
      <a href="#M000033">list3_31</a>&nbsp;&nbsp;
      <a href="#M000034">list3_32</a>&nbsp;&nbsp;
      <a href="#M000077">list3_33</a>&nbsp;&nbsp;
      <a href="#M000078">list3_34</a>&nbsp;&nbsp;
      <a href="#M000039">list3_3a</a>&nbsp;&nbsp;
      <a href="#M000040">list3_4</a>&nbsp;&nbsp;
      <a href="#M000041">list3_5</a>&nbsp;&nbsp;
      <a href="#M000042">list3_6</a>&nbsp;&nbsp;
      <a href="#M000043">list3_61</a>&nbsp;&nbsp;
      <a href="#M000044">list3_62</a>&nbsp;&nbsp;
      <a href="#M000045">list3_7</a>&nbsp;&nbsp;
      <a href="#M000046">list3_71</a>&nbsp;&nbsp;
      <a href="#M000047">list3_72</a>&nbsp;&nbsp;
      <a href="#M000048">list3_8</a>&nbsp;&nbsp;
      <a href="#M000050">list3_81</a>&nbsp;&nbsp;
      <a href="#M000052">list3_8a</a>&nbsp;&nbsp;
      <a href="#M000054">list3_8b</a>&nbsp;&nbsp;
      <a href="#M000055">list3_8c</a>&nbsp;&nbsp;
      <a href="#M000056">list3_8d</a>&nbsp;&nbsp;
      <a href="#M000057">list3_8e</a>&nbsp;&nbsp;
      <a href="#M000058">list3_8f</a>&nbsp;&nbsp;
      <a href="#M000059">list3_9</a>&nbsp;&nbsp;
      <a href="#M000064">list3_91</a>&nbsp;&nbsp;
      <a href="#M000060">list3_a1</a>&nbsp;&nbsp;
      <a href="#M000061">list3_a2</a>&nbsp;&nbsp;
      <a href="#M000063">list3_a3</a>&nbsp;&nbsp;
      <a href="#M000062">list3_a4</a>&nbsp;&nbsp;
      <a href="#M000032">list3a</a>&nbsp;&nbsp;
      <a href="#M000080">list4</a>&nbsp;&nbsp;
      <a href="#M000083">list_32</a>&nbsp;&nbsp;
      <a href="#M000074">list_j</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000072" class="method-detail">
        <a name="M000072"></a>

        <div class="method-heading">
          <a href="#M000072" class="method-signature">
          <span class="method-name">again</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
“律师事务所统计”页面再统计功能。
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000072-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000072-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 1040</span>
1040:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">again</span>
1041: 
1042:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;01&quot;</span> <span class="ruby-comment cmt"># 律师事务所查询</span>
1043:       <span class="ruby-ivar">@a_id</span> = <span class="ruby-constant">VAgent</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct recevice_code&quot;</span>, <span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;nowdate&gt;=? and nowdate&lt;=? and company = ? &quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:company</span>]])
1044:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;02&quot;</span> <span class="ruby-comment cmt"># 律师查询</span>
1045:       <span class="ruby-ivar">@a_id</span> = <span class="ruby-constant">VAgent</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct recevice_code&quot;</span>, <span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;status='0001' and nowdate&gt;=? and nowdate&lt;=? and company = ? and name = ? &quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:company</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:name</span>]])
1046:     <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt"># 仲裁员</span>
1047:       <span class="ruby-ivar">@a_id</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct recevice_code&quot;</span>, <span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;code is not null and  nowdate&gt;=? and nowdate&lt;=? and code = ? &quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]])
1048:     <span class="ruby-keyword kw">end</span>
1049:     <span class="ruby-ivar">@amount_count</span> = <span class="ruby-value">0</span>
1050:     <span class="ruby-ivar">@rc</span> = <span class="ruby-value str">&quot;&quot;</span>
1051:     <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">b</span> <span class="ruby-keyword kw">in</span> <span class="ruby-ivar">@a_id</span>
1052:       <span class="ruby-ivar">@rc</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">recevice_code</span> <span class="ruby-operator">+</span> <span class="ruby-value str">','</span>
1053:       <span class="ruby-identifier">current_case</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot; recevice_code = '#{b.recevice_code}' and used='Y' &quot;</span>)
1054:       <span class="ruby-ivar">@amount_count</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">current_case</span>.<span class="ruby-identifier">amount</span>
1055:     <span class="ruby-keyword kw">end</span>
1056: 
1057:     <span class="ruby-comment cmt">#案件大小分类统计</span>
1058:     <span class="ruby-ivar">@basecensus1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot; used='Y' and recevice_code in (#{@rc.chop}) &quot;</span>,<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;casetype_num&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;casetype_num&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;casetype_num,count(casetype_num) as num&quot;</span>)
1059:     <span class="ruby-ivar">@total1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;used='Y' and recevice_code in (#{@rc.chop}) &quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;count(casetype_num) as t1&quot;</span>)
1060: 
1061:     <span class="ruby-ivar">@basecensus2</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot; used='Y' and recevice_code in (#{@rc.chop}) &quot;</span>,<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;casetype_num&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;casetype_num&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;casetype_num2,count(casetype_num2) as num2&quot;</span>)
1062:     <span class="ruby-ivar">@total2</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;used='Y' and recevice_code in (#{@rc.chop}) &quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;count(casetype_num2) as t2&quot;</span>)
1063: 
1064:     <span class="ruby-comment cmt"># 当事人地区统计</span>
1065:     <span class="ruby-ivar">@re1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select area,COUNT(recevice_code) as c from v_parties where recevice_code IN (#{@rc.chop})  group by area&quot;</span>)
1066: 
1067:     <span class="ruby-comment cmt"># 当事人行业统计</span>
1068: 
1069:     <span class="ruby-comment cmt"># 仲裁条款情况</span>
1070:     <span class="ruby-ivar">@type</span> = <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;typ_code='0004' and state='Y' and used='Y' &quot;</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;data_val,data_text&quot;</span> )
1071: 
1072:     <span class="ruby-comment cmt"># 涉外案件、国内案件数量</span>
1073:     <span class="ruby-ivar">@case_count1</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;(aribitprog_num='0003' or aribitprog_num='0004' or aribitprog_num='0007' or aribitprog_num='0008') and  recevice_code in (#{@rc.chop}) &quot;</span> )
1074:     <span class="ruby-ivar">@case_count2</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;(aribitprog_num='0001' or aribitprog_num='0002' or aribitprog_num='0005' or aribitprog_num='0006') and  recevice_code in (#{@rc.chop}) &quot;</span> )
1075: 
1076:     <span class="ruby-comment cmt"># 代（申）、代（被）情况</span>
1077:     <span class="ruby-ivar">@agent1</span> = <span class="ruby-constant">TbAgent</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;recevice_code in (#{@rc.chop})  and used = 'Y' and partytype='1' &quot;</span>,<span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;recevice_code,name,count(NAME)&quot;</span> ,<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;name&quot;</span>)
1078:     <span class="ruby-ivar">@agent2</span> = <span class="ruby-constant">TbAgent</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;recevice_code in (#{@rc.chop})  and used = 'Y' and partytype='2' &quot;</span>,<span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;recevice_code,name,count(NAME)&quot;</span> ,<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;name&quot;</span>)
1079: 
1080: 
1081:     <span class="ruby-identifier">render</span> <span class="ruby-value str">&quot;census3/_genxin&quot;</span>
1082:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000081" class="method-detail">
        <a name="M000081"></a>

        <div class="method-heading">
          <a href="#M000081" class="method-signature">
          <span class="method-name">c_list</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
核校工作统计 校核人员所有案件
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000081-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000081-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 1424</span>
1424:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">c_list</span>
1425:     <span class="ruby-ivar">@da1</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:da1</span>]
1426:     <span class="ruby-ivar">@da2</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:da2</span>]
1427:     <span class="ruby-ivar">@order</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
1428:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
1429:       <span class="ruby-ivar">@order</span> = <span class="ruby-value str">&quot;right(c.case_code,7) desc&quot;</span>
1430:     <span class="ruby-keyword kw">end</span>
1431:     <span class="ruby-ivar">@endStyle</span> = <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;typ_code='8117' and state='Y'&quot;</span> ])
1432:     <span class="ruby-ivar">@arbitmantype</span> = {<span class="ruby-value str">&quot;0001&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;独&quot;</span>,<span class="ruby-value str">&quot;0002&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;首&quot;</span>,<span class="ruby-value str">&quot;0003&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;申&quot;</span>,<span class="ruby-value str">&quot;0004&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;被&quot;</span>}
1433:     <span class="ruby-identifier">sql</span> = <span class="ruby-node">&quot;
1434:       select distinct c.recevice_code, c.state, c.general_code, c.case_code, c.end_code, c.clerk, e.decidedate, e.endstyle
1435:       from tb_check_staffs s
1436:       left join tb_cases c on c.recevice_code = s.recevice_code and c.used = 'Y'
1437:       left join tb_caseendbooks e on s.recevice_code = e.recevice_code and e.used = 'Y'
1438:       where s.used = 'Y' and s.check_time &lt;= '#{@da2}' and s.check_time &gt;= '#{@da1}' and s.staff = '#{params[:user_code]}'
1439:       order by #{@order}
1440:     &quot;</span>
1441:     <span class="ruby-ivar">@case</span> = <span class="ruby-constant">VCaseQuery1List5</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-identifier">sql</span>);
1442:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000031" class="method-detail">
        <a name="M000031"></a>

        <div class="method-heading">
          <a href="#M000031" class="method-signature">
          <span class="method-name">list3</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000031-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000031-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 5</span>
 5:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3</span>
 6:     <span class="ruby-ivar">@datestyle</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>]
 7:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@datestyle</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
 8:       <span class="ruby-ivar">@datestyle</span>=<span class="ruby-value str">'02'</span>
 9:     <span class="ruby-keyword kw">end</span>
10:     <span class="ruby-ivar">@dispute</span>={<span class="ruby-value str">&quot;01&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案时间段&quot;</span>,<span class="ruby-value str">&quot;02&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;结案时间段&quot;</span>,<span class="ruby-value str">&quot;03&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案结案时间段&quot;</span>}  <span class="ruby-comment cmt">#时间段类型</span>
11:     <span class="ruby-ivar">@date1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date1</span>]
12:     <span class="ruby-ivar">@date2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date2</span>]
13:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@date1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@date2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
14:       <span class="ruby-ivar">@date1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
15:       <span class="ruby-ivar">@date2</span>=<span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>
16:     <span class="ruby-keyword kw">end</span>
17:     <span class="ruby-ivar">@case_type</span>=<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;state='Y' and typ_code='0001'&quot;</span>) <span class="ruby-comment cmt">#案件类型</span>
18:     <span class="ruby-ivar">@endstyle</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:endstyle</span>]
19:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@endstyle</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@endstyle</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
20:       <span class="ruby-ivar">@endstyle</span> = <span class="ruby-value str">&quot;&quot;</span>
21:       <span class="ruby-ivar">@endstyle_sql</span>=<span class="ruby-value str">&quot; 1=1 &quot;</span>
22:     <span class="ruby-keyword kw">else</span>
23:       <span class="ruby-ivar">@endstyle_sql</span>=<span class="ruby-node">&quot; b.endStyle='#{@endstyle}' &quot;</span>
24:     <span class="ruby-keyword kw">end</span>
25:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
26:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@date1</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@date2</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@endstyle_sql</span>)<span class="ruby-operator">==</span><span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@dispute</span>)<span class="ruby-operator">==</span><span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@date1</span>)<span class="ruby-operator">==</span><span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@date2</span>)<span class="ruby-operator">==</span><span class="ruby-keyword kw">false</span>
27:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>]=<span class="ruby-value str">&quot;请重新选择！&quot;</span>
28:       <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;list3&quot;</span>
29:     <span class="ruby-keyword kw">end</span>
30:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000049" class="method-detail">
        <a name="M000049"></a>

        <div class="method-heading">
          <a href="#M000049" class="method-signature">
          <span class="method-name">list33_8</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
优化当事人统计列表页
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000049-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000049-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 635</span>
635:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list33_8</span>
636:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
637:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
638:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
639:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
640:     <span class="ruby-keyword kw">end</span>
641:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
642:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
643:     <span class="ruby-keyword kw">end</span>
644:     <span class="ruby-ivar">@agent</span>=<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0004' and state='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>)
645:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000051" class="method-detail">
        <a name="M000051"></a>

        <div class="method-heading">
          <a href="#M000051" class="method-signature">
          <span class="method-name">list33_81</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000051-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000051-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 659</span>
659:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list33_81</span>
660:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
661:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
662:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
663:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
664:     <span class="ruby-keyword kw">end</span>
665:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
666:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
667:     <span class="ruby-keyword kw">end</span>
668:     <span class="ruby-ivar">@agent</span>=<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0004' and state='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>)
669:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000053" class="method-detail">
        <a name="M000053"></a>

        <div class="method-heading">
          <a href="#M000053" class="method-signature">
          <span class="method-name">list33_8a</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000053-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000053-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 676</span>
676:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list33_8a</span>
677:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:r</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;r1&quot;</span>
678:       <span class="ruby-identifier">rrr</span> = <span class="ruby-value str">&quot; and r1=1 &quot;</span>
679:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:r</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;r2&quot;</span>
680:       <span class="ruby-identifier">rrr</span> = <span class="ruby-value str">&quot; and r2=1 &quot;</span>
681:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:r</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;r3&quot;</span>
682:       <span class="ruby-identifier">rrr</span> = <span class="ruby-value str">&quot; and r3=1 &quot;</span>
683:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:r</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;r4&quot;</span>
684:       <span class="ruby-identifier">rrr</span> = <span class="ruby-value str">&quot; and r4=1 &quot;</span>
685:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:r</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;r5&quot;</span>
686:       <span class="ruby-identifier">rrr</span> = <span class="ruby-value str">&quot; and r5=1 &quot;</span>
687:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:r</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;r6&quot;</span>
688:       <span class="ruby-identifier">rrr</span> = <span class="ruby-value str">&quot; and r6=1 &quot;</span>
689:     <span class="ruby-keyword kw">else</span>
690:       <span class="ruby-identifier">rrr</span>=<span class="ruby-value str">&quot;&quot;</span>
691:     <span class="ruby-keyword kw">end</span>
692:     <span class="ruby-ivar">@v_list</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>([<span class="ruby-node">&quot;select tb_cases.recevice_code,tb_cases.case_code,tb_cases.clerk,tb_cases.nowdate,tb_cases.amount from tb_cases,party_regions where party_regions.nowdate&gt;=? and party_regions.nowdate&lt;=? and party_regions.agent=? #{rrr} and  party_regions.recevice_code=tb_cases.recevice_code order by right(tb_cases.case_code,7)&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:agent</span>]])
693:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000079" class="method-detail">
        <a name="M000079"></a>

        <div class="method-heading">
          <a href="#M000079" class="method-signature">
          <span class="method-name">list34_a</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
查看立案阶段案件数量明细
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000079-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000079-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 1383</span>
1383:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list34_a</span>
1384:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:da1</span>]
1385:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:da2</span>]
1386:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'1'</span>
1387:       <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and nowdate&gt;=? and nowdate&lt;=? and state&gt;=4&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7) desc&quot;</span>)
1388:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'2'</span>
1389:       <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;c.used='Y' and c.state&gt;=4 and c.caseendbook_id_first is not null&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as c inner join tb_caseendbooks as s on s.used='Y' and s.decideDate&gt;='#{@d1}' and s.decideDate&lt;='#{@d2}' and c.recevice_code=s.recevice_code and s.endStyle='0001'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;c.recevice_code as recevice_code,c.nowdate as nowdate,c.case_code as case_code,c.amount as amount,c.clerk as clerk,s.decideDate as decideDate,s.arbitBookNum as arbitBookNum&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(c.case_code,7) desc&quot;</span>)
1390:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'3'</span>
1391:       <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;c.used='Y' and c.state&gt;=4 and c.caseendbook_id_first is not null&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as c inner join tb_caseendbooks as s on s.used='Y' and s.decideDate&gt;='#{@d1}' and s.decideDate&lt;='#{@d2}' and c.recevice_code=s.recevice_code and s.endStyle='0002'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;c.recevice_code as recevice_code,c.nowdate as nowdate,c.case_code as case_code,c.amount as amount,c.clerk as clerk,s.decideDate as decideDate,s.arbitBookNum as arbitBookNum&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(c.case_code,7) desc&quot;</span>)
1392:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'4'</span>
1393:       <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;c.used='Y' and c.state&gt;=4 and c.caseendbook_id_first is not null&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as c inner join tb_caseendbooks as s on s.used='Y' and s.decideDate&gt;='#{@d1}' and s.decideDate&lt;='#{@d2}' and c.recevice_code=s.recevice_code and s.endStyle='0003'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;c.recevice_code as recevice_code,c.nowdate as nowdate,c.case_code as case_code,c.amount as amount,c.clerk as clerk,s.decideDate as decideDate,s.arbitBookNum as arbitBookNum&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(c.case_code,7) desc&quot;</span>)
1394:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'5'</span>
1395:       <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;used='Y' and nowdate&gt;='#{@d1}' and nowdate&lt;='#{@d2}' and state=4 and caseorg_id_first is null and caseendbook_id_first is null&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;recevice_code,nowdate,case_code,amount,clerk&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7) desc&quot;</span>)
1396:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'6'</span>
1397:       <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;used='Y' and nowdate&gt;='#{@d1}' and nowdate&lt;='#{@d2}' and state=5 and caseorg_id_first is not null and sitting_id_first is null and caseendbook_id_first is null&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;recevice_code,nowdate,case_code,amount,clerk&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7) desc&quot;</span>)
1398:     <span class="ruby-keyword kw">else</span>
1399:       <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;used='Y' and nowdate&gt;='#{@d1}' and nowdate&lt;='#{@d2}' and sitting_id_first is not null and caseendbook_id_first is null&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;recevice_code,nowdate,case_code,amount,clerk&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7) desc&quot;</span>)
1400:     <span class="ruby-keyword kw">end</span>
1401:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000035" class="method-detail">
        <a name="M000035"></a>

        <div class="method-heading">
          <a href="#M000035" class="method-signature">
          <span class="method-name">list3_1</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
当月业务数据统计
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000035-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000035-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 188</span>
188:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_1</span>
189:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
190:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
191:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
192:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
193:     <span class="ruby-keyword kw">end</span>
194:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
195:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
196:     <span class="ruby-keyword kw">end</span>
197:     <span class="ruby-ivar">@rep1</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0001' or aribitprog_num='0002' or aribitprog_num='0005' or aribitprog_num='0006')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
198:     <span class="ruby-ivar">@op</span>=<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8140' and state='Y' and used='Y' and data_val&lt;&gt;'0001'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>)
199:     <span class="ruby-ivar">@rep3</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0003' or aribitprog_num='0004' or aribitprog_num='0007' or aribitprog_num='0008') and case_type1='0001'&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
200:     <span class="ruby-ivar">@rep5_1</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0003' or aribitprog_num='0004' or aribitprog_num='0007' or aribitprog_num='0008')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
201:     <span class="ruby-identifier">rep6</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:amount_1</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0001' or aribitprog_num='0002' or aribitprog_num='0005' or aribitprog_num='0006')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
202:     <span class="ruby-ivar">@rep6</span> = <span class="ruby-identifier">rep6!</span>=<span class="ruby-keyword kw">nil</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">rep6</span><span class="ruby-operator">/</span><span class="ruby-value">100000000</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
203:     <span class="ruby-identifier">rep7</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:amount_2</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0001' or aribitprog_num='0002' or aribitprog_num='0005' or aribitprog_num='0006')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
204:     <span class="ruby-ivar">@rep7</span> = <span class="ruby-identifier">rep7!</span>=<span class="ruby-keyword kw">nil</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">rep7</span><span class="ruby-operator">/</span><span class="ruby-value">100000000</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
205:     <span class="ruby-identifier">rep8</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:amount_1</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0003' or aribitprog_num='0004' or aribitprog_num='0007' or aribitprog_num='0008')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
206:     <span class="ruby-ivar">@rep8</span> = <span class="ruby-identifier">rep8!</span>=<span class="ruby-keyword kw">nil</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">rep8</span><span class="ruby-operator">/</span><span class="ruby-value">100000000</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
207:     <span class="ruby-identifier">rep9</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:amount_2</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0003' or aribitprog_num='0004' or aribitprog_num='0007' or aribitprog_num='0008')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
208:     <span class="ruby-ivar">@rep9</span> = <span class="ruby-identifier">rep9!</span>=<span class="ruby-keyword kw">nil</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">rep9</span><span class="ruby-operator">/</span><span class="ruby-value">100000000</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
209: 
210:     <span class="ruby-identifier">rep10</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as cr from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0001' and e.recevice_code=c.recevice_code and c.used='Y' and e.id=c.caseendbook_id_first and (c.aribitprog_num='0001' or c.aribitprog_num='0002' or c.aribitprog_num='0005' or c.aribitprog_num='0006')&quot;</span>)
211:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rep10</span>.<span class="ruby-identifier">empty?</span>
212:       <span class="ruby-ivar">@rep10</span> = <span class="ruby-value">0</span>
213:     <span class="ruby-keyword kw">else</span>
214:       <span class="ruby-ivar">@rep10</span> = <span class="ruby-identifier">rep10</span>.<span class="ruby-identifier">length</span>
215:     <span class="ruby-keyword kw">end</span>
216:     <span class="ruby-identifier">rep11</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as cr from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0003' and e.recevice_code=c.recevice_code and c.used='Y'  and e.id=c.caseendbook_id_first and (c.aribitprog_num='0001' or c.aribitprog_num='0002' or c.aribitprog_num='0005' or c.aribitprog_num='0006')&quot;</span>)
217:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rep11</span>.<span class="ruby-identifier">empty?</span>
218:       <span class="ruby-ivar">@rep11</span> = <span class="ruby-value">0</span>
219:     <span class="ruby-keyword kw">else</span>
220:       <span class="ruby-ivar">@rep11</span> = <span class="ruby-identifier">rep11</span>.<span class="ruby-identifier">length</span>
221:     <span class="ruby-keyword kw">end</span>
222:     <span class="ruby-identifier">rep12</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as cr from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0002' and e.recevice_code=c.recevice_code and c.used='Y'  and e.id=c.caseendbook_id_first and (c.aribitprog_num='0001' or c.aribitprog_num='0002' or c.aribitprog_num='0005' or c.aribitprog_num='0006')&quot;</span>)
223:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rep12</span>.<span class="ruby-identifier">empty?</span>
224:       <span class="ruby-ivar">@rep12</span> = <span class="ruby-value">0</span>
225:     <span class="ruby-keyword kw">else</span>
226:       <span class="ruby-ivar">@rep12</span> = <span class="ruby-identifier">rep12</span>.<span class="ruby-identifier">length</span>
227:     <span class="ruby-keyword kw">end</span>
228: 
229:     <span class="ruby-identifier">rep13</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as cr from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0001' and e.recevice_code=c.recevice_code and c.used='Y' and e.id=c.caseendbook_id_first and (c.aribitprog_num='0003' or c.aribitprog_num='0004' or c.aribitprog_num='0007' or c.aribitprog_num='0008')&quot;</span>)
230:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rep13</span>.<span class="ruby-identifier">empty?</span>
231:       <span class="ruby-ivar">@rep13</span> = <span class="ruby-value">0</span>
232:     <span class="ruby-keyword kw">else</span>
233:       <span class="ruby-ivar">@rep13</span> = <span class="ruby-identifier">rep13</span>.<span class="ruby-identifier">length</span>
234:     <span class="ruby-keyword kw">end</span>
235:     <span class="ruby-identifier">rep14</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as cr from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0003' and e.recevice_code=c.recevice_code and c.used='Y' and e.id=c.caseendbook_id_first and (c.aribitprog_num='0003' or c.aribitprog_num='0004' or c.aribitprog_num='0007' or c.aribitprog_num='0008')&quot;</span>)
236:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rep14</span>.<span class="ruby-identifier">empty?</span>
237:       <span class="ruby-ivar">@rep14</span> = <span class="ruby-value">0</span>
238:     <span class="ruby-keyword kw">else</span>
239:       <span class="ruby-ivar">@rep14</span> = <span class="ruby-identifier">rep14</span>.<span class="ruby-identifier">length</span>
240:     <span class="ruby-keyword kw">end</span>
241:     <span class="ruby-identifier">rep15</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as cr from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0002' and e.recevice_code=c.recevice_code and c.used='Y' and e.id=c.caseendbook_id_first and (c.aribitprog_num='0003' or c.aribitprog_num='0004' or c.aribitprog_num='0007' or c.aribitprog_num='0008')&quot;</span>)
242:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rep15</span>.<span class="ruby-identifier">empty?</span>
243:       <span class="ruby-ivar">@rep15</span> = <span class="ruby-value">0</span>
244:     <span class="ruby-keyword kw">else</span>
245:       <span class="ruby-ivar">@rep15</span> = <span class="ruby-identifier">rep15</span>.<span class="ruby-identifier">length</span>
246:     <span class="ruby-keyword kw">end</span>
247:     <span class="ruby-ivar">@rep16</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and aribitprog_num='0002'&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
248:     <span class="ruby-ivar">@rep17</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and aribitprog_num='0004'&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
249: 
250:     <span class="ruby-ivar">@rep18</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and aribitprog_num='0001'&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
251:     <span class="ruby-ivar">@rep19</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and aribitprog_num='0003'&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
252: 
253:     <span class="ruby-ivar">@rep20</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0005' or aribitprog_num='0006')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
254:     <span class="ruby-ivar">@rep21</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0007' or aribitprog_num='0008')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
255: 
256:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000065" class="method-detail">
        <a name="M000065"></a>

        <div class="method-heading">
          <a href="#M000065" class="method-signature">
          <span class="method-name">list3_10</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
仲裁员人案按时间统计
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000065-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000065-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 894</span>
894:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_10</span>
895:     <span class="ruby-ivar">@state</span> = {<span class="ruby-value str">&quot;01&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;立案时间&quot;</span>, <span class="ruby-value str">&quot;02&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;组庭时间&quot;</span>, <span class="ruby-value str">&quot;03&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;结案时间&quot;</span>}
896:     <span class="ruby-ivar">@datestyle</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>]
897:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@datestyle</span>.<span class="ruby-identifier">blank?</span>
898:       <span class="ruby-ivar">@datestyle</span> = <span class="ruby-value str">'01'</span>
899:     <span class="ruby-keyword kw">end</span>
900:     <span class="ruby-ivar">@d1</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
901:     <span class="ruby-ivar">@d2</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
902:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
903:       <span class="ruby-ivar">@d1</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
904:     <span class="ruby-keyword kw">end</span>
905:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
906:       <span class="ruby-ivar">@d2</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
907:     <span class="ruby-keyword kw">end</span>
908:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@datestyle</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'01'</span> <span class="ruby-comment cmt">#立案时间</span>
909:       <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;code is not null and nowdate&gt;=? and nowdate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>], <span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;code&quot;</span>)
910:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@datestyle</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'02'</span><span class="ruby-comment cmt">#组庭时间</span>
911:       <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;code is not null and orgdate&gt;=? and orgdate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>], <span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;code&quot;</span>)
912:     <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt">#结案时间</span>
913:       <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;code is not null and decideDate&gt;=? and decideDate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>], <span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;code&quot;</span>)
914:     <span class="ruby-keyword kw">end</span>
915:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000066" class="method-detail">
        <a name="M000066"></a>

        <div class="method-heading">
          <a href="#M000066" class="method-signature">
          <span class="method-name">list3_10a</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000066-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000066-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 917</span>
917:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_10a</span>
918:     <span class="ruby-ivar">@date_style</span>={<span class="ruby-value str">'01'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案时间&quot;</span>,<span class="ruby-value str">'02'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭时间&quot;</span>,<span class="ruby-value str">'03'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;结案时间&quot;</span>}
919:     <span class="ruby-ivar">@name</span>=<span class="ruby-constant">TbArbitman</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and code=?&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]]).<span class="ruby-identifier">name</span>
920:     <span class="ruby-ivar">@datestyle</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>]
921:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
922:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
923:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'01'</span> <span class="ruby-comment cmt">#立案时间</span>
924:       <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct recevice_code&quot;</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;nowdate&gt;=? and nowdate&lt;=? and code=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
925:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'02'</span><span class="ruby-comment cmt">#组庭时间</span>
926:       <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct recevice_code&quot;</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;orgdate&gt;=? and orgdate&lt;=? and code=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
927:     <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt">#结案时间</span>
928:       <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct recevice_code&quot;</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;decideDate&gt;=? and decideDate&lt;=? and code=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
929:     <span class="ruby-keyword kw">end</span>
930:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000067" class="method-detail">
        <a name="M000067"></a>

        <div class="method-heading">
          <a href="#M000067" class="method-signature">
          <span class="method-name">list3_11</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
次数统计
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000067-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000067-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 933</span>
933:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_11</span>
934:     <span class="ruby-ivar">@state</span>={<span class="ruby-value str">&quot;01&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;代理人(律师事务所)&quot;</span>,<span class="ruby-value str">&quot;02&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;当事人&quot;</span>,<span class="ruby-value str">&quot;03&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;当事人＋代理人(律师事务所)&quot;</span>}
935:     <span class="ruby-ivar">@datestyle</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>]
936:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@datestyle</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
937:       <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>]=<span class="ruby-value str">'01'</span>
938:     <span class="ruby-keyword kw">end</span>
939:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
940:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
941:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
942:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">months_ago</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">to_date</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">:db</span>)
943:       <span class="ruby-ivar">@d1</span> = <span class="ruby-ivar">@d1</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-value">0</span>,<span class="ruby-value">7</span>)<span class="ruby-operator">+</span><span class="ruby-value str">&quot;-01&quot;</span>
944:     <span class="ruby-keyword kw">end</span>
945:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
946:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">months_since</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">to_date</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">:db</span>)
947:       <span class="ruby-ivar">@d2</span> = <span class="ruby-ivar">@d2</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-value">0</span>,<span class="ruby-value">7</span>)<span class="ruby-operator">+</span><span class="ruby-value str">&quot;-01&quot;</span>
948:     <span class="ruby-keyword kw">end</span>
949:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
950:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
951:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;recevice_code&quot;</span>
952:     <span class="ruby-keyword kw">end</span>
953:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
954:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
955:       <span class="ruby-comment cmt">#@page_lines=session[:lines]</span>
956:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-value">100</span>
957:     <span class="ruby-keyword kw">end</span>
958:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'01'</span> <span class="ruby-comment cmt">#代理人</span>
959:       <span class="ruby-identifier">sql1</span>=<span class="ruby-node">&quot;select company,mobiletel,tel,post_tel_code,addr,count(DISTINCT recevice_code) as ccc from v_agents where company&lt;&gt;'' and nowdate&gt;='#{@d1}' and nowdate&lt;='#{@d2}' group by company order by count(recevice_code) desc,company asc&quot;</span>
960:       <span class="ruby-ivar">@arbitman_case1_pages</span>,<span class="ruby-ivar">@arbitman_case1</span> =<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VAgent</span>,<span class="ruby-identifier">sql1</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
961:       <span class="ruby-ivar">@n1</span>=<span class="ruby-constant">VAgent</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;company&lt;&gt;'' and nowdate&gt;=? and nowdate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;company&quot;</span>)
962:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'02'</span><span class="ruby-comment cmt">#当事人</span>
963:       <span class="ruby-identifier">sql2</span>=<span class="ruby-node">&quot;select partyname,mobiletel,tel,post_tel_code,addr,count(DISTINCT recevice_code) as ccc from v_parties where nowdate&gt;='#{@d1}' and nowdate&lt;='#{@d2}' group by partyname order by count(recevice_code) desc,partyname asc&quot;</span>
964:       <span class="ruby-ivar">@arbitman_case2_pages</span>,<span class="ruby-ivar">@arbitman_case2</span> =<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VParty</span>,<span class="ruby-identifier">sql2</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
965:       <span class="ruby-ivar">@n2</span>=<span class="ruby-constant">VParty</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;nowdate&gt;=? and nowdate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;partyname&quot;</span>)
966:     <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt">#当事人+代理人</span>
967:       <span class="ruby-identifier">sql1</span>=<span class="ruby-node">&quot;select company,mobiletel,tel,post_tel_code,addr,count(DISTINCT recevice_code) as ccc from v_agents where company&lt;&gt;'' and nowdate&gt;='#{@d1}' and nowdate&lt;='#{@d2}' group by company order by count(recevice_code) desc,company asc&quot;</span>
968:       <span class="ruby-ivar">@arbitman_case1_pages</span>,<span class="ruby-ivar">@arbitman_case1</span> =<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VAgent</span>,<span class="ruby-identifier">sql1</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
969:       <span class="ruby-ivar">@n1</span>=<span class="ruby-constant">VAgent</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;company&lt;&gt;'' and nowdate&gt;=? and nowdate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;company&quot;</span>)
970:       <span class="ruby-identifier">sql2</span>=<span class="ruby-node">&quot;select partyname,mobiletel,tel,post_tel_code,addr,count(DISTINCT recevice_code) as ccc from v_parties where nowdate&gt;='#{@d1}' and nowdate&lt;='#{@d2}' group by partyname order by count(recevice_code) desc,partyname asc&quot;</span>
971:       <span class="ruby-ivar">@arbitman_case2_pages</span>,<span class="ruby-ivar">@arbitman_case2</span> =<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VParty</span>,<span class="ruby-identifier">sql2</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
972:       <span class="ruby-ivar">@n2</span>=<span class="ruby-constant">VParty</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;nowdate&gt;=? and nowdate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;partyname&quot;</span>)
973:     <span class="ruby-keyword kw">end</span>
974:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000068" class="method-detail">
        <a name="M000068"></a>

        <div class="method-heading">
          <a href="#M000068" class="method-signature">
          <span class="method-name">list3_11a</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
与某代理人有关的案件
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000068-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000068-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 977</span>
977:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_11a</span>
978:     <span class="ruby-ivar">@arbitman_case1</span> = <span class="ruby-constant">VAgent</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;nowdate&gt;=? and nowdate&lt;=? and company=?&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:name</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;recevice_code&quot;</span>)
979:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000069" class="method-detail">
        <a name="M000069"></a>

        <div class="method-heading">
          <a href="#M000069" class="method-signature">
          <span class="method-name">list3_11b</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
与某当事人有关的案件
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000069-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000069-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 982</span>
982:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_11b</span>
983:     <span class="ruby-ivar">@arbitman_case1</span> = <span class="ruby-constant">VParty</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;nowdate&gt;=? and nowdate&lt;=? and partyname=?&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:name</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;recevice_code&quot;</span>)
984:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000073" class="method-detail">
        <a name="M000073"></a>

        <div class="method-heading">
          <a href="#M000073" class="method-signature">
          <span class="method-name">list3_12</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
管辖权决定数统计
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000073-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000073-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 1086</span>
1086:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_12</span>
1087:     <span class="ruby-comment cmt"># 立案时间</span>
1088:     <span class="ruby-ivar">@d1</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
1089:     <span class="ruby-ivar">@d2</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
1090:     <span class="ruby-comment cmt"># 提出时间</span>
1091:     <span class="ruby-ivar">@d3</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d3</span>]
1092:     <span class="ruby-ivar">@d4</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d4</span>]
1093: 
1094:     <span class="ruby-keyword kw">if</span>(<span class="ruby-operator">!</span><span class="ruby-ivar">@d1</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@d2</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@d3</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@d4</span>.<span class="ruby-identifier">blank?</span>) <span class="ruby-comment cmt"># 同时不为空</span>
1095:       <span class="ruby-ivar">@juri</span> = <span class="ruby-constant">VJurion</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1096:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;nowdate&gt;=? and nowdate&lt;=? and request_date&gt;=? and request_date &lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>,<span class="ruby-ivar">@d3</span>,<span class="ruby-ivar">@d4</span>],
1097:         <span class="ruby-identifier">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;recevice_code&quot;</span>,
1098:         <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;right(case_code,7)&quot;</span>
1099:       )
1100:     <span class="ruby-keyword kw">elsif</span>(<span class="ruby-operator">!</span><span class="ruby-ivar">@d1</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@d2</span>.<span class="ruby-identifier">blank?</span>)
1101:       <span class="ruby-ivar">@juri</span> = <span class="ruby-constant">VJurion</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1102:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;nowdate&gt;=? and nowdate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>],
1103:         <span class="ruby-identifier">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;recevice_code&quot;</span>,
1104:         <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;right(case_code,7)&quot;</span>
1105:       )
1106:     <span class="ruby-keyword kw">elsif</span>(<span class="ruby-operator">!</span><span class="ruby-ivar">@d3</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@d4</span>.<span class="ruby-identifier">blank?</span>)
1107:       <span class="ruby-ivar">@juri</span> = <span class="ruby-constant">VJurion</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1108:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot; request_date&gt;=? and request_date &lt;=?&quot;</span>,<span class="ruby-ivar">@d3</span>,<span class="ruby-ivar">@d4</span>],
1109:         <span class="ruby-identifier">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;recevice_code&quot;</span>,
1110:         <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;right(case_code,7)&quot;</span>
1111:       )
1112:     <span class="ruby-keyword kw">else</span>
1113:       <span class="ruby-ivar">@juri</span> = []
1114:     <span class="ruby-keyword kw">end</span>
1115: 
1116:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000075" class="method-detail">
        <a name="M000075"></a>

        <div class="method-heading">
          <a href="#M000075" class="method-signature">
          <span class="method-name">list3_13</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
仲裁员回避件数
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000075-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000075-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 1149</span>
1149:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_13</span>
1150:     <span class="ruby-comment cmt"># 立案时间</span>
1151:     <span class="ruby-ivar">@d1</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
1152:     <span class="ruby-ivar">@d2</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
1153:     <span class="ruby-comment cmt"># 提出时间</span>
1154:     <span class="ruby-ivar">@d3</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d3</span>]
1155:     <span class="ruby-ivar">@d4</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d4</span>]
1156: 
1157:     <span class="ruby-keyword kw">if</span>(<span class="ruby-operator">!</span><span class="ruby-ivar">@d1</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@d2</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@d3</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@d4</span>.<span class="ruby-identifier">blank?</span>) <span class="ruby-comment cmt"># 同时不为空</span>
1158:       <span class="ruby-ivar">@vevite</span> = <span class="ruby-constant">TbEvite</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1159:         <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;distinct recevice_code&quot;</span>,
1160:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;used='Y' and recevice_code in (select recevice_code from tb_cases where nowdate&lt;= ? and nowdate &gt;=? and used='Y' ) and requestdate &lt;= ? and requestdate &gt;= ? &quot;</span>,<span class="ruby-ivar">@d2</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d4</span>,<span class="ruby-ivar">@d3</span> ],
1161:         <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;right(case_code,7) desc&quot;</span>
1162:       )
1163:     <span class="ruby-keyword kw">elsif</span>(<span class="ruby-operator">!</span><span class="ruby-ivar">@d1</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@d2</span>.<span class="ruby-identifier">blank?</span>)
1164:       <span class="ruby-ivar">@vevite</span> = <span class="ruby-constant">TbEvite</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1165:         <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;distinct recevice_code&quot;</span>,
1166:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;used='Y' and recevice_code in (select recevice_code from tb_cases where nowdate&lt;= ? and nowdate &gt;=? and used='Y' )&quot;</span>,<span class="ruby-ivar">@d2</span>,<span class="ruby-ivar">@d1</span> ],
1167:         <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;right(case_code,7) desc&quot;</span>
1168:       )
1169:     <span class="ruby-keyword kw">elsif</span>(<span class="ruby-operator">!</span><span class="ruby-ivar">@d3</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@d4</span>.<span class="ruby-identifier">blank?</span>)
1170:       <span class="ruby-ivar">@vevite</span> = <span class="ruby-constant">TbEvite</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1171:         <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;distinct recevice_code&quot;</span>,
1172:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;used='Y' and recevice_code in (select recevice_code from tb_cases where used='Y' ) and requestdate &lt;= ? and requestdate &gt;= ? &quot;</span>,<span class="ruby-ivar">@d4</span>,<span class="ruby-ivar">@d3</span> ],
1173:         <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;right(case_code,7) desc&quot;</span>
1174:       )
1175:     <span class="ruby-keyword kw">else</span>
1176:       <span class="ruby-ivar">@vevite</span> = []
1177:     <span class="ruby-keyword kw">end</span>
1178: 
1179:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000076" class="method-detail">
        <a name="M000076"></a>

        <div class="method-heading">
          <a href="#M000076" class="method-signature">
          <span class="method-name">list3_14</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
补正、更正裁决数
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000076-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000076-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 1182</span>
1182:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_14</span>
1183:     <span class="ruby-ivar">@state</span> = {<span class="ruby-value str">'01'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;补充裁决&quot;</span>,<span class="ruby-value str">'02'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;裁决书更正&quot;</span>}
1184: 
1185:     <span class="ruby-ivar">@datestyle</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>]
1186:     <span class="ruby-ivar">@typ</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:typ</span>]
1187:     <span class="ruby-ivar">@d1</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
1188:     <span class="ruby-ivar">@d2</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
1189: 
1190:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@datestyle</span>.<span class="ruby-identifier">blank?</span>
1191:       <span class="ruby-ivar">@datestyle</span> = <span class="ruby-value str">'01'</span>
1192:     <span class="ruby-keyword kw">end</span>
1193: 
1194:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@typ</span>.<span class="ruby-identifier">blank?</span>
1195:       <span class="ruby-ivar">@typ</span>=<span class="ruby-value str">'1'</span>
1196:     <span class="ruby-keyword kw">end</span>
1197: 
1198:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span>.<span class="ruby-identifier">blank?</span>
1199:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
1200:     <span class="ruby-keyword kw">end</span>
1201:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span>.<span class="ruby-identifier">blank?</span>
1202:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
1203:     <span class="ruby-keyword kw">end</span>
1204: 
1205:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@typ</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'1'</span> <span class="ruby-comment cmt"># 按照立案时间查询</span>
1206:       <span class="ruby-comment cmt">#补充裁决</span>
1207:       <span class="ruby-ivar">@casebook1</span>=<span class="ruby-constant">VCasebook</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;book_typ='0005' and nowdate&gt;=? and nowdate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
1208:       <span class="ruby-comment cmt">#更正裁决</span>
1209:       <span class="ruby-ivar">@casebook2</span>=<span class="ruby-constant">VCasebook</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;book_typ='0004' and nowdate&gt;=? and nowdate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
1210:     <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt"># 按照结案时间查询</span>
1211:       <span class="ruby-comment cmt">#补充裁决</span>
1212:       <span class="ruby-ivar">@casebook1</span>=<span class="ruby-constant">VCasebook</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;book_typ='0005' and decideDate&gt;=? and decideDate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
1213:       <span class="ruby-comment cmt">#更正裁决</span>
1214:       <span class="ruby-ivar">@casebook2</span>=<span class="ruby-constant">VCasebook</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;book_typ='0004' and decideDate&gt;=? and decideDate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
1215:     <span class="ruby-keyword kw">end</span>
1216:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000070" class="method-detail">
        <a name="M000070"></a>

        <div class="method-heading">
          <a href="#M000070" class="method-signature">
          <span class="method-name">list3_15</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000070-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000070-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 988</span>
 988:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_15</span>
 989:     <span class="ruby-ivar">@state</span>={<span class="ruby-value str">&quot;01&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;律师事务所&quot;</span>,<span class="ruby-value str">&quot;02&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;律师&quot;</span>,<span class="ruby-value str">&quot;03&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;仲裁员&quot;</span>}
 990:     <span class="ruby-ivar">@datestyle</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>]
 991:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@datestyle</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
 992:       <span class="ruby-ivar">@datestyle</span> = <span class="ruby-value str">'01'</span>
 993:     <span class="ruby-keyword kw">end</span>
 994:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
 995:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
 996:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
 997:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">months_ago</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">to_date</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">:db</span>)
 998:       <span class="ruby-ivar">@d1</span> = <span class="ruby-ivar">@d1</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-value">0</span>,<span class="ruby-value">7</span>)<span class="ruby-operator">+</span><span class="ruby-value str">&quot;-01&quot;</span>
 999:     <span class="ruby-keyword kw">end</span>
1000:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
1001:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">months_since</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">to_date</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">:db</span>)
1002:       <span class="ruby-ivar">@d2</span> = <span class="ruby-ivar">@d2</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-value">0</span>,<span class="ruby-value">7</span>)<span class="ruby-operator">+</span><span class="ruby-value str">&quot;-01&quot;</span>
1003:     <span class="ruby-keyword kw">end</span>
1004:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
1005:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
1006:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;count( DISTINCT recevice_code) desc&quot;</span>
1007:     <span class="ruby-keyword kw">end</span>
1008:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
1009:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
1010:       <span class="ruby-comment cmt">#@page_lines=session[:lines]</span>
1011:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-value">100</span>
1012:     <span class="ruby-keyword kw">end</span>
1013:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@datestyle</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'01'</span> <span class="ruby-comment cmt"># 律师事务所</span>
1014:       <span class="ruby-identifier">sql1</span> = <span class="ruby-node">&quot;select company,mobiletel,tel,post_tel_code,addr,COUNT(DISTINCT recevice_code) as num from v_agents where company like '%律师%' and nowdate&gt;='#{@d1}' and nowdate&lt;='#{@d2}' group by company order by #{@order}&quot;</span>
1015:       <span class="ruby-ivar">@arbitman_case1_pages</span>,<span class="ruby-ivar">@arbitman_case1</span> = <span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VAgent</span>,<span class="ruby-identifier">sql1</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
1016:       <span class="ruby-ivar">@n1</span> = <span class="ruby-constant">VAgent</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;company like '%律师%' and nowdate&gt;=? and nowdate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;company&quot;</span>)
1017:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@datestyle</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'02'</span> <span class="ruby-comment cmt"># 律师</span>
1018:       <span class="ruby-identifier">sql2</span> = <span class="ruby-node">&quot;SELECT name,company,mobiletel,tel,post_tel_code,addr,COUNT(DISTINCT recevice_code) as num FROM v_agents WHERE status='0001' AND nowdate&gt;='#{@d1}' and nowdate&lt;='#{@d2}' GROUP BY name,company order by #{@order}&quot;</span>
1019:       <span class="ruby-ivar">@arbitman_case2_pages</span>,<span class="ruby-ivar">@arbitman_case2</span> =<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VAgent</span>,<span class="ruby-identifier">sql2</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
1020:       <span class="ruby-ivar">@n2</span> = <span class="ruby-constant">VAgent</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;status='0001' and nowdate&gt;=? and nowdate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;name,company&quot;</span>)
1021:     <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt"># 仲裁员</span>
1022:       <span class="ruby-identifier">sql3</span> = <span class="ruby-node">&quot;select name,code,sex,mobiletel,telh,fax,count(DISTINCT recevice_code) as num from v_arbitman_cases WHERE code is not null AND nowdate&gt;='#{@d1}' and nowdate&lt;='#{@d2}' GROUP BY code order by #{@order}&quot;</span>
1023:       <span class="ruby-ivar">@arbitman_case2_pages</span>,<span class="ruby-ivar">@arbitman_case2</span> =<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VAgent</span>,<span class="ruby-identifier">sql3</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
1024:       <span class="ruby-ivar">@n3</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;code is not null  and nowdate&gt;=? and nowdate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;code&quot;</span>)
1025:     <span class="ruby-keyword kw">end</span>
1026:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000071" class="method-detail">
        <a name="M000071"></a>

        <div class="method-heading">
          <a href="#M000071" class="method-signature">
          <span class="method-name">list3_15a</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
与某律师事务所相关的案件
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000071-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000071-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 1029</span>
1029:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_15a</span>
1030:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;01&quot;</span> <span class="ruby-comment cmt"># 律师事务所查询</span>
1031:       <span class="ruby-ivar">@case_rc</span> = <span class="ruby-constant">VAgent</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct recevice_code&quot;</span>, <span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;nowdate&gt;=? and nowdate&lt;=? and company = ? &quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:company</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;recevice_code&quot;</span>)
1032:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;02&quot;</span> <span class="ruby-comment cmt"># 律师查询</span>
1033:       <span class="ruby-ivar">@case_rc</span> = <span class="ruby-constant">VAgent</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct recevice_code&quot;</span>, <span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;status='0001' and nowdate&gt;=? and nowdate&lt;=? and company = ? and name = ? &quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:company</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:name</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;recevice_code&quot;</span>)
1034:     <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt"># 仲裁员</span>
1035:       <span class="ruby-ivar">@case_rc</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct recevice_code&quot;</span>, <span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;code is not null and  nowdate&gt;=? and nowdate&lt;=? and code = ? &quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;recevice_code&quot;</span>)
1036:     <span class="ruby-keyword kw">end</span>
1037:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000082" class="method-detail">
        <a name="M000082"></a>

        <div class="method-heading">
          <a href="#M000082" class="method-signature">
          <span class="method-name">list3_16</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
在办案件仲裁员信息
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000082-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000082-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 1446</span>
1446:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_16</span>
1447:     <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select distinct tb_arbitmen.name as name from tb_cases,tb_casearbitmen,tb_arbitmen where tb_arbitmen.complete='N' and  tb_cases.caseorg_id_last=tb_casearbitmen.id and tb_casearbitmen.arbitman=tb_arbitmen.code and tb_cases.state&gt;=4 and tb_cases.caseendbook_id_first is null  and tb_cases.used='Y' and tb_casearbitmen.used='Y' order by tb_arbitmen.name&quot;</span>)
1448:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000036" class="method-detail">
        <a name="M000036"></a>

        <div class="method-heading">
          <a href="#M000036" class="method-signature">
          <span class="method-name">list3_1_a</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
当月业务数据统计——生成excel文档
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000036-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000036-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 259</span>
259:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_1_a</span>
260:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
261:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
262:     <span class="ruby-ivar">@rep1</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0001' or aribitprog_num='0002' or aribitprog_num='0005' or aribitprog_num='0006')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
263:     <span class="ruby-ivar">@op</span>=<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8140' and state='Y' and used='Y' and data_val&lt;&gt;'0001'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>)
264:     <span class="ruby-ivar">@rep3</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0003' or aribitprog_num='0004' or aribitprog_num='0007' or aribitprog_num='0008') and case_type1='0001'&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
265:     <span class="ruby-ivar">@rep5_1</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0003' or aribitprog_num='0004' or aribitprog_num='0007' or aribitprog_num='0008')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
266:     <span class="ruby-identifier">rep6</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:amount_1</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0001' or aribitprog_num='0002' or aribitprog_num='0005' or aribitprog_num='0006')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
267:     <span class="ruby-ivar">@rep6</span> = <span class="ruby-identifier">rep6</span><span class="ruby-operator">/</span><span class="ruby-value">100000000</span>
268:     <span class="ruby-identifier">rep7</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:amount_2</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0001' or aribitprog_num='0002' or aribitprog_num='0005' or aribitprog_num='0006')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
269:     <span class="ruby-ivar">@rep7</span> = <span class="ruby-identifier">rep7</span><span class="ruby-operator">/</span><span class="ruby-value">100000000</span>
270:     <span class="ruby-identifier">rep8</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:amount_1</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0003' or aribitprog_num='0004' or aribitprog_num='0007' or aribitprog_num='0008')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
271:     <span class="ruby-ivar">@rep8</span> = <span class="ruby-identifier">rep8</span><span class="ruby-operator">/</span><span class="ruby-value">100000000</span>
272:     <span class="ruby-identifier">rep9</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:amount_2</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0003' or aribitprog_num='0004' or aribitprog_num='0007' or aribitprog_num='0008')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
273:     <span class="ruby-ivar">@rep9</span> = <span class="ruby-identifier">rep9</span><span class="ruby-operator">/</span><span class="ruby-value">100000000</span>
274: 
275:     <span class="ruby-identifier">rep10</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as cr from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0001' and e.recevice_code=c.recevice_code and c.used='Y' and e.id=c.caseendbook_id_first and (c.aribitprog_num='0001' or c.aribitprog_num='0002' or c.aribitprog_num='0005' or c.aribitprog_num='0006')&quot;</span>)
276:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rep10</span>.<span class="ruby-identifier">empty?</span>
277:       <span class="ruby-ivar">@rep10</span> = <span class="ruby-value">0</span>
278:     <span class="ruby-keyword kw">else</span>
279:       <span class="ruby-ivar">@rep10</span> = <span class="ruby-identifier">rep10</span>.<span class="ruby-identifier">length</span>
280:     <span class="ruby-keyword kw">end</span>
281:     <span class="ruby-identifier">rep11</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as cr from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0003' and e.recevice_code=c.recevice_code and c.used='Y'  and e.id=c.caseendbook_id_first and (c.aribitprog_num='0001' or c.aribitprog_num='0002' or c.aribitprog_num='0005' or c.aribitprog_num='0006')&quot;</span>)
282:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rep11</span>.<span class="ruby-identifier">empty?</span>
283:       <span class="ruby-ivar">@rep11</span> = <span class="ruby-value">0</span>
284:     <span class="ruby-keyword kw">else</span>
285:       <span class="ruby-ivar">@rep11</span> = <span class="ruby-identifier">rep11</span>.<span class="ruby-identifier">length</span>
286:     <span class="ruby-keyword kw">end</span>
287:     <span class="ruby-identifier">rep12</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as cr from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0002' and e.recevice_code=c.recevice_code and c.used='Y'  and e.id=c.caseendbook_id_first and (c.aribitprog_num='0001' or c.aribitprog_num='0002' or c.aribitprog_num='0005' or c.aribitprog_num='0006')&quot;</span>)
288:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rep12</span>.<span class="ruby-identifier">empty?</span>
289:       <span class="ruby-ivar">@rep12</span> = <span class="ruby-value">0</span>
290:     <span class="ruby-keyword kw">else</span>
291:       <span class="ruby-ivar">@rep12</span> = <span class="ruby-identifier">rep12</span>.<span class="ruby-identifier">length</span>
292:     <span class="ruby-keyword kw">end</span>
293: 
294:     <span class="ruby-identifier">rep13</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as cr from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0001' and e.recevice_code=c.recevice_code and c.used='Y' and e.id=c.caseendbook_id_first and (c.aribitprog_num='0003' or c.aribitprog_num='0004' or c.aribitprog_num='0007' or c.aribitprog_num='0008')&quot;</span>)
295:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rep13</span>.<span class="ruby-identifier">empty?</span>
296:       <span class="ruby-ivar">@rep13</span> = <span class="ruby-value">0</span>
297:     <span class="ruby-keyword kw">else</span>
298:       <span class="ruby-ivar">@rep13</span> = <span class="ruby-identifier">rep13</span>.<span class="ruby-identifier">length</span>
299:     <span class="ruby-keyword kw">end</span>
300:     <span class="ruby-identifier">rep14</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as cr from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0003' and e.recevice_code=c.recevice_code and c.used='Y' and e.id=c.caseendbook_id_first and (c.aribitprog_num='0003' or c.aribitprog_num='0004' or c.aribitprog_num='0007' or c.aribitprog_num='0008')&quot;</span>)
301:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rep14</span>.<span class="ruby-identifier">empty?</span>
302:       <span class="ruby-ivar">@rep14</span> = <span class="ruby-value">0</span>
303:     <span class="ruby-keyword kw">else</span>
304:       <span class="ruby-ivar">@rep14</span> = <span class="ruby-identifier">rep14</span>.<span class="ruby-identifier">length</span>
305:     <span class="ruby-keyword kw">end</span>
306:     <span class="ruby-identifier">rep15</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as cr from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0002' and e.recevice_code=c.recevice_code and c.used='Y' and e.id=c.caseendbook_id_first and (c.aribitprog_num='0003' or c.aribitprog_num='0004' or c.aribitprog_num='0007' or c.aribitprog_num='0008')&quot;</span>)
307:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rep15</span>.<span class="ruby-identifier">empty?</span>
308:       <span class="ruby-ivar">@rep15</span> = <span class="ruby-value">0</span>
309:     <span class="ruby-keyword kw">else</span>
310:       <span class="ruby-ivar">@rep15</span> = <span class="ruby-identifier">rep15</span>.<span class="ruby-identifier">length</span>
311:     <span class="ruby-keyword kw">end</span>
312:     <span class="ruby-ivar">@rep16</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and aribitprog_num='0002'&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
313:     <span class="ruby-ivar">@rep17</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and aribitprog_num='0004'&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
314: 
315:     <span class="ruby-ivar">@rep18</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and aribitprog_num='0001'&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
316:     <span class="ruby-ivar">@rep19</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and aribitprog_num='0003'&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
317: 
318:     <span class="ruby-ivar">@rep20</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0005' or aribitprog_num='0006')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
319:     <span class="ruby-ivar">@rep21</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and  state&gt;=4 and nowdate&gt;=? and nowdate&lt;=? and (aribitprog_num='0007' or aribitprog_num='0008')&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
320: 
321:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000037" class="method-detail">
        <a name="M000037"></a>

        <div class="method-heading">
          <a href="#M000037" class="method-signature">
          <span class="method-name">list3_2</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
适用规则项目
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000037-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000037-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 324</span>
324:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_2</span>
325:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
326:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
327:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
328:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
329:     <span class="ruby-keyword kw">end</span>
330:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
331:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
332:     <span class="ruby-keyword kw">end</span>
333:     <span class="ruby-ivar">@ap_rule</span> = <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8143' and state='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>)
334:     <span class="ruby-ivar">@ap_num</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and nowdate&gt;=? and nowdate&lt;=?&quot;</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>])
335:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000038" class="method-detail">
        <a name="M000038"></a>

        <div class="method-heading">
          <a href="#M000038" class="method-signature">
          <span class="method-name">list3_3</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
特殊约定案件统计
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000038-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000038-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 338</span>
338:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_3</span>
339:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
340:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
341:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
342:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
343:     <span class="ruby-keyword kw">end</span>
344:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
345:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
346:     <span class="ruby-keyword kw">end</span>
347:     <span class="ruby-ivar">@ap_rule</span> = <span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8144' and state='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>)
348:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000033" class="method-detail">
        <a name="M000033"></a>

        <div class="method-heading">
          <a href="#M000033" class="method-signature">
          <span class="method-name">list3_31</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
检测（审计、鉴定、笔迹签订） 统计
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000033-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000033-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 95</span>
 95:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_31</span>
 96:     <span class="ruby-ivar">@date1</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date1</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
 97:     <span class="ruby-ivar">@date2</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date2</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>
 98:     <span class="ruby-ivar">@date3</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date3</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
 99:     <span class="ruby-ivar">@date4</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date4</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>
100: 
101:     <span class="ruby-identifier">k</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]
102:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
103:       <span class="ruby-identifier">endstyle</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>][<span class="ruby-identifier">:endstyle</span>]
104:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">endstyle</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
105:         <span class="ruby-identifier">endstyle</span> = <span class="ruby-value str">'0001'</span>
106:       <span class="ruby-keyword kw">end</span>
107:       <span class="ruby-ivar">@checked</span> = <span class="ruby-identifier">endstyle</span>
108:     <span class="ruby-keyword kw">end</span>
109:     <span class="ruby-ivar">@case</span> = <span class="ruby-constant">TbDetection</span>.<span class="ruby-identifier">find_by_sql</span>(
110:       <span class="ruby-node">&quot; SELECT DISTINCT
111:            c.recevice_code AS recevice_code,
112:            c.nowdate AS nowdate,
113:            c.case_code AS case_code
114:         FROM
115:            tb_detections AS d
116:         LEFT JOIN tb_cases AS c ON d.recevice_code = c.recevice_code
117:         AND d.used = 'Y' AND d.make_date &gt;= '#{@date3}' AND d.make_date &lt;= '#{@date4}'
118:         WHERE
119:            c.used = 'Y'
120:         AND c.state &gt;= 4
121:         AND c.state &lt; 100
122:         AND c.nowdate &gt;= '#{@date1}'
123:         AND c.nowdate &lt;= '#{@date2}'
124:         AND d.arbitration_decision = '#{endstyle}'&quot;</span>
125:     )
126:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000034" class="method-detail">
        <a name="M000034"></a>

        <div class="method-heading">
          <a href="#M000034" class="method-signature">
          <span class="method-name">list3_32</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
延期案件查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000034-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000034-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 129</span>
129:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_32</span>
130:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
131:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
132:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;RIGHT(c.case_code, 7)&quot;</span>
133:     <span class="ruby-keyword kw">end</span>
134:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
135:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
136:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
137:     <span class="ruby-keyword kw">end</span>
138:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list3_32&quot;</span>
139:     <span class="ruby-ivar">@hant_search_1</span>=[
140:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(d.requestdate,\\\'\\\')'</span>,<span class="ruby-value str">'延期提出日期'</span>,<span class="ruby-value str">'text'</span>,[]],
141:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(e.decideDate,\\\'\\\')'</span>,<span class="ruby-value str">'结案日期'</span>,<span class="ruby-value str">'text'</span>,[]],
142:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'c.clerk'</span>,<span class="ruby-value str">'办案助理'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">UserDuty</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select users.code as code,users.name as name from users,user_duties where users.states='Y' and users.used='Y' and  users.code=user_duties.user_code and user_duties.duty_code='0003' order by users.ord&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">code</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">name</span>]}.<span class="ruby-identifier">insert</span>(<span class="ruby-value">0</span>,[<span class="ruby-value str">&quot;&quot;</span>,<span class="ruby-value str">&quot;全部&quot;</span>])],
143:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'(CASE caseendbook_id_first is null WHEN true  THEN  0 ELSE 1 END)'</span>,<span class="ruby-value str">'是否结案'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">&quot;是&quot;</span>],[<span class="ruby-value">0</span>,<span class="ruby-value str">&quot;否&quot;</span>]]],
144:           [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'(case c.state&lt;100 WHEN true  THEN  0 ELSE 1 END)'</span>,<span class="ruby-value str">'是否在办案件'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">&quot;&quot;</span>,<span class="ruby-value str">&quot;&quot;</span>],[<span class="ruby-value">0</span>,<span class="ruby-value str">&quot;是&quot;</span>]]]
145:     ]
146:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'IFNULL(d.requestdate,\\\'\\\')'</span>]
147:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
148:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
149:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
150:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
151:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
152:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
153:     <span class="ruby-keyword kw">end</span>
154:     
155:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
156:     <span class="ruby-keyword kw">else</span>
157:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
158:     <span class="ruby-keyword kw">end</span>
159:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;c.used='Y' and c.state&gt;=4&quot;</span>
160:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
161:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
162:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
163:     <span class="ruby-keyword kw">end</span>
164:     <span class="ruby-identifier">sql2</span> = <span class="ruby-node">&quot;SELECT DISTINCT
165:                c.recevice_code AS recevice_code,
166:                c.nowdate AS nowdate,
167:                c.case_code AS case_code,
168:                c.clerk AS clerk,
169:                e.decideDate AS decideDate
170:             FROM
171:                tb_casedelays AS d
172:             LEFT JOIN tb_cases AS c ON d.recevice_code = c.recevice_code
173:             AND d.used = 'Y'
174:             LEFT JOIN tb_caseendbooks AS e ON d.recevice_code = e.recevice_code
175:             AND e.used = 'Y'
176:             WHERE
177:                #{c}
178:             ORDER BY
179:                #{@order},RIGHT(c.case_code, 7)&quot;</span>
180:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">TbCasedelay</span>,<span class="ruby-identifier">sql2</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
181:     <span class="ruby-ivar">@ni</span> = <span class="ruby-constant">TbCasedelay</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;SELECT DISTINCT  c.recevice_code AS recevice_code, c.nowdate AS nowdate, c.case_code AS case_code, c.clerk AS clerk, e.decideDate AS decideDate
182:             FROM tb_casedelays AS d LEFT JOIN tb_cases AS c ON d.recevice_code = c.recevice_code AND d.used = 'Y'
183:             LEFT JOIN tb_caseendbooks AS e ON d.recevice_code = e.recevice_code AND e.used = 'Y'
184:             WHERE #{c} ORDER BY #{@order},RIGHT(c.case_code, 7)&quot;</span>)
185:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000077" class="method-detail">
        <a name="M000077"></a>

        <div class="method-heading">
          <a href="#M000077" class="method-signature">
          <span class="method-name">list3_33</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
中止案件查询
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000077-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000077-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 1219</span>
1219:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_33</span>
1220:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">2</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;历史&quot;</span>,<span class="ruby-value">3</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;不受理&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;结案&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档&quot;</span>}
1221:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list3_33&quot;</span>
1222:     <span class="ruby-ivar">@hant_search_1</span>=[
1223:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases.case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],
1224:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'IFNULL(tb_adjudgebrikes.requestman_type,\\\'\\\')'</span>,<span class="ruby-value str">'要求中止方'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='8106' and state='Y' and used='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'data_val'</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_val</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">data_text</span>]}],
1225:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_adjudgebrikes.linkman_name'</span>,<span class="ruby-value str">'中止方名称'</span>,<span class="ruby-value str">'text'</span>,[]],
1226:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'IFNULL(tb_adjudgebrikes.end_date,\\\'\\\')'</span>,<span class="ruby-value str">'中止日期'</span>,<span class="ruby-value str">'text'</span>,[]]
1227:     ]
1228:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases.case_code'</span>,<span class="ruby-value str">'IFNULL(tb_adjudgebrikes.requestman_type,\\\'\\\')'</span>,<span class="ruby-value str">'tb_adjudgebrikes.linkman_name'</span>,<span class="ruby-value str">'IFNULL(tb_adjudgebrikes.end_date,\\\'\\\')'</span>]
1229:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
1230:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
1231:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases.case_code,7)&quot;</span>
1232:     <span class="ruby-keyword kw">end</span>
1233:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
1234:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
1235:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
1236:     <span class="ruby-keyword kw">end</span>
1237:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
1238:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
1239:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
1240:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
1241:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
1242:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
1243:     <span class="ruby-keyword kw">end</span>
1244:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
1245:     <span class="ruby-keyword kw">else</span>
1246:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
1247:     <span class="ruby-keyword kw">end</span>
1248: 
1249:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;tb_adjudgebrikes.recevice_code=tb_cases.recevice_code and tb_adjudgebrikes.used='Y' and tb_cases.state&gt;=4 and tb_cases.state&lt;100 and tb_adjudgebrikes.stoped=1&quot;</span>
1250:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
1251:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
1252:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
1253:     <span class="ruby-keyword kw">end</span>
1254:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">TbCase</span>,<span class="ruby-node">&quot;select distinct tb_cases.state as tb_cases_state,tb_cases.recevice_code as tb_cases_recevice_code,tb_cases.case_code as tb_cases_case_code,tb_cases.end_code as tb_cases_end_code,tb_cases.clerk as tb_cases_clerk,tb_adjudgebrikes.requestman_type as tb_adjudgebrikes_requestman_type,tb_adjudgebrikes.linkman_name as tb_adjudgebrikes_linkman_name,tb_adjudgebrikes.end_date as tb_adjudgebrikes_end_date from tb_adjudgebrikes,tb_cases where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
1255:     <span class="ruby-ivar">@c_l</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases.state as tb_cases_state,tb_cases.recevice_code as tb_cases_recevice_code,tb_cases.case_code as tb_cases_case_code,tb_cases.end_code as tb_cases_end_code,tb_cases.clerk as tb_cases_clerk,tb_adjudgebrikes.requestman_type as tb_adjudgebrikes_requestman_type,tb_adjudgebrikes.linkman_name as tb_adjudgebrikes_linkman_name,tb_adjudgebrikes.end_date as tb_adjudgebrikes_end_date from tb_adjudgebrikes,tb_cases where #{c}  order by #{@order}&quot;</span>)
1256:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000078" class="method-detail">
        <a name="M000078"></a>

        <div class="method-heading">
          <a href="#M000078" class="method-signature">
          <span class="method-name">list3_34</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
立 结 审 案件数量统计
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000078-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000078-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 1259</span>
1259:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_34</span>
1260:     <span class="ruby-ivar">@da1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:da1</span>]
1261:     <span class="ruby-ivar">@da2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:da2</span>]
1262:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@da1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
1263:       <span class="ruby-ivar">@da1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
1264:     <span class="ruby-keyword kw">end</span>
1265:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@da2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
1266:       <span class="ruby-ivar">@da2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
1267:     <span class="ruby-keyword kw">end</span>
1268: 
1269:     <span class="ruby-ivar">@c</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and nowdate&gt;=? and nowdate&lt;=? and state&gt;=4&quot;</span>,<span class="ruby-ivar">@da1</span>,<span class="ruby-ivar">@da2</span>],<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;count(id) as a,sum(amount) as s&quot;</span>)
1270:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@c!</span>=<span class="ruby-keyword kw">nil</span>
1271:       <span class="ruby-ivar">@c1</span>=<span class="ruby-ivar">@c</span>.<span class="ruby-identifier">a</span>.<span class="ruby-identifier">to_i</span>
1272:       <span class="ruby-ivar">@c2</span>=<span class="ruby-ivar">@c</span>.<span class="ruby-identifier">s</span>
1273:     <span class="ruby-keyword kw">else</span>
1274:       <span class="ruby-ivar">@c1</span>=<span class="ruby-value">0</span>
1275:       <span class="ruby-ivar">@c2</span>=<span class="ruby-value">0</span>
1276:     <span class="ruby-keyword kw">end</span>
1277:     <span class="ruby-comment cmt">#实收</span>
1278:     <span class="ruby-ivar">@charge</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;s.used='Y' and (s.typ='0001' or s.typ='0004')&quot;</span>],<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as s inner join tb_cases as c on s.recevice_code=c.recevice_code and c.used='Y' and c.nowdate&gt;='#{@da1}' and c.nowdate&lt;='#{@da2}' and c.state&gt;=4&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;sum(s.re_rmb_money) as cc&quot;</span>)
1279:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@charge!</span>=<span class="ruby-keyword kw">nil</span>
1280:       <span class="ruby-ivar">@c3</span>=<span class="ruby-ivar">@charge</span>.<span class="ruby-identifier">cc</span>
1281:     <span class="ruby-keyword kw">else</span>
1282:       <span class="ruby-ivar">@c3</span>=<span class="ruby-value">0</span>
1283:     <span class="ruby-keyword kw">end</span>
1284:     <span class="ruby-comment cmt">#一般裁决   #####################################</span>
1285:     <span class="ruby-ivar">@d_1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;c.used='Y' and c.state&gt;=4  and c.caseendbook_id_first is not null&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as c inner join tb_caseendbooks as s on s.used='Y' and s.decideDate&gt;='#{@da1}' and s.decideDate&lt;='#{@da2}' and c.recevice_code=s.recevice_code and s.endStyle='0001'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;count(distinct c.recevice_code) as cc,sum(c.amount) as ss&quot;</span>)
1286:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d_1!</span>=<span class="ruby-keyword kw">nil</span>
1287:       <span class="ruby-ivar">@d1</span>=<span class="ruby-ivar">@d_1</span>.<span class="ruby-identifier">cc</span>.<span class="ruby-identifier">to_i</span>
1288:       <span class="ruby-ivar">@d2</span>=<span class="ruby-ivar">@d_1</span>.<span class="ruby-identifier">ss</span>
1289:     <span class="ruby-keyword kw">else</span>
1290:       <span class="ruby-ivar">@d1</span>=<span class="ruby-value">0</span>
1291:       <span class="ruby-ivar">@d2</span>=<span class="ruby-value">0</span>
1292:     <span class="ruby-keyword kw">end</span>
1293: 
1294:     <span class="ruby-ivar">@d_4</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select sum(s.re_rmb_money) as cc from tb_cases as c,tb_should_charges as s,tb_caseendbooks as e where e.used='Y' and e.endStyle='0001' and e.decideDate&gt;='#{@da1}' and e.decideDate&lt;='#{@da2}' and e.recevice_code=c.recevice_code and c.used='Y' and c.state&gt;=4 and c.caseendbook_id_first is not null and c.recevice_code=s.recevice_code and s.used='Y' and (s.typ='0001' or s.typ='0004')&quot;</span>)
1295:     <span class="ruby-identifier">d_4</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">get_first_record</span>(<span class="ruby-ivar">@d_4</span>)
1296:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d_4!</span>=<span class="ruby-keyword kw">nil</span>
1297:       <span class="ruby-ivar">@d3</span>=<span class="ruby-identifier">d_4</span>.<span class="ruby-identifier">cc</span>
1298:     <span class="ruby-keyword kw">else</span>
1299:       <span class="ruby-ivar">@d3</span>=<span class="ruby-value">0</span>
1300:     <span class="ruby-keyword kw">end</span>
1301:     <span class="ruby-comment cmt">#和裁    ############################################</span>
1302:     <span class="ruby-ivar">@e_1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;c.used='Y' and c.state&gt;=4  and c.caseendbook_id_first is not null&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as c inner join tb_caseendbooks as s on s.used='Y' and s.decideDate&gt;='#{@da1}' and s.decideDate&lt;='#{@da2}' and c.recevice_code=s.recevice_code and s.endStyle='0002'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;count(distinct c.recevice_code) as cc,sum(c.amount) as ss&quot;</span>)
1303:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@e_1!</span>=<span class="ruby-keyword kw">nil</span>
1304:       <span class="ruby-ivar">@e1</span>=<span class="ruby-ivar">@e_1</span>.<span class="ruby-identifier">cc</span>.<span class="ruby-identifier">to_i</span>
1305:       <span class="ruby-ivar">@e2</span>=<span class="ruby-ivar">@e_1</span>.<span class="ruby-identifier">ss</span>
1306:     <span class="ruby-keyword kw">else</span>
1307:       <span class="ruby-ivar">@e1</span>=<span class="ruby-value">0</span>
1308:       <span class="ruby-ivar">@e2</span>=<span class="ruby-value">0</span>
1309:     <span class="ruby-keyword kw">end</span>
1310:     <span class="ruby-ivar">@d_4</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select sum(s.re_rmb_money) as cc from tb_cases as c,tb_should_charges as s,tb_caseendbooks as e where e.used='Y' and e.endStyle='0002' and e.decideDate&gt;='#{@da1}' and e.decideDate&lt;='#{@da2}' and e.recevice_code=c.recevice_code and c.used='Y' and c.state&gt;=4  and c.caseendbook_id_first is not null and c.recevice_code=s.recevice_code and s.used='Y' and (s.typ='0001' or s.typ='0004')&quot;</span>)
1311:     <span class="ruby-identifier">d_4</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">get_first_record</span>(<span class="ruby-ivar">@d_4</span>)
1312:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d_4!</span>=<span class="ruby-keyword kw">nil</span>
1313:       <span class="ruby-ivar">@e3</span>=<span class="ruby-identifier">d_4</span>.<span class="ruby-identifier">cc</span>
1314:     <span class="ruby-keyword kw">else</span>
1315:       <span class="ruby-ivar">@e3</span>=<span class="ruby-value">0</span>
1316:     <span class="ruby-keyword kw">end</span>
1317: 
1318:     <span class="ruby-comment cmt">#撤案     ############################################</span>
1319:     <span class="ruby-ivar">@f_1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;c.used='Y' and c.state&gt;=4  and c.caseendbook_id_first is not null&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as c inner join tb_caseendbooks as s on s.used='Y' and s.decideDate&gt;='#{@da1}' and s.decideDate&lt;='#{@da2}' and c.recevice_code=s.recevice_code and s.endStyle='0003'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;count(distinct c.recevice_code) as cc,sum(c.amount) as ss&quot;</span>)
1320:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@f_1!</span>=<span class="ruby-keyword kw">nil</span>
1321:       <span class="ruby-ivar">@f1</span>=<span class="ruby-ivar">@f_1</span>.<span class="ruby-identifier">cc</span>.<span class="ruby-identifier">to_i</span>
1322:       <span class="ruby-ivar">@f2</span>=<span class="ruby-ivar">@f_1</span>.<span class="ruby-identifier">ss</span>
1323:     <span class="ruby-keyword kw">else</span>
1324:       <span class="ruby-ivar">@f1</span>=<span class="ruby-value">0</span>
1325:       <span class="ruby-ivar">@f2</span>=<span class="ruby-value">0</span>
1326:     <span class="ruby-keyword kw">end</span>
1327:     <span class="ruby-ivar">@d_4</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select sum(s.re_rmb_money) as cc from tb_cases as c,tb_should_charges as s,tb_caseendbooks as e where e.used='Y' and e.endStyle='0003' and e.decideDate&gt;='#{@da1}' and e.decideDate&lt;='#{@da2}' and e.recevice_code=c.recevice_code and c.used='Y' and c.state&gt;=4  and c.caseendbook_id_first is not null and c.recevice_code=s.recevice_code and s.used='Y' and (s.typ='0001' or s.typ='0004')&quot;</span>)
1328:     <span class="ruby-identifier">d_4</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">get_first_record</span>(<span class="ruby-ivar">@d_4</span>)
1329:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d_4!</span>=<span class="ruby-keyword kw">nil</span>
1330:       <span class="ruby-ivar">@f3</span>=<span class="ruby-identifier">d_4</span>.<span class="ruby-identifier">cc</span>
1331:     <span class="ruby-keyword kw">else</span>
1332:       <span class="ruby-ivar">@f3</span>=<span class="ruby-value">0</span>
1333:     <span class="ruby-keyword kw">end</span>
1334:     <span class="ruby-comment cmt">#未组庭  #################################### and caseorg_id_first is null</span>
1335:     <span class="ruby-ivar">@m_1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;used='Y' and nowdate&gt;='#{@da1}' and nowdate&lt;='#{@da2}' and state=4 and caseorg_id_first is null and caseendbook_id_first is null&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;count(id) as cc,sum(amount) as ss&quot;</span>)
1336:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@m_1!</span>=<span class="ruby-keyword kw">nil</span>
1337:       <span class="ruby-ivar">@m1</span>=<span class="ruby-ivar">@m_1</span>.<span class="ruby-identifier">cc</span>.<span class="ruby-identifier">to_i</span>
1338:       <span class="ruby-ivar">@m2</span>=<span class="ruby-ivar">@m_1</span>.<span class="ruby-identifier">ss</span>
1339:     <span class="ruby-keyword kw">else</span>
1340:       <span class="ruby-ivar">@m1</span>=<span class="ruby-value">0</span>
1341:       <span class="ruby-ivar">@m2</span>=<span class="ruby-value">0</span>
1342:     <span class="ruby-keyword kw">end</span>
1343:     <span class="ruby-comment cmt">#实收  and c.caseorg_id_first is null</span>
1344:     <span class="ruby-ivar">@charge</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;s.used='Y' and (s.typ='0001' or s.typ='0004')&quot;</span>],<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as s inner join tb_cases as c on s.recevice_code=c.recevice_code and c.used='Y' and c.nowdate&gt;='#{@da1}' and c.nowdate&lt;='#{@da2}' and c.state=4 and c.caseorg_id_first is null and c.caseendbook_id_first is null&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;sum(s.re_rmb_money) as cc&quot;</span>)
1345:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@charge!</span>=<span class="ruby-keyword kw">nil</span>
1346:       <span class="ruby-ivar">@m3</span>=<span class="ruby-ivar">@charge</span>.<span class="ruby-identifier">cc</span>
1347:     <span class="ruby-keyword kw">else</span>
1348:       <span class="ruby-ivar">@m3</span>=<span class="ruby-value">0</span>
1349:     <span class="ruby-keyword kw">end</span>
1350:     <span class="ruby-comment cmt">#已组庭未开庭  #################################  and caseorg_id_first is not null</span>
1351:     <span class="ruby-ivar">@n_1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;used='Y' and nowdate&gt;='#{@da1}' and nowdate&lt;='#{@da2}' and state=5 and caseendbook_id_first is null and caseorg_id_first is not null and sitting_id_first is null&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;count(id) as c2,sum(amount) as s2&quot;</span>)
1352:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@n_1!</span>=<span class="ruby-keyword kw">nil</span>
1353:       <span class="ruby-ivar">@n1</span>=<span class="ruby-ivar">@n_1</span>.<span class="ruby-identifier">c2</span>.<span class="ruby-identifier">to_i</span>
1354:       <span class="ruby-ivar">@n2</span>=<span class="ruby-ivar">@n_1</span>.<span class="ruby-identifier">s2</span>
1355:     <span class="ruby-keyword kw">else</span>
1356:       <span class="ruby-ivar">@n1</span>=<span class="ruby-value">0</span>
1357:       <span class="ruby-ivar">@n2</span>=<span class="ruby-value">0</span>
1358:     <span class="ruby-keyword kw">end</span>
1359:     <span class="ruby-ivar">@charge</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;s.used='Y' and (s.typ='0001' or s.typ='0004')&quot;</span>],<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as s inner join tb_cases as c on s.recevice_code=c.recevice_code and c.used='Y' and c.nowdate&gt;='#{@da1}' and c.nowdate&lt;='#{@da2}' and c.state=5 and c.caseendbook_id_first is null and c.caseorg_id_first is not null and c.sitting_id_first is null&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;sum(s.re_rmb_money) as c3&quot;</span>)
1360:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@charge!</span>=<span class="ruby-keyword kw">nil</span>
1361:       <span class="ruby-ivar">@n3</span>=<span class="ruby-ivar">@charge</span>.<span class="ruby-identifier">c3</span>
1362:     <span class="ruby-keyword kw">else</span>
1363:       <span class="ruby-ivar">@n3</span>=<span class="ruby-value">0</span>
1364:     <span class="ruby-keyword kw">end</span>
1365:     <span class="ruby-comment cmt">#已开庭  ################################# sitting_id_first</span>
1366:     <span class="ruby-ivar">@q_1</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;used='Y' and nowdate&gt;='#{@da1}' and nowdate&lt;='#{@da2}' and sitting_id_first is not null and caseendbook_id_first is null&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;count(id) as cc,sum(amount) as ss&quot;</span>)
1367:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@q_1!</span>=<span class="ruby-keyword kw">nil</span>
1368:       <span class="ruby-ivar">@q1</span>=<span class="ruby-ivar">@q_1</span>.<span class="ruby-identifier">cc</span>.<span class="ruby-identifier">to_i</span>
1369:       <span class="ruby-ivar">@q2</span>=<span class="ruby-ivar">@q_1</span>.<span class="ruby-identifier">ss</span>
1370:     <span class="ruby-keyword kw">else</span>
1371:       <span class="ruby-ivar">@q1</span>=<span class="ruby-value">0</span>
1372:       <span class="ruby-ivar">@q2</span>=<span class="ruby-value">0</span>
1373:     <span class="ruby-keyword kw">end</span>
1374:     <span class="ruby-ivar">@charge</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;s.used='Y' and (s.typ='0001' or s.typ='0004')&quot;</span>],<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as s inner join tb_cases as c on s.recevice_code=c.recevice_code and c.used='Y' and c.nowdate&gt;='#{@da1}' and c.nowdate&lt;='#{@da2}' and c.sitting_id_first is not null and c.caseendbook_id_first is null&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;sum(s.re_rmb_money) as cc&quot;</span>)
1375:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@charge!</span>=<span class="ruby-keyword kw">nil</span>
1376:       <span class="ruby-ivar">@q3</span>=<span class="ruby-ivar">@charge</span>.<span class="ruby-identifier">cc</span>
1377:     <span class="ruby-keyword kw">else</span>
1378:       <span class="ruby-ivar">@q3</span>=<span class="ruby-value">0</span>
1379:     <span class="ruby-keyword kw">end</span>
1380:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000039" class="method-detail">
        <a name="M000039"></a>

        <div class="method-heading">
          <a href="#M000039" class="method-signature">
          <span class="method-name">list3_3a</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
按特殊案件类型统计 案件列表
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000039-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000039-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 351</span>
351:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_3a</span>
352:     <span class="ruby-ivar">@dispute</span>={<span class="ruby-value str">&quot;01&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案时间段&quot;</span>,<span class="ruby-value str">&quot;02&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;结案时间段&quot;</span>,<span class="ruby-value str">&quot;03&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案结案时间段&quot;</span>}  <span class="ruby-comment cmt">#时间段类型</span>
353:     <span class="ruby-ivar">@special_convention</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:special_convention</span>]
354:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
355:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
356:     <span class="ruby-ivar">@case</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and special_convention=? and state&gt;=4 and nowdate&gt;=? and nowdate&lt;=?&quot;</span>,<span class="ruby-ivar">@special_convention</span>,<span class="ruby-ivar">@d1</span>,<span class="ruby-ivar">@d2</span>], <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;case_code&quot;</span>)
357:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000040" class="method-detail">
        <a name="M000040"></a>

        <div class="method-heading">
          <a href="#M000040" class="method-signature">
          <span class="method-name">list3_4</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
开庭地案件统计
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000040-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000040-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 360</span>
360:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_4</span>
361:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
362:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
363:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
364:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
365:     <span class="ruby-keyword kw">end</span>
366:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
367:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
368:     <span class="ruby-keyword kw">end</span>
369:     <span class="ruby-identifier">sitplace1</span> = <span class="ruby-constant">TbSitting</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct s.recevice_code as ss from tb_sittings as s where s.used='Y' and s.add_typ='0001' and sittingdate&gt;='#{@d1}' and sittingdate&lt;='#{@d2}'&quot;</span>)
370:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sitplace1!</span>=<span class="ruby-keyword kw">nil</span>
371:       <span class="ruby-ivar">@rep1</span> = <span class="ruby-identifier">sitplace1</span>.<span class="ruby-identifier">length</span>
372:     <span class="ruby-keyword kw">else</span>
373:       <span class="ruby-ivar">@rep1</span> = <span class="ruby-value">0</span>
374:     <span class="ruby-keyword kw">end</span>
375:     <span class="ruby-ivar">@reg_ions</span> = <span class="ruby-constant">Region</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;code,name&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;code&quot;</span>)
376:     <span class="ruby-identifier">sitplace2</span> = <span class="ruby-constant">TbSitting</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct s.recevice_code as ss from tb_sittings as s where s.used='Y' and s.add_typ='0002' and sittingdate&gt;='#{@d1}' and sittingdate&lt;='#{@d2}'&quot;</span>)
377:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sitplace2!</span>=<span class="ruby-keyword kw">nil</span>
378:       <span class="ruby-ivar">@rep2</span> = <span class="ruby-identifier">sitplace2</span>.<span class="ruby-identifier">length</span>
379:     <span class="ruby-keyword kw">else</span>
380:       <span class="ruby-ivar">@rep2</span> = <span class="ruby-value">0</span>
381:     <span class="ruby-keyword kw">end</span>
382:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000041" class="method-detail">
        <a name="M000041"></a>

        <div class="method-heading">
          <a href="#M000041" class="method-signature">
          <span class="method-name">list3_5</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
中外籍仲裁员数量统计
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000041-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000041-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 385</span>
385:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_5</span>
386:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
387:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
388:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
389:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
390:     <span class="ruby-keyword kw">end</span>
391:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
392:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
393:     <span class="ruby-keyword kw">end</span>
394:     <span class="ruby-comment cmt">#国内、外仲裁员</span>
395:     <span class="ruby-ivar">@arbitman</span> = <span class="ruby-constant">TbCasearbitman</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select a.area_code as area1 from tb_casearbitmen as c,tb_arbitmen as a where c.used='Y' and c.u_t&gt;='#{@d1}' and c.u_t&lt;='#{@d2}' and c.arbitman=a.code and a.used='Y'&quot;</span>)
396:     <span class="ruby-ivar">@i</span> = <span class="ruby-value">0</span>
397:     <span class="ruby-ivar">@j</span> = <span class="ruby-value">0</span>
398:     <span class="ruby-ivar">@arbitman</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ar</span><span class="ruby-operator">|</span>
399:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ar</span>.<span class="ruby-identifier">area1!</span>=<span class="ruby-value str">'002'</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ar</span>.<span class="ruby-identifier">area1!</span>=<span class="ruby-value str">'003'</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ar</span>.<span class="ruby-identifier">area1!</span>=<span class="ruby-value str">'004'</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ar</span>.<span class="ruby-identifier">area1</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-value">0</span>,<span class="ruby-value">3</span>)<span class="ruby-operator">==</span><span class="ruby-value str">&quot;001&quot;</span>
400:         <span class="ruby-ivar">@i</span> = <span class="ruby-ivar">@i</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
401:       <span class="ruby-keyword kw">else</span>
402:         <span class="ruby-ivar">@j</span> = <span class="ruby-ivar">@j</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
403:       <span class="ruby-keyword kw">end</span>
404:     <span class="ruby-keyword kw">end</span>
405: 
406:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000042" class="method-detail">
        <a name="M000042"></a>

        <div class="method-heading">
          <a href="#M000042" class="method-signature">
          <span class="method-name">list3_6</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
结案查询&#8212;不包括撤案的案件
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000042-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000042-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 409</span>
409:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_6</span>
410:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
411:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
412:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
413:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
414:     <span class="ruby-keyword kw">end</span>
415:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
416:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
417:     <span class="ruby-keyword kw">end</span>
418:     <span class="ruby-ivar">@endcase</span>=<span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct e.recevice_code as recevice_code,e.arbitBookNum as arbitBookNum,e.case_code as case_code,e.endStyle as endStyle,e.decideDate as decideDate from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.endStyle&lt;&gt;'0003' and c.used='Y' and e.recevice_code=c.recevice_code and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' order by right(left(e.arbitBookNum,10),7) desc&quot;</span>)
419:     <span class="ruby-ivar">@tb_caseend</span> = <span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct e.recevice_code as recevice_code,c.amount as amount from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle&lt;&gt;'0003' and c.used='Y' and c.recevice_code=e.recevice_code&quot;</span>)
420:     <span class="ruby-ivar">@amount_all</span> = <span class="ruby-value">0</span>
421:     <span class="ruby-ivar">@a_a1</span> = <span class="ruby-value">0</span>
422:     <span class="ruby-ivar">@a_a2</span> = <span class="ruby-value">0</span>
423:     <span class="ruby-ivar">@a_r1</span> = <span class="ruby-value">0</span>
424:     <span class="ruby-ivar">@a_r2</span> = <span class="ruby-value">0</span>
425:     <span class="ruby-ivar">@tb_caseend</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">al</span><span class="ruby-operator">|</span>
426:       <span class="ruby-ivar">@amount_all</span> = <span class="ruby-ivar">@amount_all</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">al</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_f</span>
427:       <span class="ruby-identifier">a_f1</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0001' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
428:       <span class="ruby-ivar">@a_a1</span> = <span class="ruby-ivar">@a_a1</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_f1</span>.<span class="ruby-identifier">to_i</span>
429:       <span class="ruby-identifier">a_f2</span>=<span class="ruby-constant">TbShouldRefund</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0001' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
430:       <span class="ruby-ivar">@a_a2</span> = <span class="ruby-ivar">@a_a2</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_f2</span>.<span class="ruby-identifier">to_i</span>
431:       <span class="ruby-comment cmt">#  被申请人</span>
432:       <span class="ruby-identifier">a_r1</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0002' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
433:       <span class="ruby-ivar">@a_r1</span> = <span class="ruby-ivar">@a_r1</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_r1</span>.<span class="ruby-identifier">to_i</span>
434:       <span class="ruby-identifier">a_r2</span>=<span class="ruby-constant">TbShouldRefund</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0002' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
435:       <span class="ruby-ivar">@a_r2</span> = <span class="ruby-ivar">@a_r2</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_r2</span>.<span class="ruby-identifier">to_i</span>
436:     <span class="ruby-keyword kw">end</span>
437:     <span class="ruby-ivar">@a_a12</span> = <span class="ruby-ivar">@a_a1</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@a_a2</span>
438:     <span class="ruby-ivar">@a_r12</span> = <span class="ruby-ivar">@a_r1</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@a_r2</span>
439:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000043" class="method-detail">
        <a name="M000043"></a>

        <div class="method-heading">
          <a href="#M000043" class="method-signature">
          <span class="method-name">list3_61</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
结案查询&#8212;生成报表
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000043-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000043-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 442</span>
442:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_61</span>
443:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
444:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
445:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
446:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
447:     <span class="ruby-keyword kw">end</span>
448:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
449:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
450:     <span class="ruby-keyword kw">end</span>
451:     <span class="ruby-ivar">@endcase</span>=<span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct e.recevice_code as recevice_code,e.arbitBookNum as arbitBookNum,e.case_code as case_code,e.endStyle as endStyle,e.decideDate as decideDate from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.endStyle&lt;&gt;'0003' and c.used='Y' and e.recevice_code=c.recevice_code and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' order by right(left(e.arbitBookNum,10),7) desc&quot;</span>)
452:     <span class="ruby-ivar">@tb_caseend</span> = <span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct e.recevice_code as recevice_code,c.amount as amount from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle&lt;&gt;'0003' and c.used='Y' and c.recevice_code=e.recevice_code&quot;</span>)
453:     <span class="ruby-ivar">@amount_all</span> = <span class="ruby-value">0</span>
454:     <span class="ruby-ivar">@a_a1</span> = <span class="ruby-value">0</span>
455:     <span class="ruby-ivar">@a_a2</span> = <span class="ruby-value">0</span>
456:     <span class="ruby-ivar">@a_r1</span> = <span class="ruby-value">0</span>
457:     <span class="ruby-ivar">@a_r2</span> = <span class="ruby-value">0</span>
458:     <span class="ruby-ivar">@tb_caseend</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">al</span><span class="ruby-operator">|</span>
459:       <span class="ruby-ivar">@amount_all</span> = <span class="ruby-ivar">@amount_all</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">al</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_f</span>
460:       <span class="ruby-identifier">a_f1</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0001' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
461:       <span class="ruby-ivar">@a_a1</span> = <span class="ruby-ivar">@a_a1</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_f1</span>.<span class="ruby-identifier">to_i</span>
462:       <span class="ruby-identifier">a_f2</span>=<span class="ruby-constant">TbShouldRefund</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0001' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
463:       <span class="ruby-ivar">@a_a2</span> = <span class="ruby-ivar">@a_a2</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_f2</span>.<span class="ruby-identifier">to_i</span>
464:       <span class="ruby-comment cmt">#  被申请人</span>
465:       <span class="ruby-identifier">a_r1</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0002' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
466:       <span class="ruby-ivar">@a_r1</span> = <span class="ruby-ivar">@a_r1</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_r1</span>.<span class="ruby-identifier">to_i</span>
467:       <span class="ruby-identifier">a_r2</span>=<span class="ruby-constant">TbShouldRefund</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0002' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
468:       <span class="ruby-ivar">@a_r2</span> = <span class="ruby-ivar">@a_r2</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_r2</span>.<span class="ruby-identifier">to_i</span>
469:     <span class="ruby-keyword kw">end</span>
470:     <span class="ruby-ivar">@a_a12</span> = <span class="ruby-ivar">@a_a1</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@a_a2</span>
471:     <span class="ruby-ivar">@a_r12</span> = <span class="ruby-ivar">@a_r1</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@a_r2</span>
472:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000044" class="method-detail">
        <a name="M000044"></a>

        <div class="method-heading">
          <a href="#M000044" class="method-signature">
          <span class="method-name">list3_62</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
结案查询&#8212;处长使用，不查看金额
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000044-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000044-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 475</span>
475:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_62</span>
476:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
477:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
478:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(left(e.arbitBookNum,10),7)&quot;</span>
479:     <span class="ruby-keyword kw">end</span>
480:     <span class="ruby-ivar">@clerk_all</span>=<span class="ruby-constant">UserDuty</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select users.code as code,users.name as name from users,user_duties where users.states='Y' and users.used='Y' and users.code=user_duties.user_code and user_duties.duty_code='0003' order by users.ord&quot;</span>)
481:     <span class="ruby-ivar">@clerk</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:clerk</span>]
482:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
483:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
484:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
485:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
486:     <span class="ruby-keyword kw">end</span>
487:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
488:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
489:     <span class="ruby-keyword kw">end</span>
490:     <span class="ruby-ivar">@endstyle</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:endstyle</span>]
491:     <span class="ruby-ivar">@general_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:general_code</span>]
492:     <span class="ruby-ivar">@case_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:case_code</span>]
493:     <span class="ruby-ivar">@end_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:end_code</span>]
494:     <span class="ruby-ivar">@clerk</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:clerk</span>]
495:     <span class="ruby-ivar">@runstyle</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:runstyle</span>]
496:     <span class="ruby-identifier">c</span> = <span class="ruby-node">&quot;e.used='Y' and c.used='Y' and e.recevice_code=c.recevice_code and e.endStyle&lt;&gt;'0003' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' &quot;</span>
497:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@endstyle!</span>=<span class="ruby-value str">''</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@endstyle!</span>=<span class="ruby-keyword kw">nil</span>
498:       <span class="ruby-identifier">c</span> =<span class="ruby-identifier">c</span> <span class="ruby-operator">+</span>  <span class="ruby-node">&quot; and e.endStyle='#{@endstyle}' &quot;</span>
499:     <span class="ruby-keyword kw">end</span>
500:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@general_code!</span>=<span class="ruby-value str">''</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@general_code!</span>=<span class="ruby-keyword kw">nil</span>
501:       <span class="ruby-identifier">c</span> =<span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot; and e.general_code like '%#{@general_code}%'&quot;</span>
502:     <span class="ruby-keyword kw">end</span>
503:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@case_code!</span>=<span class="ruby-value str">''</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@case_code!</span>=<span class="ruby-keyword kw">nil</span>
504:       <span class="ruby-identifier">c</span> =<span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot; and e.case_code like '%#{@case_code}%'&quot;</span>
505:     <span class="ruby-keyword kw">end</span>
506:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@end_code!</span>=<span class="ruby-value str">''</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@end_code!</span>=<span class="ruby-keyword kw">nil</span>
507:       <span class="ruby-identifier">c</span> =<span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot;  and e.arbitBookNum like '%#{@end_code}%'&quot;</span>
508:     <span class="ruby-keyword kw">end</span>
509:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@clerk!</span>=<span class="ruby-value str">''</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@clerk!</span>=<span class="ruby-keyword kw">nil</span>
510:       <span class="ruby-identifier">c</span> =<span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot;  and c.clerk like '#{@clerk}'&quot;</span>
511:     <span class="ruby-keyword kw">end</span>
512:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@runstyle</span>.<span class="ruby-identifier">blank?</span>
513:       <span class="ruby-identifier">c</span> =<span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot;  and c.runstyle='#{@runstyle}'&quot;</span>
514:     <span class="ruby-keyword kw">end</span>
515:     <span class="ruby-comment cmt">#niell 2010-10-25 提前结案</span>
516:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:seday</span>]<span class="ruby-operator">!=</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:seday</span>]<span class="ruby-operator">!=</span><span class="ruby-value str">&quot;&quot;</span>
517:       <span class="ruby-identifier">c</span> =<span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot; and c.caseendbook_id_last=e.id and datediff(c.finally_limit_dat,e.decideDate)&gt;='#{params[:seday].to_i}'&quot;</span>
518:     <span class="ruby-keyword kw">end</span>
519:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
520:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-identifier">c</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
521:       <span class="ruby-ivar">@endcase</span>=<span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.runstyle as runstyle, e.recevice_code as recevice_code,e.general_code as general_code,e.case_code as case_code,e.arbitBookNum as arbitBookNum,e.endStyle as endStyle,e.decideDate as decideDate,c.finally_limit_dat as finally_limit_dat,datediff(c.finally_limit_dat,e.decideDate) as df from tb_caseendbooks as e,tb_cases as c where #{c} order by #{@order}&quot;</span>)
522:     <span class="ruby-keyword kw">end</span>
523:    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000045" class="method-detail">
        <a name="M000045"></a>

        <div class="method-heading">
          <a href="#M000045" class="method-signature">
          <span class="method-name">list3_7</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
撤案查询&#8212;
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000045-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000045-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 526</span>
526:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_7</span>
527:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
528:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
529:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
530:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
531:     <span class="ruby-keyword kw">end</span>
532:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
533:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
534:     <span class="ruby-keyword kw">end</span>
535:     <span class="ruby-ivar">@endcase2</span>=<span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct e.recevice_code as recevice_code,e.arbitBookNum as arbitBookNum,e.case_code as case_code,e.endStyle as endStyle,e.decideDate as decideDate from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.endStyle='0003' and c.used='Y' and e.recevice_code=c.recevice_code and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' order by right(left(e.arbitBookNum,10),7) desc&quot;</span>)
536:     <span class="ruby-ivar">@tb_caseend</span> = <span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct e.recevice_code as recevice_code,c.amount as amount from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0003' and c.used='Y' and c.recevice_code=e.recevice_code&quot;</span>)
537:     <span class="ruby-ivar">@amount_all</span> = <span class="ruby-value">0</span>
538:     <span class="ruby-ivar">@a_a1</span> = <span class="ruby-value">0</span>
539:     <span class="ruby-ivar">@a_a2</span> = <span class="ruby-value">0</span>
540:     <span class="ruby-ivar">@a_r1</span> = <span class="ruby-value">0</span>
541:     <span class="ruby-ivar">@a_r2</span> = <span class="ruby-value">0</span>
542:     <span class="ruby-ivar">@tb_caseend</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">al</span><span class="ruby-operator">|</span>
543:       <span class="ruby-ivar">@amount_all</span> = <span class="ruby-ivar">@amount_all</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">al</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_f</span>
544:       <span class="ruby-identifier">a_f1</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0001' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
545:       <span class="ruby-ivar">@a_a1</span> = <span class="ruby-ivar">@a_a1</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_f1</span>.<span class="ruby-identifier">to_i</span>
546:       <span class="ruby-identifier">a_f2</span>=<span class="ruby-constant">TbShouldRefund</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0001' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
547:       <span class="ruby-ivar">@a_a2</span> = <span class="ruby-ivar">@a_a2</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_f2</span>.<span class="ruby-identifier">to_i</span>
548:       <span class="ruby-comment cmt">#  被申请人</span>
549:       <span class="ruby-identifier">a_r1</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0002' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
550:       <span class="ruby-ivar">@a_r1</span> = <span class="ruby-ivar">@a_r1</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_r1</span>.<span class="ruby-identifier">to_i</span>
551:       <span class="ruby-identifier">a_r2</span>=<span class="ruby-constant">TbShouldRefund</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0002' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
552:       <span class="ruby-ivar">@a_r2</span> = <span class="ruby-ivar">@a_r2</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_r2</span>.<span class="ruby-identifier">to_i</span>
553:     <span class="ruby-keyword kw">end</span>
554:     <span class="ruby-ivar">@a_a12</span> = <span class="ruby-ivar">@a_a1</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@a_a2</span>
555:     <span class="ruby-ivar">@a_r12</span> = <span class="ruby-ivar">@a_r1</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@a_r2</span>
556:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000046" class="method-detail">
        <a name="M000046"></a>

        <div class="method-heading">
          <a href="#M000046" class="method-signature">
          <span class="method-name">list3_71</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
撤案查询&#8212;生成文档
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000046-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000046-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 559</span>
559:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_71</span>
560:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
561:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
562:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
563:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
564:     <span class="ruby-keyword kw">end</span>
565:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
566:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
567:     <span class="ruby-keyword kw">end</span>
568:     <span class="ruby-ivar">@endcase2</span>=<span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct e.recevice_code as recevice_code,e.arbitBookNum as arbitBookNum,e.case_code as case_code,e.endStyle as endStyle,e.decideDate as decideDate from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.endStyle='0003' and c.used='Y' and e.recevice_code=c.recevice_code and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' order by right(left(e.arbitBookNum,10),7) desc&quot;</span>)
569:     <span class="ruby-ivar">@tb_caseend</span> = <span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct e.recevice_code as recevice_code,c.amount as amount from tb_caseendbooks as e,tb_cases as c where e.used='Y' and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}' and e.endStyle='0003' and c.used='Y' and c.recevice_code=e.recevice_code&quot;</span>)
570:     <span class="ruby-ivar">@amount_all</span> = <span class="ruby-value">0</span>
571:     <span class="ruby-ivar">@a_a1</span> = <span class="ruby-value">0</span>
572:     <span class="ruby-ivar">@a_a2</span> = <span class="ruby-value">0</span>
573:     <span class="ruby-ivar">@a_r1</span> = <span class="ruby-value">0</span>
574:     <span class="ruby-ivar">@a_r2</span> = <span class="ruby-value">0</span>
575:     <span class="ruby-ivar">@tb_caseend</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">al</span><span class="ruby-operator">|</span>
576:       <span class="ruby-ivar">@amount_all</span> = <span class="ruby-ivar">@amount_all</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">al</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_f</span>
577:       <span class="ruby-identifier">a_f1</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0001' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
578:       <span class="ruby-ivar">@a_a1</span> = <span class="ruby-ivar">@a_a1</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_f1</span>.<span class="ruby-identifier">to_i</span>
579:       <span class="ruby-identifier">a_f2</span>=<span class="ruby-constant">TbShouldRefund</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0001' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
580:       <span class="ruby-ivar">@a_a2</span> = <span class="ruby-ivar">@a_a2</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_f2</span>.<span class="ruby-identifier">to_i</span>
581:       <span class="ruby-comment cmt">#  被申请人</span>
582:       <span class="ruby-identifier">a_r1</span>=<span class="ruby-constant">TbShouldCharge</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0002' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
583:       <span class="ruby-ivar">@a_r1</span> = <span class="ruby-ivar">@a_r1</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_r1</span>.<span class="ruby-identifier">to_i</span>
584:       <span class="ruby-identifier">a_r2</span>=<span class="ruby-constant">TbShouldRefund</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:re_rmb_money</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and recevice_code=? and payment='0002' and (typ='0001' or typ='0004')&quot;</span>,<span class="ruby-identifier">al</span>.<span class="ruby-identifier">recevice_code</span>])
585:       <span class="ruby-ivar">@a_r2</span> = <span class="ruby-ivar">@a_r2</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_r2</span>.<span class="ruby-identifier">to_i</span>
586:     <span class="ruby-keyword kw">end</span>
587:     <span class="ruby-ivar">@a_a12</span> = <span class="ruby-ivar">@a_a1</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@a_a2</span>
588:     <span class="ruby-ivar">@a_r12</span> = <span class="ruby-ivar">@a_r1</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@a_r2</span>
589:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000047" class="method-detail">
        <a name="M000047"></a>

        <div class="method-heading">
          <a href="#M000047" class="method-signature">
          <span class="method-name">list3_72</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
撤案查询&#8212;处长使用，不查看金额部分
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000047-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000047-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 592</span>
592:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_72</span>
593:     <span class="ruby-ivar">@clerk_all</span>=<span class="ruby-constant">UserDuty</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select users.code as code,users.name as name from users,user_duties where users.states='Y' and users.used='Y' and users.code=user_duties.user_code and user_duties.duty_code='0003' order by users.ord&quot;</span>)
594:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
595:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
596:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
597:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
598:     <span class="ruby-keyword kw">end</span>
599:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
600:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
601:     <span class="ruby-keyword kw">end</span>
602:     <span class="ruby-ivar">@general_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:general_code</span>]
603:     <span class="ruby-ivar">@case_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:case_code</span>]
604:     <span class="ruby-ivar">@end_code</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:end_code</span>]
605:     <span class="ruby-ivar">@clerk</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:clerk</span>]
606:     <span class="ruby-identifier">c</span> = <span class="ruby-node">&quot;e.used='Y' and e.endStyle='0003' and c.used='Y' and e.recevice_code=c.recevice_code and e.decideDate&gt;='#{@d1}' and e.decideDate&lt;='#{@d2}'&quot;</span>
607:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@general_code!</span>=<span class="ruby-value str">''</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@general_code!</span>=<span class="ruby-keyword kw">nil</span>
608:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot; and e.general_code like '%#{@general_code}%'&quot;</span>
609:     <span class="ruby-keyword kw">end</span>
610:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@case_code!</span>=<span class="ruby-value str">''</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@case_code!</span>=<span class="ruby-keyword kw">nil</span>
611:       <span class="ruby-identifier">c</span> =<span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot; and e.case_code like '%#{@case_code}%'&quot;</span>
612:     <span class="ruby-keyword kw">end</span>
613:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@end_code!</span>=<span class="ruby-value str">''</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@end_code!</span>=<span class="ruby-keyword kw">nil</span>
614:       <span class="ruby-identifier">c</span> =<span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot; and e.arbitBookNum like '%#{@end_code}%'&quot;</span>
615:     <span class="ruby-keyword kw">end</span>
616:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@clerk!</span>=<span class="ruby-value str">''</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@clerk!</span>=<span class="ruby-keyword kw">nil</span>
617:       <span class="ruby-identifier">c</span> =<span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot;  and c.clerk like '#{@clerk}'&quot;</span>
618:     <span class="ruby-keyword kw">end</span>
619:     <span class="ruby-ivar">@endcase2</span>=<span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct e.recevice_code as recevice_code,e.general_code as general_code,e.case_code as case_code,e.arbitBookNum as arbitBookNum,e.endStyle as endStyle,e.decideDate as decideDate from tb_caseendbooks as e,tb_cases as c where #{c} order by right(left(e.arbitBookNum,10),7)&quot;</span>)
620:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000048" class="method-detail">
        <a name="M000048"></a>

        <div class="method-heading">
          <a href="#M000048" class="method-signature">
          <span class="method-name">list3_8</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
当事人统计
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000048-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000048-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 623</span>
623:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_8</span>
624:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
625:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
626:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
627:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
628:     <span class="ruby-keyword kw">end</span>
629:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
630:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
631:     <span class="ruby-keyword kw">end</span>
632:     <span class="ruby-ivar">@agent</span>=<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0004' and state='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>)
633:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000050" class="method-detail">
        <a name="M000050"></a>

        <div class="method-heading">
          <a href="#M000050" class="method-signature">
          <span class="method-name">list3_81</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000050-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000050-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 647</span>
647:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_81</span>
648:     <span class="ruby-ivar">@d1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
649:     <span class="ruby-ivar">@d2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
650:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d1</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
651:       <span class="ruby-ivar">@d1</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
652:     <span class="ruby-keyword kw">end</span>
653:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@d2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
654:       <span class="ruby-ivar">@d2</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
655:     <span class="ruby-keyword kw">end</span>
656:     <span class="ruby-ivar">@agent</span>=<span class="ruby-constant">TbDictionary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;typ_code='0004' and state='Y'&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;data_val,data_text&quot;</span>)
657:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000052" class="method-detail">
        <a name="M000052"></a>

        <div class="method-heading">
          <a href="#M000052" class="method-signature">
          <span class="method-name">list3_8a</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
至少一方为深圳市,查看明细
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000052-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000052-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 672</span>
672:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_8a</span>
673:     <span class="ruby-ivar">@v_list</span> = <span class="ruby-constant">VCaseQuery1List1</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;tb_cases_nowdate&gt;=? and tb_cases_nowdate&lt;=? and tb_cases_agent=? and tb_parties_area&lt;&gt;''&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:agent</span>]],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;tb_cases_recevice_code&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(tb_cases_case_code,7)&quot;</span>)
674:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000054" class="method-detail">
        <a name="M000054"></a>

        <div class="method-heading">
          <a href="#M000054" class="method-signature">
          <span class="method-name">list3_8b</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
至少一方为广东其他地区（除深圳市以外）
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000054-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000054-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 695</span>
695:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_8b</span>
696:     <span class="ruby-ivar">@v_list</span> = <span class="ruby-constant">VCaseQuery1List1</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;tb_cases_nowdate&gt;=? and tb_cases_nowdate&lt;=? and tb_cases_agent=? and tb_parties_area&lt;&gt;'' &quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:agent</span>]],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;tb_cases_recevice_code&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(tb_cases_case_code,7)&quot;</span>)
697:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000055" class="method-detail">
        <a name="M000055"></a>

        <div class="method-heading">
          <a href="#M000055" class="method-signature">
          <span class="method-name">list3_8c</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
至少一方为香港地区
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000055-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000055-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 700</span>
700:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_8c</span>
701:     <span class="ruby-ivar">@v_list</span> = <span class="ruby-constant">VCaseQuery1List1</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;tb_cases_nowdate&gt;=? and tb_cases_nowdate&lt;=? and tb_cases_agent=? and tb_parties_area&lt;&gt;''  and tb_parties_area='002'&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:agent</span>]],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;tb_cases_recevice_code&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(tb_cases_case_code,7)&quot;</span>)
702:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000056" class="method-detail">
        <a name="M000056"></a>

        <div class="method-heading">
          <a href="#M000056" class="method-signature">
          <span class="method-name">list3_8d</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
双方都是广东地区以外
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000056-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000056-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 705</span>
705:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_8d</span>
706:     <span class="ruby-ivar">@v_list</span> = <span class="ruby-constant">VCaseQuery1List1</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;tb_cases_nowdate&gt;=? and tb_cases_nowdate&lt;=? and tb_cases_agent=? and tb_parties_area&lt;&gt;''&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:agent</span>]],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;tb_cases_recevice_code&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(tb_cases_case_code,7)&quot;</span>)
707:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000057" class="method-detail">
        <a name="M000057"></a>

        <div class="method-heading">
          <a href="#M000057" class="method-signature">
          <span class="method-name">list3_8e</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000057-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000057-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 709</span>
709:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_8e</span>
710:     <span class="ruby-ivar">@v_list</span> = <span class="ruby-constant">VCaseQuery1List1</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;tb_cases_nowdate&gt;=? and tb_cases_nowdate&lt;=? and tb_cases_agent=? and tb_parties_area&lt;&gt;''&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:agent</span>]],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;tb_cases_recevice_code&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(tb_cases_case_code,7)&quot;</span>)
711:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000058" class="method-detail">
        <a name="M000058"></a>

        <div class="method-heading">
          <a href="#M000058" class="method-signature">
          <span class="method-name">list3_8f</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000058-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000058-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 713</span>
713:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_8f</span>
714:     <span class="ruby-ivar">@v_list</span> = <span class="ruby-constant">VCaseQuery1List1</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;tb_cases_nowdate&gt;=? and tb_cases_nowdate&lt;=? and tb_cases_agent=? and tb_parties_area&lt;&gt;''&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>],<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:agent</span>]],<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;tb_cases_recevice_code&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(tb_cases_case_code,7)&quot;</span>)
715:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000059" class="method-detail">
        <a name="M000059"></a>

        <div class="method-heading">
          <a href="#M000059" class="method-signature">
          <span class="method-name">list3_9</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
仲裁员人案统计
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000059-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000059-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 718</span>
718:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_9</span>
719:     <span class="ruby-ivar">@order</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
720:     <span class="ruby-ivar">@order</span> = <span class="ruby-value str">&quot;a1 desc,name asc&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span>.<span class="ruby-identifier">blank?</span>
721:     <span class="ruby-ivar">@arbitmanl</span> = <span class="ruby-constant">TbArbitman</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value str">&quot;used='Y'&quot;</span>).<span class="ruby-identifier">to_i</span>
722: 
723:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:up</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
724:       <span class="ruby-constant">Task_a</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">t_25</span> 
725:     <span class="ruby-keyword kw">end</span>
726:     <span class="ruby-ivar">@arbitmancase</span> = <span class="ruby-constant">ReportArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order</span>)
727:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000064" class="method-detail">
        <a name="M000064"></a>

        <div class="method-heading">
          <a href="#M000064" class="method-signature">
          <span class="method-name">list3_91</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000064-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000064-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 797</span>
797:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_91</span>
798:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
799:     <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;name desc&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span>.<span class="ruby-identifier">blank?</span>
800:     <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:group=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;code&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;code&quot;</span>)
801:     <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword kw">in</span> <span class="ruby-ivar">@arbitman_case</span>
802:       <span class="ruby-ivar">@arbitmancase</span>=<span class="ruby-constant">ReportArbitmanCase</span>.<span class="ruby-identifier">new</span>()
803:       <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">user_code</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:user_code</span>]
804:       <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">code</span>=<span class="ruby-identifier">c</span>.<span class="ruby-identifier">code</span>
805:       <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">name</span>=<span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span>
806:       <span class="ruby-identifier">a1</span>=<span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:recevice_code</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;state&gt;=4 and state&lt;100 and code=? and caseendbook_id_first is null&quot;</span>,<span class="ruby-identifier">c</span>.<span class="ruby-identifier">code</span>])
807:       <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">a1</span>=<span class="ruby-identifier">a1</span>
808:       <span class="ruby-identifier">a2</span>=<span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:recevice_code</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;state&gt;=4 and state&lt;100 and code=? and caseendbook_id_first is not null&quot;</span>,<span class="ruby-identifier">c</span>.<span class="ruby-identifier">code</span>])
809:       <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">a2</span>=<span class="ruby-identifier">a2</span>
810:       <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">sex</span>=<span class="ruby-identifier">c</span>.<span class="ruby-identifier">sex</span>
811:       <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">mobiletel</span>=<span class="ruby-identifier">c</span>.<span class="ruby-identifier">mobiletel</span>
812:       <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">telh</span>=<span class="ruby-identifier">c</span>.<span class="ruby-identifier">telh</span>
813:       <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">fax</span>=<span class="ruby-identifier">c</span>.<span class="ruby-identifier">fax</span>
814:       <span class="ruby-comment cmt">#助理评价</span>
815:       <span class="ruby-identifier">sc</span>=<span class="ruby-constant">TbEvaluate</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:score</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and arbitman=?&quot;</span>,<span class="ruby-identifier">c</span>.<span class="ruby-identifier">code</span>])
816:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">a2</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">sc!</span>=<span class="ruby-keyword kw">nil</span>
817:         <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">score</span>=(<span class="ruby-identifier">sc</span>.<span class="ruby-identifier">to_i</span><span class="ruby-operator">+</span> <span class="ruby-identifier">a2</span><span class="ruby-operator">*</span><span class="ruby-value">100</span>)<span class="ruby-operator">/</span><span class="ruby-identifier">a2</span>
818:       <span class="ruby-keyword kw">end</span>
819:       <span class="ruby-comment cmt">#校核评价</span>
820:       <span class="ruby-identifier">sc2</span>=<span class="ruby-constant">TbAwardJudge</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:score</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and (arbitman1=? or arbitman2=? or arbitman3=?)&quot;</span>,<span class="ruby-identifier">c</span>.<span class="ruby-identifier">code</span>,<span class="ruby-identifier">c</span>.<span class="ruby-identifier">code</span>,<span class="ruby-identifier">c</span>.<span class="ruby-identifier">code</span>])
821:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">a2</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">sc2!</span>=<span class="ruby-keyword kw">nil</span>
822:         <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">score2</span>=<span class="ruby-identifier">sc2</span>.<span class="ruby-identifier">to_i</span><span class="ruby-operator">/</span><span class="ruby-identifier">a2</span>
823:       <span class="ruby-keyword kw">end</span>
824:       <span class="ruby-comment cmt">#起草裁决数量</span>
825:       <span class="ruby-identifier">j_ad</span>=<span class="ruby-value">0</span>
826:       <span class="ruby-comment cmt">#已结案件中，担任首席/独任的总数（A类) #################################</span>
827:       <span class="ruby-identifier">a_a</span>=<span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:recevice_code</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;state&gt;=4 and state&lt;100 and code=? and caseendbook_id_first is not null and (arbitmantype='0001' or arbitmantype='0002')&quot;</span>,<span class="ruby-identifier">c</span>.<span class="ruby-identifier">code</span>])
828:       <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">a_a</span>=<span class="ruby-identifier">a_a</span>
829:       <span class="ruby-comment cmt">#A类：起草裁决书的数量</span>
830:       <span class="ruby-identifier">award</span>=<span class="ruby-constant">TbAwardDetail</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;a.used='Y' and a.draftsman_typ='0001' and a.draftsman=? and (a.typ='0003' or a.typ='0004')&quot;</span>,<span class="ruby-identifier">c</span>.<span class="ruby-identifier">code</span>],<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;as a inner join tb_cases as cc on cc.used='Y' and cc.state&gt;=4 and cc.state&lt;100 and cc.recevice_code=a.recevice_code&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;count(distinct(a.recevice_code)) as ac&quot;</span>)
831:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">award!</span>=<span class="ruby-keyword kw">nil</span>
832:         <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">a_b</span>=<span class="ruby-identifier">award</span>.<span class="ruby-identifier">ac</span>
833:         <span class="ruby-identifier">j_ad</span> = <span class="ruby-identifier">j_ad</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">award</span>.<span class="ruby-identifier">ac</span>
834:       <span class="ruby-keyword kw">end</span>
835:       <span class="ruby-comment cmt">#A类：延期裁决案件的数量</span>
836:       <span class="ruby-identifier">delays</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select count(distinct(tb_casedelays.recevice_code)) as ac from tb_cases,tb_casearbitmen,tb_casedelays where tb_casedelays.used='Y' and tb_casedelays.recevice_code=tb_cases.recevice_code and tb_cases.used='Y' and tb_cases.state&gt;=4 and tb_cases.state&lt;100
837:         and tb_cases.recevice_code=tb_casearbitmen.recevice_code and tb_casearbitmen.used='Y' and tb_casearbitmen.arbitman='#{c.code}' and (tb_casearbitmen.arbitmantype='0001' or tb_casearbitmen.arbitmantype='0002')&quot;</span>)
838:       <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">d</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">delays</span>
839:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d!</span>=<span class="ruby-keyword kw">nil</span>
840:           <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">a_c</span>=<span class="ruby-identifier">d</span>.<span class="ruby-identifier">ac</span>
841:         <span class="ruby-keyword kw">end</span>
842:       <span class="ruby-keyword kw">end</span>
843:       <span class="ruby-comment cmt">#A类：被申请回避的次数</span>
844:       <span class="ruby-identifier">tb_evalate</span>=<span class="ruby-constant">TbEvite</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;e.used='Y' and e.arbitman=?&quot;</span>,<span class="ruby-identifier">c</span>.<span class="ruby-identifier">code</span>],<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;as e inner join v_arbitman_cases as va on e.recevice_code=va.recevice_code and va.state&gt;=4 and va.state&lt;100 and (va.arbitmantype='0001' or va.arbitmantype='0002')&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;count(distinct(e.recevice_code)) as ad&quot;</span>)
845:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tb_evalate!</span>=<span class="ruby-keyword kw">nil</span>
846:         <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">a_d</span>=<span class="ruby-identifier">tb_evalate</span>.<span class="ruby-identifier">ad</span>
847:       <span class="ruby-keyword kw">end</span>
848:       <span class="ruby-comment cmt">#A类：平均结案时间</span>
849:       <span class="ruby-identifier">tb_caseendbook</span>=<span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;s.used='Y'&quot;</span>],<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as s inner join v_arbitman_cases as va on s.recevice_code=va.recevice_code and va.state&gt;=4 and va.state&lt;100 and va.code='#{c.code}' and (va.arbitmantype='0001' or va.arbitmantype='0002')&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;sum(datediff(s.decideDate,va.nowdate)) as dat,count(distinct(s.recevice_code)) as aa&quot;</span>)
850:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tb_caseendbook!</span>=<span class="ruby-keyword kw">nil</span>
851:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tb_caseendbook</span>.<span class="ruby-identifier">aa</span>.<span class="ruby-identifier">to_i</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>
852:           <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">a_e</span>=<span class="ruby-identifier">tb_caseendbook</span>.<span class="ruby-identifier">dat</span>.<span class="ruby-identifier">to_i</span><span class="ruby-operator">/</span><span class="ruby-identifier">tb_caseendbook</span>.<span class="ruby-identifier">aa</span>.<span class="ruby-identifier">to_i</span>
853:         <span class="ruby-keyword kw">end</span>
854:       <span class="ruby-keyword kw">end</span>
855:       <span class="ruby-comment cmt">#B类    ###################################</span>
856:       <span class="ruby-identifier">b_a</span>=<span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:recevice_code</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;state&gt;=4 and state&lt;100 and code=? and caseendbook_id_first is not null and (arbitmantype='0003' or arbitmantype='0004')&quot;</span>,<span class="ruby-identifier">c</span>.<span class="ruby-identifier">code</span>])
857:       <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">b_a</span>=<span class="ruby-identifier">b_a</span>
858:       <span class="ruby-comment cmt">#B类：起草裁决书的数量</span>
859:       <span class="ruby-identifier">award</span>=<span class="ruby-constant">TbAwardDetail</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;a.used='Y' and a.draftsman_typ='0001' and a.draftsman=? and (a.typ='0003' or a.typ='0004')&quot;</span>,<span class="ruby-identifier">c</span>.<span class="ruby-identifier">code</span>],<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;as a inner join tb_cases as cc on cc.used='Y' and cc.state&gt;=4 and cc.state&lt;100 and cc.recevice_code=a.recevice_code&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;count(distinct(a.recevice_code)) as ac&quot;</span>)
860:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">award!</span>=<span class="ruby-keyword kw">nil</span>
861:         <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">b_b</span>=<span class="ruby-identifier">award</span>.<span class="ruby-identifier">ac</span>
862:         <span class="ruby-identifier">j_ad</span> = <span class="ruby-identifier">j_ad</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">award</span>.<span class="ruby-identifier">ac</span>
863:       <span class="ruby-keyword kw">end</span>
864:       <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">ad</span> = <span class="ruby-identifier">j_ad</span>
865:       <span class="ruby-comment cmt">#B类：延期裁决案件的数量</span>
866:       <span class="ruby-identifier">delays</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select count(distinct(tb_casedelays.recevice_code)) as ac from tb_cases,tb_casearbitmen,tb_casedelays where tb_casedelays.used='Y' and tb_casedelays.recevice_code=tb_cases.recevice_code and tb_cases.used='Y' and tb_cases.state&gt;=4 and tb_cases.state&lt;100
867:         and tb_cases.recevice_code=tb_casearbitmen.recevice_code and tb_casearbitmen.used='Y' and tb_casearbitmen.arbitman='#{c.code}' and (tb_casearbitmen.arbitmantype='0003' or tb_casearbitmen.arbitmantype='0004')&quot;</span>)
868:       <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">d</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">delays</span>
869:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d!</span>=<span class="ruby-keyword kw">nil</span>
870:           <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">b_c</span>=<span class="ruby-identifier">d</span>.<span class="ruby-identifier">ac</span>
871:         <span class="ruby-keyword kw">end</span>
872:       <span class="ruby-keyword kw">end</span>
873:       <span class="ruby-comment cmt">#B类：被申请回避的次数</span>
874:       <span class="ruby-identifier">tb_evalate</span>=<span class="ruby-constant">TbEvite</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;e.used='Y' and e.arbitman=?&quot;</span>,<span class="ruby-identifier">c</span>.<span class="ruby-identifier">code</span>],<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;as e inner join v_arbitman_cases as va on e.recevice_code=va.recevice_code and va.state&gt;=4 and va.state&lt;100 and (va.arbitmantype='0003' or va.arbitmantype='0004')&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;count(distinct(e.recevice_code)) as ad&quot;</span>)
875:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tb_evalate!</span>=<span class="ruby-keyword kw">nil</span>
876:         <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">b_d</span>=<span class="ruby-identifier">tb_evalate</span>.<span class="ruby-identifier">ad</span>
877:       <span class="ruby-keyword kw">end</span>
878:       <span class="ruby-comment cmt">#B类：平均结案时间</span>
879:       <span class="ruby-identifier">tb_caseendbook</span>=<span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;s.used='Y'&quot;</span>],<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as s inner join v_arbitman_cases as va on s.recevice_code=va.recevice_code and va.state&gt;=4 and va.state&lt;100 and va.code='#{c.code}' and (va.arbitmantype='0003' or va.arbitmantype='0004')&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;sum(datediff(s.decideDate,va.nowdate)) as dat,count(distinct(s.recevice_code)) as aa&quot;</span>)
880:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tb_caseendbook!</span>=<span class="ruby-keyword kw">nil</span>
881:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tb_caseendbook</span>.<span class="ruby-identifier">aa</span>.<span class="ruby-identifier">to_i</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>
882:           <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">b_e</span>=<span class="ruby-identifier">tb_caseendbook</span>.<span class="ruby-identifier">dat</span>.<span class="ruby-identifier">to_i</span><span class="ruby-operator">/</span><span class="ruby-identifier">tb_caseendbook</span>.<span class="ruby-identifier">aa</span>.<span class="ruby-identifier">to_i</span>
883:         <span class="ruby-keyword kw">end</span>
884:       <span class="ruby-keyword kw">end</span>
885: 
886:       <span class="ruby-ivar">@arbitmancase</span>.<span class="ruby-identifier">save</span>
887:     <span class="ruby-keyword kw">end</span>
888:     <span class="ruby-identifier">cc</span>=<span class="ruby-node">&quot;user_code='#{session[:user_code]}'&quot;</span>
889:     <span class="ruby-ivar">@arbitmancaseaa</span>=<span class="ruby-constant">ReportArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">cc</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order</span>)
890:     <span class="ruby-constant">ReportArbitmanCase</span>.<span class="ruby-identifier">delete_all</span>(<span class="ruby-node">&quot;user_code='#{session[:user_code]}'&quot;</span>)
891:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000060" class="method-detail">
        <a name="M000060"></a>

        <div class="method-heading">
          <a href="#M000060" class="method-signature">
          <span class="method-name">list3_a1</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
仲裁员 办理 案案件案件明细表 在办案件
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000060-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000060-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 731</span>
731:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_a1</span>
732:     <span class="ruby-ivar">@name</span> = <span class="ruby-constant">TbArbitman</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and code=?&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]]).<span class="ruby-identifier">name</span>
733:     <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as recevice_code,c.case_code as case_code,c.nowdate as nowdate,c.end_code as end_code,ca.arbitmansign as arbitmansign from tb_cases as c,tb_casearbitmen as ca where c.used='Y' and c.state&gt;=4 and c.state&lt;100 and c.caseendbook_id_first is null and c.recevice_code=ca.recevice_code and ca.used='Y' and ca.arbitman='#{params[:code]}' order by right(c.case_code,7)&quot;</span>)
734:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000061" class="method-detail">
        <a name="M000061"></a>

        <div class="method-heading">
          <a href="#M000061" class="method-signature">
          <span class="method-name">list3_a2</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
结案案件
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000061-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000061-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 737</span>
737:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_a2</span>
738:     <span class="ruby-ivar">@name</span> = <span class="ruby-constant">TbArbitman</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and code=?&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]]).<span class="ruby-identifier">name</span>
739:     <span class="ruby-comment cmt">#    if params[:k]==&quot;1&quot;</span>
740:     <span class="ruby-comment cmt">#      @arbitman_case = VArbitmanCase.find(:all,:conditions=&gt;[&quot;state&gt;=4 and state&lt;100 and caseendbook_id_first is null and code=?&quot;,params[:code]],:order=&gt;&quot;right(case_code,7)&quot;)</span>
741:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;2&quot;</span>
742:       <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct recevice_code,nowdate,case_code,end_code&quot;</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;state&gt;=4 and caseendbook_id_first is not null and code=?&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
743:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;3&quot;</span>
744:       <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct recevice_code,nowdate,case_code,end_code&quot;</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;state&gt;=4 and caseendbook_id_first is not null and code=? and (arbitmantype='0001' or arbitmantype='0002')&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
745:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;4&quot;</span>   <span class="ruby-comment cmt">#A类：起草裁决书的数量</span>
746:       <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">TbAwardDetail</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct a.recevice_code as recevice_code,cc.case_code as case_code,cc.nowdate as nowdate,cc.end_code as end_code from tb_award_details as a,v_arbitman_cases as cc,tb_awards as aw where a.used='Y' and a.draftsman_typ='0001' and a.draftsman='#{params[:code]}' and (a.typ='0003' or a.typ='0004') and a.recevice_code=aw.recevice_code and aw.used='Y' and a.p_id=aw.id and aw.recevice_code=cc.recevice_code and a.draftsman=cc.code and cc.state&gt;=4 and cc.caseendbook_id_first is not null and (cc.arbitmantype='0001' or cc.arbitmantype='0002') order by right(cc.case_code,7)&quot;</span>)
747:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;5&quot;</span>  <span class="ruby-comment cmt">#A类：延期裁决案件的数量</span>
748:       <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_casedelays.recevice_code as recevice_code,tb_cases.case_code as case_code,tb_cases.nowdate as nowdate,tb_cases.end_code as end_code from tb_cases,tb_casearbitmen,tb_casedelays where tb_casedelays.used='Y' and tb_casedelays.recevice_code=tb_cases.recevice_code and tb_cases.used='Y' and tb_cases.state&gt;=4
749:          and tb_cases.caseendbook_id_first is not null and tb_cases.recevice_code=tb_casearbitmen.recevice_code and tb_casearbitmen.used='Y' and tb_casearbitmen.arbitman='#{params[:code]}' and (tb_casearbitmen.arbitmantype='0001' or tb_casearbitmen.arbitmantype='0002') order by right(tb_cases.case_code,7)&quot;</span>)
750:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;6&quot;</span> <span class="ruby-comment cmt">#被申请回避的次数</span>
751:       <span class="ruby-ivar">@arbitman_case</span>=<span class="ruby-constant">TbEvite</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct e.recevice_code as recevice_code,va.case_code as case_code,va.nowdate as nowdate,va.end_code as end_code&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;as e inner join v_arbitman_cases as va on e.arbitman=va.code and e.recevice_code=va.recevice_code and va.state&gt;=4 and va.caseendbook_id_first is not null and (va.arbitmantype='0001' or va.arbitmantype='0002')&quot;</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;e.used='Y' and e.arbitman=?&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(va.case_code,7)&quot;</span>)
752:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;7&quot;</span> <span class="ruby-comment cmt">#平均结案时间</span>
753:       <span class="ruby-ivar">@arbitman_case</span>=<span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;s.used='Y'&quot;</span>],<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as s inner join v_arbitman_cases as va on s.recevice_code=va.recevice_code and va.state&gt;=4 and va.caseendbook_id_first is not null and va.code='#{params[:code]}' and (va.arbitmantype='0001' or va.arbitmantype='0002')&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct s.recevice_code as recevice_code,va.nowdate as nowdate,va.case_code as case_code,va.end_code as end_code&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(va.case_code,7)&quot;</span>)
754:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;8&quot;</span>  <span class="ruby-comment cmt">#B类案件开始 </span>
755:       <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;state&gt;=4 and caseendbook_id_first is not null and code=? and (arbitmantype='0003' or arbitmantype='0004')&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(case_code,7)&quot;</span>)
756:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;9&quot;</span>   <span class="ruby-comment cmt">#B类：起草裁决书的数量</span>
757:       <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">TbAwardDetail</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct a.recevice_code as recevice_code,cc.case_code as case_code,cc.nowdate as nowdate,cc.end_code as end_code from tb_award_details as a,v_arbitman_cases as cc,tb_awards as aw where a.used='Y' and a.draftsman_typ='0001' and a.draftsman='#{params[:code]}' and (a.typ='0003' or a.typ='0004') and a.recevice_code=aw.recevice_code and aw.used='Y' and a.p_id=aw.id and aw.recevice_code=cc.recevice_code and a.draftsman=cc.code and cc.state&gt;=4 and cc.caseendbook_id_first is not null and (cc.arbitmantype='0003' or cc.arbitmantype='0004') order by right(cc.case_code,7)&quot;</span>)
758:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;10&quot;</span>  <span class="ruby-comment cmt">#B类：延期裁决案件的数量</span>
759:       <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_casedelays.recevice_code as recevice_code,tb_cases.case_code as case_code,tb_cases.nowdate as nowdate,tb_cases.end_code as end_code from tb_cases,tb_casearbitmen,tb_casedelays where tb_casedelays.used='Y' and tb_casedelays.recevice_code=tb_cases.recevice_code and tb_cases.used='Y' and tb_cases.state&gt;=4
760:          and tb_cases.caseendbook_id_first is not null and tb_cases.recevice_code=tb_casearbitmen.recevice_code and tb_casearbitmen.used='Y' and tb_casearbitmen.arbitman='#{params[:code]}' and (tb_casearbitmen.arbitmantype='0003' or tb_casearbitmen.arbitmantype='0004') order by right(tb_cases.case_code,7)&quot;</span>)
761:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;11&quot;</span> <span class="ruby-comment cmt">#被申请回避的次数</span>
762:       <span class="ruby-ivar">@arbitman_case</span>=<span class="ruby-constant">TbEvite</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct e.recevice_code as recevice_code,va.case_code as case_code,va.nowdate as nowdate,va.end_code as end_code&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;as e inner join v_arbitman_cases as va on e.arbitman=va.code and e.recevice_code=va.recevice_code and va.state&gt;=4 and va.caseendbook_id_first is not null and (va.arbitmantype='0003' or va.arbitmantype='0004')&quot;</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;e.used='Y' and e.arbitman=?&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(va.case_code,7)&quot;</span>)
763:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;12&quot;</span> <span class="ruby-comment cmt">#平均结案时间</span>
764:       <span class="ruby-ivar">@arbitman_case</span>=<span class="ruby-constant">TbCaseendbook</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;s.used='Y'&quot;</span>],<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as s inner join v_arbitman_cases as va on s.recevice_code=va.recevice_code and va.state&gt;=4 and va.caseendbook_id_first is not null and va.code='#{params[:code]}' and (va.arbitmantype='0003' or va.arbitmantype='0004')&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;distinct s.recevice_code as recevice_code,va.nowdate as nowdate,va.case_code as case_code,va.end_code as end_code&quot;</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;right(va.case_code,7)&quot;</span>)
765:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;13&quot;</span><span class="ruby-comment cmt">#tb_caseendbooks as s, e.recevice_code=s.recevice_code and s.used='Y' and</span>
766:       <span class="ruby-ivar">@arbitman_case</span>=<span class="ruby-constant">TbEvaluate</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;
767:         SELECT distinct e.recevice_code as recevice_code,c.nowdate as nowdate,c.case_code as case_code,c.end_code as end_code
768:         FROM tb_evaluates  as e,tb_cases as c
769:         where  e.recevice_code=c.recevice_code
770:                and c.used='Y' and c.state&gt;=4 and c.caseendbook_id_first is not null and e.used='Y' and e.arbitman='#{params[:code]}'
771:         ORDER BY right(c.case_code,7)&quot;</span>
772:       )
773:       <span class="ruby-comment cmt">#    elsif params[:k]==&quot;14&quot; #起草裁决数量</span>
774:       <span class="ruby-comment cmt">#      @arbitman_case=TbAwardDetail.find_by_sql(&quot;select distinct c.recevice_code as recevice_code,c.case_code as case_code,c.nowdate as nowdate,c.end_code as end_code from tb_award_details as a,tb_cases as c,tb_awards as aa where a.used='Y' and a.draftsman_typ='0001' and a.draftsman='#{params[:code]}' and (a.typ='0003' or a.typ='0004') and  a.recevice_code=aa.recevice_code and aa.used='Y' and a.p_id=aa.id and  aa.recevice_code=c.recevice_code and c.used='Y' and c.state&gt;=4 and c.caseendbook_id_first is not null&quot;)</span>
775:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;15&quot;</span> <span class="ruby-comment cmt">#核校评价</span>
776:         <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">TbAwardJudge</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct c.recevice_code as recevice_code,c.case_code as case_code,c.nowdate as nowdate,c.end_code as end_code from tb_award_judges as j,tb_cases as c where j.used='Y' and (j.arbitman1='#{params[:code]}' or j.arbitman2='#{params[:code]}' or j.arbitman3='#{params[:code]}') and j.recevice_code=c.recevice_code and c.used='Y' and c.state&gt;=4&quot;</span>)
777:     <span class="ruby-keyword kw">end</span>
778:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000063" class="method-detail">
        <a name="M000063"></a>

        <div class="method-heading">
          <a href="#M000063" class="method-signature">
          <span class="method-name">list3_a3</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000063-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000063-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 791</span>
791:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_a3</span>
792:     <span class="ruby-comment cmt">#    delays=TbCase.count(&quot;1=1&quot;,&quot;inner join tb_casearbitmen on tb_casearbitmen.arbitman='#{c.code}' and tb_casearbitmen.used='Y' and tb_cases.used='Y' and tb_cases.recevice_code=tb_casearbitmen.recevice_code   inner join tb_casedelays on tb_cases.used='Y' and tb_casedelays.used='Y' and tb_cases.recevice_code=tb_casedelays.recevice_code&quot;)</span>
793:     <span class="ruby-ivar">@name</span> = <span class="ruby-constant">TbArbitman</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and code=?&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]]).<span class="ruby-identifier">name</span>
794:     <span class="ruby-ivar">@arbitman_case</span> = <span class="ruby-constant">VArbitmanCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;state&gt;=4 and state&lt;100 and caseendbook_id_first is not null and code=?&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]],<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;general_code&quot;</span>)
795:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000062" class="method-detail">
        <a name="M000062"></a>

        <div class="method-heading">
          <a href="#M000062" class="method-signature">
          <span class="method-name">list3_a4</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
仲裁员评价加减分
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000062-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000062-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 781</span>
781:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3_a4</span>
782:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:lines</span>].<span class="ruby-identifier">blank?</span>
783:     <span class="ruby-ivar">@name</span> = <span class="ruby-constant">TbArbitman</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot;used='Y' and code=?&quot;</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]]).<span class="ruby-identifier">name</span>
784:     <span class="ruby-identifier">code</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:code</span>]
785:     <span class="ruby-ivar">@add_less1_pages</span>,<span class="ruby-ivar">@add_less1</span> = <span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">TbArbitman</span>,<span class="ruby-node">&quot;select e.recevice_code as recevice_code,e.score as score,e.remark as remark,a.name as name from tb_arbitmen as a,tb_evaluates as e where e.used='Y' and
786:       e.arbitman=a.code and a.used='Y' and a.code='#{code}' and e.score&gt;0 order by e.u_t desc&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
787:     <span class="ruby-ivar">@add_less2_pages</span>,<span class="ruby-ivar">@add_less2</span> = <span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">TbArbitman</span>,<span class="ruby-node">&quot;select e.recevice_code as recevice_code,e.score as score,e.remark as remark,a.name as name from tb_arbitmen as a,tb_evaluates as e where e.used='Y' and
788:       e.arbitman=a.code and a.used='Y' and a.code='#{code}' and e.score&lt;0 order by e.u_t desc&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
789:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000032" class="method-detail">
        <a name="M000032"></a>

        <div class="method-heading">
          <a href="#M000032" class="method-signature">
          <span class="method-name">list3a</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
按仲裁程序类型统计 案件列表
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000032-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000032-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 33</span>
33:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list3a</span>
34:     <span class="ruby-ivar">@dispute</span>={<span class="ruby-value str">&quot;01&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案时间段&quot;</span>,<span class="ruby-value str">&quot;02&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;结案时间段&quot;</span>,<span class="ruby-value str">&quot;03&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案结案时间段&quot;</span>}  <span class="ruby-comment cmt">#时间段类型</span>
35:     <span class="ruby-ivar">@endstyle</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:endstyle</span>]
36:     <span class="ruby-ivar">@date1</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date1</span>]
37:     <span class="ruby-ivar">@date2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date2</span>]
38:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@endstyle</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@endstyle</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
39:       <span class="ruby-ivar">@endstyle_sql</span>=<span class="ruby-value str">&quot; 1=1 &quot;</span>
40:     <span class="ruby-keyword kw">else</span>
41:       <span class="ruby-ivar">@endstyle_sql</span>=<span class="ruby-node">&quot; b.endStyle='#{@endstyle}' &quot;</span>
42:     <span class="ruby-keyword kw">end</span>
43:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:datestyle</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'01'</span> <span class="ruby-comment cmt">#立案时间段</span>
44:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;1&quot;</span>
45:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=0 and datediff(b.decideDate,ca.nowdate)&lt;=15 and ca.nowdate&gt;='#{@date1}' and ca.nowdate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
46:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;2&quot;</span>
47:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=16 and datediff(b.decideDate,ca.nowdate)&lt;=30 and ca.nowdate&gt;='#{@date1}' and ca.nowdate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
48:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;3&quot;</span>
49:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=31 and datediff(b.decideDate,ca.nowdate)&lt;=60 and ca.nowdate&gt;='#{@date1}' and ca.nowdate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
50:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;4&quot;</span>
51:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=61 and datediff(b.decideDate,ca.nowdate)&lt;=75 and ca.nowdate&gt;='#{@date1}' and ca.nowdate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
52:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;5&quot;</span>
53:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=76 and datediff(b.decideDate,ca.nowdate)&lt;=90 and ca.nowdate&gt;='#{@date1}' and ca.nowdate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
54:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;6&quot;</span>
55:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=91 and datediff(b.decideDate,ca.nowdate)&lt;=120 and ca.nowdate&gt;='#{@date1}' and ca.nowdate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
56:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;7&quot;</span>
57:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=121 and datediff(b.decideDate,ca.nowdate)&lt;=150 and ca.nowdate&gt;='#{@date1}' and ca.nowdate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
58:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;8&quot;</span>
59:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=151 and datediff(b.decideDate,ca.nowdate)&lt;=180 and ca.nowdate&gt;='#{@date1}' and ca.nowdate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
60:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;9&quot;</span>
61:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=181 and datediff(b.decideDate,ca.nowdate)&lt;=240 and ca.nowdate&gt;='#{@date1}' and ca.nowdate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
62:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;10&quot;</span>
63:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=241 and datediff(b.decideDate,ca.nowdate)&lt;=365 and ca.nowdate&gt;='#{@date1}' and ca.nowdate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
64:       <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt">#params[:k]==&quot;11&quot;</span>
65:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;365 and ca.nowdate&gt;='#{@date1}' and ca.nowdate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
66:       <span class="ruby-keyword kw">end</span>
67:     <span class="ruby-keyword kw">else</span>
68:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;1&quot;</span>
69:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=0 and datediff(b.decideDate,ca.nowdate)&lt;=15 and b.decideDate&gt;='#{@date1}' and b.decideDate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
70:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;2&quot;</span>
71:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=16 and datediff(b.decideDate,ca.nowdate)&lt;=30 and b.decideDate&gt;='#{@date1}' and b.decideDate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
72:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;3&quot;</span>
73:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=31 and datediff(b.decideDate,ca.nowdate)&lt;=60 and b.decideDate&gt;='#{@date1}' and b.decideDate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
74:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;4&quot;</span>
75:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=61 and datediff(b.decideDate,ca.nowdate)&lt;=75 and b.decideDate&gt;='#{@date1}' and b.decideDate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
76:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;5&quot;</span>
77:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=76 and datediff(b.decideDate,ca.nowdate)&lt;=90 and b.decideDate&gt;='#{@date1}' and b.decideDate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
78:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;6&quot;</span>
79:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=91 and datediff(b.decideDate,ca.nowdate)&lt;=120 and b.decideDate&gt;='#{@date1}' and b.decideDate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
80:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;7&quot;</span>
81:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=121 and datediff(b.decideDate,ca.nowdate)&lt;=150 and b.decideDate&gt;='#{@date1}' and b.decideDate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
82:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;8&quot;</span>
83:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=151 and datediff(b.decideDate,ca.nowdate)&lt;=180 and b.decideDate&gt;='#{@date1}' and b.decideDate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
84:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;9&quot;</span>
85:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=181 and datediff(b.decideDate,ca.nowdate)&lt;=240 and b.decideDate&gt;='#{@date1}' and b.decideDate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
86:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:k</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;10&quot;</span>
87:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;=241 and datediff(b.decideDate,ca.nowdate)&lt;=365 and b.decideDate&gt;='#{@date1}' and b.decideDate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
88:       <span class="ruby-keyword kw">else</span>
89:         <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;datediff(b.decideDate,ca.nowdate)&gt;365 and b.decideDate&gt;='#{@date1}' and b.decideDate&lt;='#{@date2}' and ca.used='Y' and ca.aribitprog_num='#{params[:aribitprog_num]}'&quot;</span>,<span class="ruby-identifier">:joins=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;as ca inner join tb_caseendbooks as b on ca.recevice_code=b.recevice_code and ca.caseendbook_id_first=b.id and #{@endstyle_sql} and ca.used='Y' and b.used='Y'&quot;</span>,<span class="ruby-identifier">:select=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;ca.recevice_code as recevice_code,ca.case_code as case_code,ca.nowdate as nowdate,ca.amount as amount,ca.clerk as clerk,b.decideDate as decideDate,b.arbitBookNum as arbitBookNum&quot;</span>)
90:       <span class="ruby-keyword kw">end</span>
91:     <span class="ruby-keyword kw">end</span>
92:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000080" class="method-detail">
        <a name="M000080"></a>

        <div class="method-heading">
          <a href="#M000080" class="method-signature">
          <span class="method-name">list4</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
核校工作统计
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000080-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000080-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 1404</span>
1404:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list4</span>
1405:     <span class="ruby-ivar">@da1</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:da1</span>]
1406:     <span class="ruby-ivar">@da2</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:da2</span>]
1407:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@da1</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
1408:       <span class="ruby-ivar">@da1</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">at_beginning_of_year</span>.<span class="ruby-identifier">to_date</span>
1409:     <span class="ruby-keyword kw">end</span>
1410:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@da2</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
1411:       <span class="ruby-ivar">@da2</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_date</span>
1412:     <span class="ruby-keyword kw">end</span>
1413:     <span class="ruby-ivar">@users</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;
1414:       SELECT DISTINCT
1415:          users.CODE as code,users.NAME as name
1416:       FROM
1417:          users,user_duties
1418:       WHERE users.used = 'Y' AND users.states = 'Y' AND users. CODE = user_duties.user_code
1419:        AND user_duties.duty_code = '0007' ORDER BY users. CODE
1420:       &quot;</span>)
1421:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000083" class="method-detail">
        <a name="M000083"></a>

        <div class="method-heading">
          <a href="#M000083" class="method-signature">
          <span class="method-name">list_32</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000083-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000083-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 1452</span>
1452:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_32</span>
1453:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_32&quot;</span>
1454:     <span class="ruby-ivar">@hant_search_1</span>=[
1455:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'受案号'</span>,<span class="ruby-value str">'text'</span>,[]],
1456:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],
1457:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'tb_cases_nowdate'</span>,<span class="ruby-value str">'受案时间'</span>,<span class="ruby-value str">'text'</span>,[]],
1458:       [<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'tb_caseendbooks_decideDate'</span>,<span class="ruby-value str">'结案时间'</span>,<span class="ruby-value str">'text'</span>,[]],
1459:       [<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_parties_partyname'</span>,<span class="ruby-value str">'当事人'</span>,<span class="ruby-value str">'text'</span>,[]]
1460:     ]
1461:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'tb_cases_nowdate'</span>,<span class="ruby-value str">'tb_caseendbooks_decideDate'</span>,<span class="ruby-value str">'tb_parties_partyname'</span>
1462:       ]
1463:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
1464:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
1465:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;cases.tb_caseendbooks_decideDate desc&quot;</span>
1466:       
1467:     <span class="ruby-keyword kw">end</span>
1468:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
1469:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
1470:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
1471:     <span class="ruby-keyword kw">end</span>
1472:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
1473:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
1474:     <span class="ruby-ivar">@hant_search_1_text</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_text</span>]
1475:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
1476:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
1477:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
1478:     <span class="ruby-keyword kw">end</span>
1479:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
1480:     <span class="ruby-keyword kw">else</span>
1481:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
1482:     <span class="ruby-keyword kw">end</span>
1483:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;select distinct tb_cases_recevice_code, tb_cases_case_code, tb_cases_end_code,tb_cases_nowdate, tb_caseendbooks_decideDate from v_case_query1_list1s  where tb_cases_used='Y' and tb_cases_state&gt;=4 &quot;</span>
1484:     <span class="ruby-comment cmt">#c=&quot;tb_cases_state&gt;=-1 and tb_cases_state&lt;&gt;2 and tb_cases_state&lt;&gt;3&quot;</span>
1485:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
1486:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
1487:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
1488:     <span class="ruby-keyword kw">end</span>
1489:     <span class="ruby-identifier">sql</span> = <span class="ruby-value str">&quot;select cases.tb_cases_case_code as tb_cases_case_code,cases.tb_cases_nowdate as tb_cases_nowdate, cases.tb_caseendbooks_decideDate as tb_caseendbooks_decideDate,cases.tb_cases_end_code as tb_cases_end_code, (select sum(tb_should_charges.re_rmb_money)  from tb_should_charges where tb_should_charges.recevice_code=cases.tb_cases_recevice_code and tb_should_charges.typ in ('0001','0004','0009') and tb_should_charges.used='Y') as n1,(select sum(tb_should_charges.re_rmb_money)  from tb_should_charges where tb_should_charges.recevice_code=cases.tb_cases_recevice_code and tb_should_charges.typ in ('0008') and tb_should_charges.used='Y') as n2,(select sum(tb_should_refunds.rmb_money)  from tb_should_refunds where tb_should_refunds.recevice_code=cases.tb_cases_recevice_code and tb_should_refunds.typ in ('0001','0004','0009') and tb_should_refunds.used='Y') as n3,(select sum(tb_should_refunds.rmb_money) from tb_should_refunds where tb_should_refunds.recevice_code=cases.tb_cases_recevice_code and tb_should_refunds.typ='0008' and tb_should_refunds.used='Y')  as n4,(select sum(tb_should_refunds.re_rmb_money)  from tb_should_refunds where tb_should_refunds.recevice_code=cases.tb_cases_recevice_code and tb_should_refunds.typ in ('0001','0004','0009') and tb_should_refunds.used='Y') as n5,(select sum(tb_should_refunds.re_rmb_money)  from tb_should_refunds where tb_should_refunds.recevice_code=cases.tb_cases_recevice_code and tb_should_refunds.typ='0008' and tb_should_refunds.used='Y') as n6,(select sum(tb_should_charges.re_rmb_money)  from tb_should_charges where tb_should_charges.recevice_code=cases.tb_cases_recevice_code and tb_should_charges.typ in ('0007') and tb_should_charges.used='Y') as n9,(select sum(tb_should_refunds.rmb_money)  from tb_should_refunds where tb_should_refunds.recevice_code=cases.tb_cases_recevice_code and tb_should_refunds.typ in ('0007') and tb_should_refunds.used='Y') as n10,(select sum(tb_should_refunds.re_rmb_money)  from tb_should_refunds where tb_should_refunds.recevice_code=cases.tb_cases_recevice_code and tb_should_refunds.typ in ('0007') and tb_should_refunds.used='Y') as n11,fun_partyinfo_1(cases.tb_cases_recevice_code) as n12,fun_partyinfo_2(cases.tb_cases_recevice_code) as n13  from (&quot;</span> <span class="ruby-operator">+</span>  <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; ) as cases&quot;</span>;
1490:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>, <span class="ruby-identifier">sql</span> <span class="ruby-operator">+</span>  <span class="ruby-node">&quot; order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
1491:     
1492:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000074" class="method-detail">
        <a name="M000074"></a>

        <div class="method-heading">
          <a href="#M000074" class="method-signature">
          <span class="method-name">list_j</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
管辖权决定详细信息
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000074-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000074-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/census3_controller.rb, line 1119</span>
1119:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_j</span>
1120:     <span class="ruby-identifier">d1</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d1</span>]
1121:     <span class="ruby-identifier">d2</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d2</span>]
1122:     <span class="ruby-comment cmt"># 提出时间</span>
1123:     <span class="ruby-identifier">d3</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d3</span>]
1124:     <span class="ruby-identifier">d4</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:d4</span>]
1125:     <span class="ruby-identifier">rc</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:recevice_code</span>]
1126: 
1127:     <span class="ruby-keyword kw">if</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">d1</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">d2</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">d3</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">d4</span>.<span class="ruby-identifier">blank?</span>) <span class="ruby-comment cmt"># 同时不为空</span>
1128:       <span class="ruby-ivar">@juri</span> = <span class="ruby-constant">VJurion</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1129:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;nowdate&gt;=? and nowdate&lt;=? and request_date&gt;=? and request_date &lt;=? and recevice_code=? &quot;</span>,<span class="ruby-identifier">d1</span>,<span class="ruby-identifier">d2</span>,<span class="ruby-identifier">d3</span>,<span class="ruby-identifier">d4</span>,<span class="ruby-identifier">rc</span>],
1130:         <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;request_date&quot;</span>
1131:       )
1132:     <span class="ruby-keyword kw">elsif</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">d1</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">d2</span>.<span class="ruby-identifier">blank?</span>)
1133:       <span class="ruby-ivar">@juri</span> = <span class="ruby-constant">VJurion</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1134:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;nowdate&gt;=? and nowdate&lt;=? and recevice_code=? &quot;</span>,<span class="ruby-identifier">d1</span>,<span class="ruby-identifier">d2</span>,<span class="ruby-identifier">rc</span>],
1135:         <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;request_date&quot;</span>
1136:       )
1137:     <span class="ruby-keyword kw">elsif</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">d3</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">d4</span>.<span class="ruby-identifier">blank?</span>)
1138:       <span class="ruby-ivar">@juri</span> = <span class="ruby-constant">VJurion</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1139:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot; request_date &gt;=? and request_date &lt;=? and recevice_code=?&quot;</span>,<span class="ruby-identifier">d3</span>,<span class="ruby-identifier">d4</span>,<span class="ruby-identifier">rc</span>],
1140:         <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;request_date&quot;</span>
1141:       )
1142:     <span class="ruby-keyword kw">else</span>
1143:       <span class="ruby-ivar">@juri</span> = []
1144:     <span class="ruby-keyword kw">end</span>
1145: 
1146:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>