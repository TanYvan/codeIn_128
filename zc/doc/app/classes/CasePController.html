<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: CasePController</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">CasePController</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/controllers/case_p_controller_rb.html">
                app/controllers/case_p_controller.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="ApplicationController.html">
                ApplicationController
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000712">case_doc</a>&nbsp;&nbsp;
      <a href="#M000713">list</a>&nbsp;&nbsp;
      <a href="#M000715">list1</a>&nbsp;&nbsp;
      <a href="#M000717">list_1</a>&nbsp;&nbsp;
      <a href="#M000719">list_2</a>&nbsp;&nbsp;
      <a href="#M000721">list_3</a>&nbsp;&nbsp;
      <a href="#M000723">list_4</a>&nbsp;&nbsp;
      <a href="#M000725">list_5</a>&nbsp;&nbsp;
      <a href="#M000727">remun_list</a>&nbsp;&nbsp;
      <a href="#M000714">select</a>&nbsp;&nbsp;
      <a href="#M000716">select1</a>&nbsp;&nbsp;
      <a href="#M000718">select_1</a>&nbsp;&nbsp;
      <a href="#M000720">select_2</a>&nbsp;&nbsp;
      <a href="#M000722">select_3</a>&nbsp;&nbsp;
      <a href="#M000724">select_4</a>&nbsp;&nbsp;
      <a href="#M000726">select_5</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000712" class="method-detail">
        <a name="M000712"></a>

        <div class="method-heading">
          <a href="#M000712" class="method-signature">
          <span class="method-name">case_doc</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000712-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000712-source">
<pre>
   <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 2</span>
2:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">case_doc</span>
3:     <span class="ruby-comment cmt">#链接到发文</span>
4:     <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;case_doc&quot;</span>,<span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;list&quot;</span>,<span class="ruby-identifier">:recevice_code=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:recevice_code</span>]
5:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000713" class="method-detail">
        <a name="M000713"></a>

        <div class="method-heading">
          <a href="#M000713" class="method-signature">
          <span class="method-name">list</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
办理案件中立案后结案前的案件选择。助理办案
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000713-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000713-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 7</span>
 7:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list</span>
 8:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:contr_r</span>]<span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
 9:       <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:contr_r</span>]=<span class="ruby-value str">&quot;casebase&quot;</span>
10:     <span class="ruby-keyword kw">end</span>
11:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:act_r</span>]<span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
12:       <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:act_r</span>]=<span class="ruby-value str">&quot;edit&quot;</span>
13:     <span class="ruby-keyword kw">end</span>
14:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list&quot;</span>
15:     <span class="ruby-ivar">@hant_search_1</span>=[[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_parties_partyname'</span>,<span class="ruby-value str">'当事人名称'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_parties_partytype'</span>,<span class="ruby-value str">'当事人类型'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">'申请人'</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">'被申请人'</span>]]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_recevice_code'</span>,<span class="ruby-value str">'咨询流水号'</span>,<span class="ruby-value str">'text'</span>,[]]]
16:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
17:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
18:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;tb_cases_general_code desc&quot;</span>
19:     <span class="ruby-keyword kw">end</span>
20:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
21:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
22:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
23:     <span class="ruby-keyword kw">end</span>
24:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
25:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
26:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
27:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
28:     <span class="ruby-keyword kw">end</span>
29:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
30:     <span class="ruby-keyword kw">else</span>
31:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
32:     <span class="ruby-keyword kw">end</span>
33:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_state&gt;=4 and tb_cases_state&lt;100 and tb_cases_caseendbook_id_first is null and tb_cases_clerk='#{session[:user_code]}'&quot;</span><span class="ruby-comment cmt">#立案未结案 tb_cases_file_submit_u=''</span>
34:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
35:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
36:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
37:     <span class="ruby-keyword kw">end</span>
38:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,<span class="ruby-node">&quot;select distinct tb_cases_id,tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code,tb_cases_end_code,tb_cases_clerk,tb_cases_clerk_2,tb_cases_receivedate,tb_cases_nowdate from v_case_query1_list1s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
39:     <span class="ruby-comment cmt"># 2----------------------------------</span>
40:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
41:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
42:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-value">3000</span>
43:     <span class="ruby-keyword kw">end</span>
44:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>}
45:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
46:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
47:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;general_code desc&quot;</span>
48:     <span class="ruby-keyword kw">end</span>
49:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
50:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
51:     <span class="ruby-keyword kw">end</span>
52:     <span class="ruby-identifier">sql</span> = <span class="ruby-node">&quot;select distinct recevice_code,nowdate,case_code,state,receivedate,aribitprog_num,id,finally_limit_dat from tb_cases where used='Y' and clerk='#{session[:user_code]}' and state&gt;=4 and state&lt;100 and caseendbook_id_first is null and caseorg_id_first is null and recevice_code not in (select recevice_code from tb_check_staffs where used='Y' and typ='0001') order by #{@order}&quot;</span>
53:     <span class="ruby-ivar">@case_pages_2</span>,<span class="ruby-ivar">@case_2</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">TbCase</span>,<span class="ruby-identifier">sql</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
54:     <span class="ruby-comment cmt">## 3-----------------------------------</span>
55:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
56:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
57:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-value">3000</span>
58:     <span class="ruby-keyword kw">end</span>
59:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
60:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
61:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;c.general_code desc&quot;</span>
62:     <span class="ruby-keyword kw">end</span>
63:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>}
64:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
65:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
66:     <span class="ruby-keyword kw">end</span>
67:     <span class="ruby-identifier">sql</span> =<span class="ruby-node">&quot;select distinct c.recevice_code as recevice_code,c.nowdate as nowdate,c.case_code as case_code,c.state as state,c.receivedate as receivedate,c.aribitprog_num as aribitprog_num,c.id as id,c.finally_limit_dat as finally_limit_dat from tb_cases as c
68:     where c.used='Y' and c.clerk='#{session[:user_code]}' and c.state&gt;=4 and c.state&lt;100 and c.caseendbook_id_first is null and c.caseorg_id_first is not null and c.recevice_code not in (select recevice_code from tb_check_staffs where used='Y' and typ='0001')  order by #{@order}&quot;</span>
69:     <span class="ruby-ivar">@case_pages_3</span>,<span class="ruby-ivar">@case_3</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">TbCase</span>,<span class="ruby-identifier">sql</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
70:     <span class="ruby-comment cmt"># 4 ------------------------------------------</span>
71:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
72:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
73:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-value">3000</span>
74:     <span class="ruby-keyword kw">end</span>
75:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
76:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
77:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;c.general_code desc&quot;</span>
78:     <span class="ruby-keyword kw">end</span>
79:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>}
80:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
81:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
82:     <span class="ruby-keyword kw">end</span>
83:     <span class="ruby-identifier">sql</span> =<span class="ruby-node">&quot;select distinct c.recevice_code as recevice_code,c.nowdate as nowdate,c.case_code as case_code,c.state as state,c.receivedate as receivedate,c.aribitprog_num as aribitprog_num,c.id as id,c.finally_limit_dat as finally_limit_dat from tb_cases as c
84:     where c.used='Y' and c.clerk='#{session[:user_code]}' and c.state&gt;=4 and c.state&lt;100 and c.caseendbook_id_first is null and c.recevice_code in (select recevice_code from tb_check_staffs where used='Y' and typ='0001') order by #{@order}&quot;</span>
85:     <span class="ruby-ivar">@case_pages_4</span>,<span class="ruby-ivar">@case_4</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">TbCase</span>,<span class="ruby-identifier">sql</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
86:     <span class="ruby-comment cmt"># 5--------------------</span>
87:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
88:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
89:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-value">3000</span>
90:     <span class="ruby-keyword kw">end</span>
91:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
92:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
93:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;general_code desc&quot;</span>
94:     <span class="ruby-keyword kw">end</span>
95:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>,<span class="ruby-value">200</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;存档接收&quot;</span>,<span class="ruby-value">220</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档&quot;</span>}
96:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;used='Y' and clerk='#{session[:user_code]}' and state&gt;=4 and  state&lt;150 and state&lt;&gt;100 and caseendbook_id_first is not null and file_submit_u=''&quot;</span>
97:     <span class="ruby-ivar">@case_pages_5</span>,<span class="ruby-ivar">@case_5</span>=<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_cases</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
98:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000715" class="method-detail">
        <a name="M000715"></a>

        <div class="method-heading">
          <a href="#M000715" class="method-signature">
          <span class="method-name">list1</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
案件代收代支费用支出 案件仲裁庭费用支出
案件其它支出
当事人承担实际开支，此4个界面共用一个界面
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000715-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000715-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 108</span>
108:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list1</span>
109:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:contr_r</span>]<span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
110:       <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:contr_r</span>]=<span class="ruby-value str">&quot;casebase&quot;</span>
111:     <span class="ruby-keyword kw">end</span>
112:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:act_r</span>]<span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
113:       <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:act_r</span>]=<span class="ruby-value str">&quot;edit&quot;</span>
114:     <span class="ruby-keyword kw">end</span>
115:     <span class="ruby-comment cmt">#1-----在办案件</span>
116:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
117:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
118:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;nowdate desc&quot;</span>
119:     <span class="ruby-keyword kw">end</span>
120:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
121:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
122:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
123:     <span class="ruby-keyword kw">end</span>
124:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
125:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
126:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
127:     <span class="ruby-keyword kw">end</span>
128:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;used='Y' and state&gt;=4 and state&lt;100 and end_code='' and clerk='#{session[:user_code]}'&quot;</span>
129:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
130:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
131:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
132:     <span class="ruby-keyword kw">end</span>
133:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_cases</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
134:     <span class="ruby-comment cmt"># 5----已结未归档</span>
135:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
136:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
137:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-value">30</span>
138:     <span class="ruby-keyword kw">end</span>
139:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
140:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
141:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;nowdate desc&quot;</span>
142:     <span class="ruby-keyword kw">end</span>
143:     <span class="ruby-ivar">@state</span>={<span class="ruby-value">-1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;重审&quot;</span>,<span class="ruby-value">1</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;咨询&quot;</span>,<span class="ruby-value">4</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;立案&quot;</span>,<span class="ruby-value">5</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;组庭&quot;</span>,<span class="ruby-value">6</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;开庭&quot;</span>,<span class="ruby-value">100</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;终审&quot;</span>,<span class="ruby-value">150</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档申请&quot;</span>}
144:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;used='Y' and clerk='#{session[:user_code]}' and state&gt;=4 and state&lt;&gt;100 and state&lt;150 and end_code&lt;&gt;'' and file_submit_u=''&quot;</span>
145:     <span class="ruby-ivar">@case_pages_5</span>,<span class="ruby-ivar">@case_5</span>=<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_cases</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
146:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000717" class="method-detail">
        <a name="M000717"></a>

        <div class="method-heading">
          <a href="#M000717" class="method-signature">
          <span class="method-name">list_1</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
立案后案件永远显示在页面上，但是助理只能看到自己办过的案件。录入办案人员报酬的时候的案件选择、
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000717-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000717-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 155</span>
155:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_1</span>
156:     <span class="ruby-ivar">@state</span>={<span class="ruby-value str">&quot;1&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;办理&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档&quot;</span>}
157:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_1&quot;</span>
158:     <span class="ruby-ivar">@hant_search_1</span>=[[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_parties_partyname'</span>,<span class="ruby-value str">'当事人名称'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_parties_partytype'</span>,<span class="ruby-value str">'当事人类型'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">'申请人'</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">'被申请人'</span>]]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_recevice_code'</span>,<span class="ruby-value str">'咨询流水号'</span>,<span class="ruby-value str">'text'</span>,[]]]
159:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
160:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
161:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;(case tb_cases_state&gt;=200 when true then 2 else 1 end) asc,right(tb_cases_case_code,7) desc&quot;</span>
162:     <span class="ruby-keyword kw">end</span>
163:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
164:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
165:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
166:     <span class="ruby-keyword kw">end</span>
167:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
168:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
169:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
170:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
171:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
172:     <span class="ruby-keyword kw">end</span>
173:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
174:     <span class="ruby-keyword kw">else</span>
175:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
176:     <span class="ruby-keyword kw">end</span>
177:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_state&gt;=4 and tb_cases_caseendbook_id_first is not null and tb_cases_clerk='#{session[:user_code]}' &quot;</span>
178:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
179:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
180:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
181:     <span class="ruby-keyword kw">end</span>
182:     <span class="ruby-comment cmt">#s=&quot;a.id as id,a.order_type as order_type,a.reviewed_suggestion as reviewed_suggestion,a.journal_id as journal_id,a.institute as institute,a.reviewed as reviewed,a.memo as memo,a.reviewed_suggestion_memo as reviewed_suggestion_memo,a.reviewed_shop_checked as reviewed_shop_checked,b.subject as subject,b.title as title,b.pissn as pissn&quot;</span>
183:     <span class="ruby-comment cmt">#@case_pages,@case=paginate(:tb_cases,:order=&gt;@order,:conditions=&gt;c,:per_page=&gt;@page_lines.to_i)</span>
184:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,<span class="ruby-node">&quot;select distinct (case tb_cases_state&gt;=200 when true then 2 else 1 end) as state,tb_cases_id,tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk,tb_cases_clerk_2,tb_cases_receivedate,tb_cases_nowdate from v_case_query1_list1s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
185:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000719" class="method-detail">
        <a name="M000719"></a>

        <div class="method-heading">
          <a href="#M000719" class="method-signature">
          <span class="method-name">list_2</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
立案后案件永远显示在页面上。管理层（处长）录入办案人员报酬的时候的案件选择、
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000719-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000719-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 196</span>
196:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_2</span>
197:     <span class="ruby-ivar">@state</span>={<span class="ruby-value str">&quot;1&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;办理&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;归档&quot;</span>}
198:     <span class="ruby-ivar">@remun</span>={<span class="ruby-value str">&quot;Y&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;处长确认&quot;</span>,<span class="ruby-value str">&quot;N&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;未发放&quot;</span>}
199:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_2&quot;</span>
200:     <span class="ruby-ivar">@hant_search_1</span>=[[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">&quot;tb_caseendbooks_decideDate&gt;=\\\'2013-11-01\\\' and OrgCount &gt;0 and get_remun_state( tb_cases_recevice_code ) &quot;</span>,<span class="ruby-value str">'结案后,未确认报酬记录'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">''</span>,<span class="ruby-value str">'全部'</span>],[<span class="ruby-value str">'N'</span>,<span class="ruby-value str">'是'</span>]]],[<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'tb_caseendbooks_decideDate'</span>,<span class="ruby-value str">'结案日期'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_parties_partyname'</span>,<span class="ruby-value str">'当事人名称'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_parties_partytype'</span>,<span class="ruby-value str">'当事人类型'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">'申请人'</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">'被申请人'</span>]]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_recevice_code'</span>,<span class="ruby-value str">'咨询流水号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'get_remun_state(tb_cases_recevice_code)'</span>,<span class="ruby-value str">'处长是否已经确认报酬'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value str">''</span>,<span class="ruby-value str">'全部'</span>],[<span class="ruby-value str">'Y'</span>,<span class="ruby-value str">'是'</span>],[<span class="ruby-value str">'N'</span>,<span class="ruby-value str">'否'</span>]]],[<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'get_remun_dt(tb_cases_recevice_code)'</span>,<span class="ruby-value str">'处长确认报酬时间'</span>,<span class="ruby-value str">'text'</span>,[]]]
201:     <span class="ruby-ivar">@hant_search_1_list</span>=[<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'tb_caseendbooks_decideDate'</span>,<span class="ruby-value str">&quot;tb_caseendbooks_decideDate&gt;=\\\'2013-11-01\\\' and OrgCount &gt;0 and get_remun_state( tb_cases_recevice_code ) &quot;</span>]
202:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
203:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
204:       <span class="ruby-comment cmt">#@order=&quot;(case tb_cases_state&gt;=200 when true then 2 else 1 end) asc,right(tb_cases_case_code,7) desc&quot;</span>
205:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;tb_caseendbooks_decideDate desc,right(tb_cases_case_code,7) desc&quot;</span>
206:     <span class="ruby-keyword kw">end</span>
207:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
208:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
209:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
210:     <span class="ruby-keyword kw">end</span>
211:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
212:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
213:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
214:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
215:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
216:     <span class="ruby-keyword kw">end</span>
217:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
218:     <span class="ruby-keyword kw">else</span>
219:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
220:     <span class="ruby-keyword kw">end</span>
221:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;tb_cases_state&gt;=4  and tb_cases_caseendbook_id_first is not null&quot;</span>
222:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
223:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
224:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
225:     <span class="ruby-keyword kw">end</span>
226:     <span class="ruby-comment cmt">#s=&quot;a.id as id,a.order_type as order_type,a.reviewed_suggestion as reviewed_suggestion,a.journal_id as journal_id,a.institute as institute,a.reviewed as reviewed,a.memo as memo,a.reviewed_suggestion_memo as reviewed_suggestion_memo,a.reviewed_shop_checked as reviewed_shop_checked,b.subject as subject,b.title as title,b.pissn as pissn&quot;</span>
227:     <span class="ruby-comment cmt">#@case_pages,@case=paginate(:tb_cases,:order=&gt;@order,:conditions=&gt;c,:per_page=&gt;@page_lines.to_i)</span>
228:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,<span class="ruby-node">&quot;select distinct (case tb_cases_state&gt;=200 when true then 2 else 1 end) as state,tb_cases_id,tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk,tb_cases_clerk_2,tb_cases_receivedate,tb_cases_nowdate,tb_cases_caseendbook_id_last from v_case_query1_list1s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
229:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000721" class="method-detail">
        <a name="M000721"></a>

        <div class="method-heading">
          <a href="#M000721" class="method-signature">
          <span class="method-name">list_3</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
结案后归档前，但是助理只能看到自己办过的案件。助理录入结案后信息、
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000721-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000721-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 240</span>
240:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_3</span>
241:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_3&quot;</span>
242:     <span class="ruby-ivar">@hant_search_1</span>=[[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_parties_partyname'</span>,<span class="ruby-value str">'当事人名称'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_parties_partytype'</span>,<span class="ruby-value str">'当事人类型'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">'申请人'</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">'被申请人'</span>]]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_recevice_code'</span>,<span class="ruby-value str">'咨询流水号'</span>,<span class="ruby-value str">'text'</span>,[]]]
243:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
244:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
245:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;tb_cases_recevice_code desc&quot;</span>
246:     <span class="ruby-keyword kw">end</span>
247:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
248:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
249:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
250:     <span class="ruby-keyword kw">end</span>
251:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
252:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
253:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
254:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
255:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
256:     <span class="ruby-keyword kw">end</span>
257:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
258:     <span class="ruby-keyword kw">else</span>
259:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
260:     <span class="ruby-keyword kw">end</span>
261:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;tb_cases_caseendbook_id_first is not null and tb_cases_clerk='#{session[:user_code]}'&quot;</span>
262:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
263:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
264:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
265:     <span class="ruby-keyword kw">end</span>
266:     <span class="ruby-comment cmt">#s=&quot;a.id as id,a.order_type as order_type,a.reviewed_suggestion as reviewed_suggestion,a.journal_id as journal_id,a.institute as institute,a.reviewed as reviewed,a.memo as memo,a.reviewed_suggestion_memo as reviewed_suggestion_memo,a.reviewed_shop_checked as reviewed_shop_checked,b.subject as subject,b.title as title,b.pissn as pissn&quot;</span>
267:     <span class="ruby-comment cmt">#@case_pages,@case=paginate(:tb_cases,:order=&gt;@order,:conditions=&gt;c,:per_page=&gt;@page_lines.to_i)</span>
268:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,<span class="ruby-node">&quot;select distinct tb_cases_id,tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk,tb_cases_clerk_2,tb_cases_receivedate,tb_cases_nowdate from v_case_query1_list1s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
269:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000723" class="method-detail">
        <a name="M000723"></a>

        <div class="method-heading">
          <a href="#M000723" class="method-signature">
          <span class="method-name">list_4</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
助理可以看到自己的咨询案件和在办案件，助理能看到自己的案件。案件发文,减交，缓交，减退
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000723-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000723-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 280</span>
280:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_4</span>
281:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
282:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
283:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;nowdate desc&quot;</span>
284:     <span class="ruby-keyword kw">end</span>
285:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
286:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
287:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
288:     <span class="ruby-keyword kw">end</span>
289:     <span class="ruby-comment cmt">#立案阶段的案件</span>
290:     <span class="ruby-identifier">c</span>=<span class="ruby-node">&quot;used='Y' and clerk='#{session[:user_code]}' and state&gt;=4 and state&lt;100  and end_code=''&quot;</span>
291:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_cases</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
292:     <span class="ruby-ivar">@n1</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c</span>)
293:     <span class="ruby-comment cmt">#已结未归档案件</span>
294:     <span class="ruby-ivar">@order3</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
295:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order3</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order3</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
296:       <span class="ruby-ivar">@order3</span>=<span class="ruby-value str">&quot;recevice_code desc&quot;</span>
297:     <span class="ruby-keyword kw">end</span>
298:     <span class="ruby-ivar">@page_lines3</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
299:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines3</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines3</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
300:       <span class="ruby-ivar">@page_lines3</span>= <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
301:     <span class="ruby-keyword kw">end</span>
302:     <span class="ruby-identifier">c3</span>=<span class="ruby-node">&quot; used='Y' and  clerk='#{session[:user_code]}' and state&gt;=4 and state&lt;&gt;100 and state&lt;150 and end_code&lt;&gt;'' and file_submit_u=''&quot;</span>
303:     <span class="ruby-ivar">@case_pages3</span>,<span class="ruby-ivar">@case3</span>=<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_cases</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c3</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order3</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@page_lines3</span>.<span class="ruby-identifier">to_i</span>)
304:     <span class="ruby-ivar">@n3</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c3</span>)
305:     <span class="ruby-comment cmt">#咨询阶段的案件</span>
306:     <span class="ruby-ivar">@order2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
307:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order2</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
308:       <span class="ruby-ivar">@order2</span>=<span class="ruby-value str">&quot;recevice_code desc&quot;</span>
309:     <span class="ruby-keyword kw">end</span>
310:     <span class="ruby-ivar">@page_lines2</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
311:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines2</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines2</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
312:       <span class="ruby-ivar">@page_lines2</span>= <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
313:     <span class="ruby-keyword kw">end</span>
314:     <span class="ruby-identifier">c2</span>=<span class="ruby-node">&quot;used='Y' and state=1 and (clerk='#{session[:user_code]}' or clerk_2='#{session[:user_code]}') &quot;</span>
315:     <span class="ruby-ivar">@case_pages2</span>,<span class="ruby-ivar">@case2</span>=<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:tb_cases</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c2</span>,<span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@order2</span>,<span class="ruby-identifier">:per_page=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@page_lines2</span>.<span class="ruby-identifier">to_i</span>)
316:     <span class="ruby-ivar">@n2</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:id</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">c2</span>)
317:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000725" class="method-detail">
        <a name="M000725"></a>

        <div class="method-heading">
          <a href="#M000725" class="method-signature">
          <span class="method-name">list_5</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
归档申请的案件列表，档案管理员归档使用
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000725-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000725-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 327</span>
327:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_5</span>
328:     <span class="ruby-ivar">@hant_search_1_page_name</span>=<span class="ruby-value str">&quot;list_5&quot;</span>
329:     <span class="ruby-ivar">@hant_search_1</span>=[[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_case_code'</span>,<span class="ruby-value str">'立案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_end_code'</span>,<span class="ruby-value str">'结案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_general_code'</span>,<span class="ruby-value str">'总案号'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_parties_partyname'</span>,<span class="ruby-value str">'当事人名称'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_parties_partytype'</span>,<span class="ruby-value str">'当事人类型'</span>,<span class="ruby-value str">'select'</span>,[[<span class="ruby-value">1</span>,<span class="ruby-value str">'申请人'</span>],[<span class="ruby-value">2</span>,<span class="ruby-value str">'被申请人'</span>]]],[<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'date(tb_cases_file_up_t)'</span>,<span class="ruby-value str">'归档时间'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'date'</span>,<span class="ruby-value str">'date(tb_cases_file_receive_t)'</span>,<span class="ruby-value str">'接收时间'</span>,<span class="ruby-value str">'text'</span>,[]],[<span class="ruby-value str">'char'</span>,<span class="ruby-value str">'tb_cases_clerk'</span>,<span class="ruby-value str">'助理'</span>,<span class="ruby-value str">'select'</span>,<span class="ruby-constant">UserDuty</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select users.code as code,users.name as name from users,user_duties where  users.states='Y' and users.used='Y' and users.code=user_duties.user_code and user_duties.duty_code='0003' order by users.ord&quot;</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>[<span class="ruby-identifier">p</span>.<span class="ruby-identifier">code</span>,<span class="ruby-identifier">p</span>.<span class="ruby-identifier">name</span>]}.<span class="ruby-identifier">insert</span>(<span class="ruby-value">0</span>,[<span class="ruby-value str">&quot;&quot;</span>,<span class="ruby-value str">&quot;全部&quot;</span>])]]
330:     <span class="ruby-ivar">@order</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:order</span>]
331:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@order</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
332:       <span class="ruby-ivar">@order</span>=<span class="ruby-value str">&quot;right(tb_cases_case_code,7) desc&quot;</span>
333:     <span class="ruby-keyword kw">end</span>
334:     <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page_lines</span>]
335:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@page_lines</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
336:       <span class="ruby-ivar">@page_lines</span>=<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:lines</span>]
337:     <span class="ruby-keyword kw">end</span>
338:     <span class="ruby-ivar">@hant_search_1_r</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_r</span>]
339:     <span class="ruby-identifier">hant_search_1_word</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:hant_search_1_word</span>]
340:     <span class="ruby-ivar">@search_condit</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:search_condit</span>]
341:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit</span><span class="ruby-operator">==</span><span class="ruby-keyword kw">nil</span>
342:       <span class="ruby-ivar">@search_condit</span>=<span class="ruby-value str">&quot;&quot;</span>
343:     <span class="ruby-keyword kw">end</span>
344:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">hant_search_1_word</span> <span class="ruby-operator">==</span><span class="ruby-value str">&quot;&quot;</span>
345:     <span class="ruby-keyword kw">else</span>
346:       <span class="ruby-ivar">@search_condit</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hant_search_1_word</span>
347:     <span class="ruby-keyword kw">end</span>
348:     <span class="ruby-identifier">c</span>=<span class="ruby-value str">&quot;tb_cases_state&gt;=200&quot;</span> <span class="ruby-comment cmt">#and clerk='#{session[:user_code]}'</span>
349:     <span class="ruby-identifier">p</span>=<span class="ruby-constant">PubTool</span>.<span class="ruby-identifier">new</span>()
350:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@search_condit!</span>= <span class="ruby-value str">&quot; and &quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sql_check_3</span>(<span class="ruby-ivar">@search_condit</span>)<span class="ruby-operator">!=</span><span class="ruby-keyword kw">false</span>
351:       <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@search_condit</span>
352:     <span class="ruby-keyword kw">end</span>
353:     <span class="ruby-comment cmt">#@case_pages,@case=paginate(:tb_cases,:order=&gt;@order,:conditions=&gt;c,:per_page=&gt;@page_lines.to_i)</span>
354:     <span class="ruby-ivar">@case_pages</span>,<span class="ruby-ivar">@case</span>=<span class="ruby-identifier">paginate_by_sql</span>(<span class="ruby-constant">VCaseQuery1List1</span>,<span class="ruby-node">&quot;select distinct tb_cases_id,tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk,tb_cases_clerk_2,tb_cases_receivedate,tb_cases_nowdate,tb_cases_file_num_1,tb_cases_file_num_2,tb_cases_file_typ from v_case_query1_list1s where #{c}  order by #{@order}&quot;</span>,<span class="ruby-ivar">@page_lines</span>.<span class="ruby-identifier">to_i</span>)
355:     <span class="ruby-ivar">@n_l</span>=<span class="ruby-constant">VCaseQuery1List1</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-node">&quot;select distinct tb_cases_id,tb_cases_state,tb_cases_recevice_code,tb_cases_general_code,tb_cases_case_code, tb_cases_end_code,tb_cases_clerk,tb_cases_clerk_2,tb_cases_receivedate,tb_cases_nowdate,tb_cases_file_num_1,tb_cases_file_num_2,tb_cases_file_typ from v_case_query1_list1s where #{c}&quot;</span>).<span class="ruby-identifier">length</span>
356:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000727" class="method-detail">
        <a name="M000727"></a>

        <div class="method-heading">
          <a href="#M000727" class="method-signature">
          <span class="method-name">remun_list</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000727-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000727-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 365</span>
365:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remun_list</span>
366:     <span class="ruby-ivar">@rc</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:recevice_code</span>]
367:     <span class="ruby-ivar">@bank_typ</span> = {<span class="ruby-value str">&quot;0001&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;本地&quot;</span>, <span class="ruby-value str">&quot;0002&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;外地&quot;</span>}
368:     <span class="ruby-ivar">@typ1</span> = {<span class="ruby-value str">&quot;0001&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;仲裁员&quot;</span>, <span class="ruby-value str">&quot;0002&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;助理&quot;</span>, <span class="ruby-value str">&quot;0003&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;校核人员&quot;</span>, <span class="ruby-value str">&quot;0004&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;员工&quot;</span>}
369:     <span class="ruby-ivar">@typ2</span> = {<span class="ruby-value str">&quot;1&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;报酬&quot;</span>, <span class="ruby-value str">&quot;2&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;奖励&quot;</span>, <span class="ruby-value str">&quot;3&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;扣减&quot;</span>, <span class="ruby-value str">&quot;4&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;办案其它报酬&quot;</span>, <span class="ruby-value str">&quot;5&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;出差补助合计&quot;</span>}
370: 
371:     <span class="ruby-ivar">@case</span> = <span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find_by_recevice_code</span>(<span class="ruby-ivar">@rc</span>)
372:     <span class="ruby-ivar">@tb_extend</span> = <span class="ruby-constant">TbExtend</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>{<span class="ruby-identifier">:recevice_code</span> =<span class="ruby-operator">&gt;</span><span class="ruby-ivar">@rc</span>, <span class="ruby-identifier">:used=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'Y'</span>})
373:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000714" class="method-detail">
        <a name="M000714"></a>

        <div class="method-heading">
          <a href="#M000714" class="method-signature">
          <span class="method-name">select</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000714-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000714-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 99</span>
 99:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select</span>
100:     <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
101:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:case_code</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">case_code</span>
102:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:recevice_code</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">recevice_code</span>
103:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:general_code</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">general_code</span>
104:     <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:contr_r</span>],<span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:act_r</span>]
105:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000716" class="method-detail">
        <a name="M000716"></a>

        <div class="method-heading">
          <a href="#M000716" class="method-signature">
          <span class="method-name">select1</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000716-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000716-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 147</span>
147:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select1</span>
148:     <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
149:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:case_code</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">case_code</span>
150:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:recevice_code</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">recevice_code</span>
151:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:general_code</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">general_code</span>
152:     <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:contr_r</span>],<span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:act_r</span>]
153:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000718" class="method-detail">
        <a name="M000718"></a>

        <div class="method-heading">
          <a href="#M000718" class="method-signature">
          <span class="method-name">select_1</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000718-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000718-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 187</span>
187:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select_1</span>
188:     <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
189:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:case_code_1</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">case_code</span>
190:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:recevice_code_1</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">recevice_code</span>
191:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:general_code_1</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">general_code</span>
192:     <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:contr_r</span>],<span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:act_r</span>]
193:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000720" class="method-detail">
        <a name="M000720"></a>

        <div class="method-heading">
          <a href="#M000720" class="method-signature">
          <span class="method-name">select_2</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000720-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000720-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 231</span>
231:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select_2</span>
232:     <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
233:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:case_code_2</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">case_code</span>
234:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:recevice_code_2</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">recevice_code</span>
235:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:general_code_2</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">general_code</span>
236:     <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:contr_r</span>],<span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:act_r</span>]
237:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000722" class="method-detail">
        <a name="M000722"></a>

        <div class="method-heading">
          <a href="#M000722" class="method-signature">
          <span class="method-name">select_3</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000722-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000722-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 271</span>
271:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select_3</span>
272:     <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
273:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:case_code_3</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">case_code</span>
274:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:recevice_code_3</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">recevice_code</span>
275:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:general_code_3</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">general_code</span>
276:     <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:contr_r</span>],<span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:act_r</span>]
277:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000724" class="method-detail">
        <a name="M000724"></a>

        <div class="method-heading">
          <a href="#M000724" class="method-signature">
          <span class="method-name">select_4</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000724-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000724-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 319</span>
319:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select_4</span>
320:     <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
321:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:case_code_4</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">case_code</span>
322:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:recevice_code_4</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">recevice_code</span>
323:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:general_code_4</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">general_code</span>
324:     <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:contr_r</span>],<span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:act_r</span>]
325:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000726" class="method-detail">
        <a name="M000726"></a>

        <div class="method-heading">
          <a href="#M000726" class="method-signature">
          <span class="method-name">select_5</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000726-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000726-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/case_p_controller.rb, line 357</span>
357:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select_5</span>
358:     <span class="ruby-ivar">@case</span>=<span class="ruby-constant">TbCase</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
359:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:case_code_5</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">case_code</span>
360:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:recevice_code_5</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">recevice_code</span>
361:     <span class="ruby-identifier">session</span>[<span class="ruby-identifier">:general_code_5</span>]=<span class="ruby-ivar">@case</span>.<span class="ruby-identifier">general_code</span>
362:     <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:contr_r</span>],<span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>[<span class="ruby-identifier">:act_r</span>]
363:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>